(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1919:function(e,t,n){"use strict";var r,a,o=n(0),i=n.n(o),s=n(463),l=n(136),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={ref:null},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,r=t.children,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["tabIndex","children"]),o=this.state.ref;return i.a.createElement(s.a,c({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},a),i.a.createElement(l.d.Provider,{value:o},r))}}]),t}(),r.defaultProps={tabIndex:0},a);n.d(t,"a",function(){return f})},1920:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(0),i=n.n(o),s=n(10),l=n(2),c=n.n(l),u=n(1991),p=n.n(u),f=n(119),d=n.n(f),m=n(1901),h=n(2127),v=n(2128),b=n(3),y=function(e){return i.a.createElement(b.a,e,i.a.createElement("path",{d:"M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z",fillRule:"evenodd"}))};y.defaultProps={name:"Share"};var w,g,E=y,O=n(40),C=n(4),k=n(8),j=n(108),_=n(35),S=n(136),P=n(501),T=n(14),N=n(11),A=(n(1993),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e){return e&&e.startsWith("//")?"https:"+e:e}function M(e){return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}var L=(g=w=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=x(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={qrCodeUrl:"",url:""},r.togglerRef=i.a.createRef(),r.shouldShowMenu=function(){var e=r.props,t=e.onTogglerClick,n=e.disabled;return!1!==t()&&!n},r.handleTogglerClick=function(e){r.shouldShowMenu()?(r.loadQrcodeImage(),r.onShare(e)):e.preventDefault()},r.open=function(e){r.shouldShowMenu()&&(r.loadQrcodeImage(),r.menu.popover.open(),r.onShare(e))},r.onShare=function(){var e=r.props,t=e.id,n=e.type,a=e.getShareText,o=e.zaShareId;a(t,n),k.default.trackEvent(r.togglerRef.current,A({action:"Share",element:"Button",is_intent:!0,element_name:N.Q[n]},o&&{id:o}))},r.copyLink=function(){var e=r.props,t=e.type,n=e.title,a=e.authorName,o=e.href,i=e.showNotification,s=_.b[t]||"",l=n?n+" - ":"",c=a&&"匿名用户"!==a&&s?a+"的"+s+" - ":"",u=o?Object(j.toAbsoluteUrl)(o):r.url();p()(""+l+c+"知乎\n"+I(u)),i("链接复制成功！")},r.url=function(){var e=r.props,t=e.id,n=e.type;return I(Object(j.toAbsoluteUrl)(r.props.url))||location.origin+"/"+n+"/"+t},r.loadQrcodeImage=function(){var e=r.state.qrCodeUrl;if(!e){var t=location.protocol+"//www.zhihu.com/",n=r.url();e=t+"qrcode?"+M({url:n+"#showWechatShareTip"}),r.setState({qrCodeUrl:e,url:n})}},r.shareToWeibo=function(){var e={appKey:"3063806388"},t=r.props.shareText;t&&(e.title=t);var n="http://service.weibo.com/share/share.php?"+M(e);window.open(n,"_blank","width=615,height=505")||(location.href=n)},x(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),R(t,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.togglerClassName,a=t.positionStatus,s=t.toggler,l=t.type,u=t.disabled,p=this.state.qrCodeUrl,f=i.a.createElement("div",{className:c()("ShareMenu-toggler",r)},p&&i.a.createElement("img",{className:"ShareMenu-fakeQRCode",src:p,alt:"微信二维码"}),Object(o.cloneElement)(s,{onMouseEnter:this.loadQrcodeImage,disabled:u,ref:this.togglerRef}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(S.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),i.a.createElement(O.c,{className:c()("ShareMenu",n),positionStatus:a,ref:function(t){e.menu=t},toggler:f,onClick:this.handleTogglerClick},i.a.createElement(O.b,{className:"ShareMenu-button",onClick:this.copyLink},i.a.createElement(m.a,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"),"live"===l||i.a.createElement(O.b,{className:"ShareMenu-button",onClick:this.shareToWeibo},i.a.createElement(h.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"),i.a.createElement(O.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0},i.a.createElement(C.c,{className:"ShareMenu-button",preset:"plain"},i.a.createElement(v.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"),i.a.createElement("img",{className:"ShareMenu-qrCode",src:p,alt:"微信二维码"}))))}}]),t}(),w.propTypes={toggler:a.a.node,onTogglerClick:a.a.func,zaShareId:a.a.number},w.defaultProps={toggler:i.a.createElement(C.c,{preset:"plain",icon:E,label:"分享"}),onTogglerClick:d.a},g);t.a=Object(s.connect)(function(e,t){var n=t.id,r=t.type;return{shareText:e.shareTexts[""+r+n]}},{showNotification:T.g,getShareText:P.b})(L)},1921:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(0),i=n.n(o),s=n(2),l=n.n(s),c=n(24),u=n.n(c),p=n(44),f=n.n(p),d=n(1929),m=n(2025),h=n(1930),v=(n(1941),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var b=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.state={isInputing:!1,value:o.props.value||""},o.handleChange=function(e){o.setState({value:Object(d.cutStringWidth)(e.target.value,30)})},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),v(t,[{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,r=t.value,a=this.props.onChange,o=!n&&!r,s=!n&&r;return i.a.createElement("div",{className:"Editable-VideoTitleInput-container"},i.a.createElement(h.a,null,i.a.createElement("div",{className:l()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":o}),onClick:function(){return e.setState({isInputing:!0})}},o&&i.a.createElement(m.a,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&i.a.createElement("div",{className:l()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!r})},r||"好的标题可以获得更多的推荐及关注者"),n&&i.a.createElement("input",{className:"Editable-VideoTitleInput",value:r,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),a(t.target.value)}}),s&&i.a.createElement(m.a,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),t}(),y=n(1922),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.state={shown:!1},o.handleObserve=function(e){(e[0].isIntersecting||e[0].intersectionRatio>0)&&o.setState({shown:!0})},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),w(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,r=e.children;return this.state.shown?r:i.a.createElement(y.a,{rootMargin:n,onObserve:this.handleObserve,threshold:[0,.1]},t||i.a.createElement("div",{style:{height:"1px"}}))}}]),t}();g.propTypes={placeholder:a.a.element,rootMargin:a.a.string},g.defaultProps={rootMargin:"200px"};var E=g,O=n(2026),C=n(1942),k=n.n(C),j=function(e){var t=e.className;return i.a.createElement("svg",{viewBox:"0 0 72 72",className:t},i.a.createElement("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),i.a.createElement("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},_=(n(1943),function(){return i.a.createElement("div",{className:"VideoCardPlayButton"},i.a.createElement(j,{className:"VideoCardPlayButton-icon"}))}),S=function(e){var t=e.fileSize;return i.a.createElement("div",{className:"VideoCardPlayButton-withFileSize--outer"},i.a.createElement("span",{className:"VideoCardPlayButton-withFileSize"},i.a.createElement(O.a,{center:!0,size:14}),t?k()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))};function P(e){var t=e.thumbnail,n=e.isLens,r=e.canPlay;return n||r?t&&"string"==typeof t?i.a.createElement("img",{src:t,alt:"视频封面"}):t:i.a.createElement(j,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}n(1944);var T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var N=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.state={isMobile:!1,playerShown:!1,playerLoading:!1},o.handlePlay=function(e){e.preventDefault();var t=o.props,n=t.interactive,r=t.isConverting,a=t.isLens,i=t.playerUrl,s=t.onPlayFailed,l=t.onLensPlay,c=t.onBeforePlay;n&&!r&&(i||!s?c?Promise.resolve(c()).then(function(e){!1!==e&&o.play()}):a&&l&&l()||o.play():s())},o.handlePlayerLoad=function(){o.loadingCount--,0===o.loadingCount&&o.setState({playerLoading:!1})},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),T(t,[{key:"componentDidMount",value:function(){this.setState({isMobile:f()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){var e=this.props,t=e.isPlayable,n=e.playerUrl;return t&&n}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.onLensPlay,a=e.onBeforePlay,o=this.state.isMobile;return t&&(n?!(r||a):o)}},{key:"showContent",value:function(){var e=this.props,t=e.isLens,n=e.title,r=e.isVideoTitleEditable,a=this.state.isMobile;return!r&&(t?Boolean(n):!(a&&this.canPlay()))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.title,a=e.thumbnail,o=e.source,s=e.url,c=e.showPlayButton,u=e.usePlayButtonWithFileSize,p=e.fileSize,f=e.rightBottomButton,d=e.isVideoTitleEditable,m=e.onVideoTitleChange,h=e.isConverting,v=this.canPlay(),y=this.inlinePlayer(),w=i.a.createElement(P,{thumbnail:a,isLens:n,canPlay:v}),g=c&&!h&&(u?i.a.createElement(S,{fileSize:p}):i.a.createElement(_,null)),E=i.a.createElement("div",{className:"VideoCard-layout"},v?i.a.createElement("div",{className:"VideoCard-video"},i.a.createElement("div",{className:"VideoCard-video-content"},y?this.renderPlayer():i.a.createElement("div",{className:l()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!a}),onClick:this.handlePlay},w,g,f))):i.a.createElement("div",{className:"VideoCard-poster"},w),this.showContent()&&i.a.createElement("div",{className:"VideoCard-content"},i.a.createElement("div",{className:"VideoCard-title"},r),this.showDescription()&&i.a.createElement("div",{className:"VideoCard-description"},o&&i.a.createElement("span",{className:"VideoCard-source"},o),i.a.createElement("span",{className:"VideoCard-badge"},"视频"))),d&&i.a.createElement(b,{value:r,onChange:m}));return n?E:t?i.a.createElement("a",{className:"VideoCard-link",href:s,target:"_blank",rel:"noopener noreferrer"},E):i.a.createElement("div",{className:"VideoCard-link"},E)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,r=t.playerUrl,a=t.onIframeRef,o=t.useMSE,s=u.a.stringify({autoplay:e&&"lens"===n,useMSE:o});return i.a.createElement(E,{placeholder:i.a.createElement("div",{className:"VideoCard-player"})},i.a.createElement("div",{className:"VideoCard-player"},i.a.createElement("iframe",{ref:a,frameBorder:0,allowFullScreen:!0,src:r+"?"+s,onLoad:this.handlePlayerLoad})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,r=this.state,a=r.isMobile,o=r.playerShown,s=r.playerLoading;return i.a.createElement("div",{className:l()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":a})},this.renderContent(),o&&i.a.createElement("div",{className:l()("VideoCard-overlay",{"is-loading":s})},this.renderPlayer(!0)),i.a.createElement("div",{className:l()("VideoCard-mask",{"is-shown":s})}))}}]),t}();N.propTypes={interactive:a.a.bool,showPlayButton:a.a.bool,usePlayButtonWithFileSize:a.a.bool,fileSize:a.a.number,onPlay:a.a.func,onPlayFailed:a.a.func,onLensPlay:a.a.func,onBeforePlay:a.a.func,rightBottomButton:a.a.oneOfType([a.a.element,a.a.string]),thumbnail:a.a.oneOfType([a.a.element,a.a.string])},N.defaultProps={interactive:!0,showPlayButton:!0};var A=N;n.d(t,"b",function(){return A}),n.d(t,"a",function(){return j})},1922:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(0),i=n(18),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();"undefined"!=typeof window&&n(821);var l=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.handleObserve=function(e){var t=o.props.onObserve;t&&t(e)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),s(t,[{key:"componentDidMount",value:function(){this.target=Object(i.findDOMNode)(this),this.observer=this.createObserver(),this.observer.observe(this.target)}},{key:"componentWillUnmount",value:function(){this.target&&this.observer.unobserve(this.target)}},{key:"createObserver",value:function(){var e=this.props,t={root:e.root,rootMargin:e.rootMargin,threshold:e.threshold};return new window.IntersectionObserver(this.handleObserve,t)}},{key:"render",value:function(){return this.props.children}}]),t}();l.propTypes={root:a.a.object,rootMargin:a.a.string,threshold:a.a.oneOfType([a.a.number,a.a.arrayOf(a.a.number)]),onObserve:a.a.func},t.a=l},1923:function(e,t,n){"use strict";var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(2172),u=n(4),p=n(8),f=n(46),d=n(136),m=(n(1994),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.buttonRef=l.a.createRef(),r.handleClick=function(e){var t=r.props,n=t.zaInfos,a=n.toggleComment,o=n.getCommentAction,i=t.positionStatus,s=t.onClick,l=t.commentsShown;if(p.default.trackEvent(r.buttonRef.current,m({action:o?o(!l):"Comment",element:"Button",is_intent:!0},a&&{id:a})),s){var c="fixed"===i?"fixed":"bottom",u={commentsShown:!r.props.commentsShown,commentsAutoFocus:!(e instanceof KeyboardEvent),commentPattern:c};e instanceof KeyboardEvent&&"bottom"===c&&r.buttonRef.current.focus(),s(e,u)}},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),h(t,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.count,r=e.commentsShown,a=e.commentClosed,o=void 0;r?o="收起评论":o=n&&!a?Object(f.formatNumber)(n)+" 条评论":"添加评论";return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),l.a.createElement(u.c,{onRef:this.buttonRef,preset:"plain",className:t,onClick:this.handleClick,icon:c.a,label:o}))}}]),t}(),r.propTypes={commentsShown:i.a.bool,count:i.a.number,zaInfos:i.a.shape({id:i.a.number,getCommentAction:i.a.func}),onInstance:i.a.func},r.defaultProps={zaInfos:{},onInstance:function(){return null}},a);t.a=b},1924:function(e,t,n){"use strict";var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(162),u=n(248),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handlePackup=function(){var e=r.props.onClose;window.scrollTo(0,r.originPageYOffset),e&&e()},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),p(t,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.showPackupButton,r=e.parent,a=e.commentPattern,o=e.commentInputPosition,i=e.onClose,s=e.byComment,p=e.needLoadCommentPermission,f=e.isMobile,d=e.onOrderChange,m=e.onItemLike,h=e.onPaginationClick,v=e.autoFocus,b=e.onMount,y=e.zaInfo;return t?"bottom"===a?l.a.createElement(u.a,{autoFocus:v,parent:r,commentPattern:a,commentInputPosition:o,showPackupButton:n,handlePackupButton:this.handlePackup,needLoadCommentPermission:p,isMobile:f,onOrderChange:d,onItemLike:m,onPaginationClick:h,onMount:b,zaInfo:y}):l.a.createElement(c.b,{size:"fullPage",onClose:i,maskClosable:!1},t&&"fixed"===a&&l.a.createElement(u.a,{parent:r,commentPattern:a,byComment:s,needLoadCommentPermission:p,onOrderChange:d,onItemLike:m,onPaginationClick:h,onMount:b,zaInfo:y})):null}}]),t}(),r.propTypes={byComment:i.a.oneOfType([i.a.number,i.a.string]),parent:i.a.object,shown:i.a.bool,showPackupButton:i.a.bool,commentPattern:i.a.string,commentInputPosition:i.a.oneOf(["top","bottom"]),onClose:i.a.func,needLoadCommentPermission:i.a.bool,isMobile:i.a.bool,onOrderChange:i.a.func,onItemLike:i.a.func,onPaginationClick:i.a.func,autoFocus:i.a.bool,onMount:i.a.func,zaInfo:i.a.object},r.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},a);t.a=d},1926:function(e,t,n){"use strict";var r,a=n(1),o=n.n(a),i=n(0),s=n.n(i),l=n(10),c=n(2),u=n.n(c),p=n(4),f=n(1921),d=n(1915),m=n(471),h=n(165),v=n(1958),b=n(475),y=n(1922),w=n(235),g=n(480),E=n(37),O=n(8),C=n(136),k=n(233),j=n(491),_=n(16),S=n(1927),P=(n(1989),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var N=Object(l.connect)(function(e,t){return{isCurrentUser:Object(_.h)(e,t.data.author)}})(r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(e),e.handleCopy=e.handleCopy.bind(e),e.handleTipClose=e.handleTipClose.bind(e),e.rightClickX=-1,e.rightClickY=-1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),T(t,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者："+t,"链接："+e,"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],a=["",""];return r=n?r.concat(a):a.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("\n");return r?a+e:e+a}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("<br />");return"<div>"+(r?a+e:e+a)+"</div>"}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),a=this.getRange(r),o=a.toString().trim(),i=this.getRangeHtml(a);if(o&&!(o.length<128)){var s=o.length>=512,l=this.getCopyHtml(i,t,n,s),c=this.getCopyText(o,t,n,s),u=e.nativeEvent.clipboardData;if("object"===(void 0===u?"undefined":P(u))){if(u.setData("text/html",'<meta charset="utf-8">'+l),u.setData("text/plain",c),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var p=document.createElement("div");p.innerHTML=l;var f=p.firstChild;f.style.position="fixed",f.style.left="-9999px",document.body.appendChild(f),r.selectAllChildren(f),setTimeout(function(){document.body.removeChild(f),r.removeAllRanges(),r.addRange(a)},200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),a=r.toString().trim(),o=this.randomRange(44,66);if(!(a.length<=o)){e.preventDefault(),e.stopPropagation();var i=r.getBoundingClientRect(),s=window.pageYOffset,l=this.rightClickX,c=this.rightClickY,u=void 0,p="bottom";if(-1!==c)u=c+3;else{var f=this.props.viewPort,d=i.top+s,m=i.bottom+s,h=s+f.top+52,v=s+f.bottom-52;m<h?u=h-52:m<v?u=m:(p="top",u=d>h&&d<v?d:v+52)}var b=-1!==l?l+3:i.left+(i.right-i.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:b,tipY:u,tipPosition:p}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,a=n.type,o=n.id,i=n.question,l=n.reshipmentSettings,c=n.relationship,u=(c=void 0===c?{}:c).isAuthor,p=c.isAuthorized,f=t.isCurrentUser,d="";if("article"===a?d="https://zhuanlan.zhihu.com/p/"+o:"answer"===a&&(d="https://www.zhihu.com/question/"+i.id+"/answer/"+o),!f&&!u)switch(l){case"disallowed":this.showTip(e,s.a.createElement("a",{href:"https://www.zhihu.com/terms#sec-licence-6"},"禁止转载"));break;case"need_payment":if(!p){this.showTip(e,s.a.createElement("a",{href:"https://www.zhihu.com/copyright/apply?answer="+o},"申请转载"));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,d,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.tag,r=e.html,a=e.children,o=e.onClick,i=e.className,l=e.itemProp,c=e.style,u=e.prefix,p=e.ecommerce,f=this.state,d=f.tipShown,m=f.tipContent,h=f.tipX,v=f.tipY,b=f.tipPosition;return s.a.createElement("div",{ref:t,onClick:o,className:i,style:c},u,s.a.createElement(S.a,{itemProp:l,tag:n,html:r,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:p}),a,s.a.createElement(j.a,{shown:d,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:h,y:v,position:b,content:m,className:"CopyrightRichText-tooltip"}))}}]),t}())||r;N.propTypes={onRef:o.a.func,viewPort:o.a.object};var A,R,x=N,I=n(1928),M=n(17),L=n(819),D=n.n(L),q=n(163),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),z=U(["发布于",""],["发布于",""]),Q=U(["编辑于",""],["编辑于",""]);function U(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var V=(R=A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),B(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,a=e.onClick;return s.a.createElement("div",{className:"ContentItem-time"},s.a.createElement(M.Link,{to:t,target:"_blank",onClick:a},s.a.createElement("span",{"data-tooltip":D()(z,Object(q.toDateTimeString)(n))},r!==n?D()(Q,Object(q.toSmartDateTimeString)(r)):D()(z,Object(q.toSmartDateTimeString)(n)))))}}]),t}(),A.propTypes={href:o.a.string,created:o.a.number,updated:o.a.number,onClick:o.a.func},R),F=n(43),H=n(502),W=n(353);n(1990);n.d(t,"a",function(){return V});var G,Y,K,J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Z=/.*?(class="link-box")/,ee=800,te=400;var ne=Object(l.connect)(function(e){return{isMobile:Object(F.d)(e)}},{updateReadStatus:H.b})((K=Y=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=$(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state=J({},r.getInitTruncatedState(r.props),{shouldSticky:!1,offset:0}),r.richContentRef=s.a.createRef(),r.truncateContent=function(){var e=r.props.isMobile?te:ee,t=r.props.expandedHeight||e;(!r.content||r.content.scrollHeight<t)&&r.setState({isTruncated:!1,isExpanded:!1}),r.content&&r.content.scrollHeight>r.content.offsetHeight&&r.setState({contentCollapsed:!0})},r.updateStateInBrowser=function(){var e=r.props,t=e.excerpt,n=e.html,a=e.expanded,o=e.cover,i=e.unescapable,s=e.limit,l=e.limitWithImage,c=e.truncateHTMLOptions,u=e.truncateDisabled,p=!0,f=r.state.truncatedContent;if(t&&(Z.test(t)||u))f=t;else if(!i){var d=o?l:s,m=r.truncate(n,d,c);p=m.isTruncated,f=m.content}return{isTruncated:p,isExpanded:n&&a,truncatedContent:f,previewImg:null}},r.checkOpenInAppStyle=function(e){},r.toggle=function(e){r.isCollapsed()?r.handleExpand(e):r.handleCollapse(e)},r.handleExpand=function(e){var t=r.props,n=t.zaIds.expand;"0"===t.wxBlock&&O.default.trackEvent(e.target,{id:5550,action:"Click"},{button:{text:"unfoldreadmore"}}),O.default.trackEvent(r.richContentRef.current,J({action:"Expand",name:e&&e.target.textContent},n&&{id:n}));var a=r.props.onExpand;if(a)a(e);else{var o=r.props,i=o.onToggleExpend,s=o.data,l=s.type,c=s.id;r.context.currentUser&&Object(W.c)("article"===l?"post":l,c,W.a);i&&i(!0),r.setState({isExpanded:!0},function(){"article"===l&&Object(w.onViewedOnce)(r.richContentRef.current,function(){O.default.trackEvent(r.richContentRef.current,{action:"ReadFinish"})})})}},r.handleCollapse=function(){var e=r.props.onToggleExpend;O.default.trackEvent(r.richContentRef.current,{action:"Collapse",element:"Button"});e&&e(!1),r.setState({isExpanded:!1},function(){return r.checkOpenInAppStyle(!1)})},r.handlePreview=function(e){var t=r.state,n=t.isExpanded,a=t.isTruncated&&!n,o=e.target;!a&&"IMG"===o.tagName&&o.classList.contains("zh-lightbox-thumb")&&r.setState({previewImg:o})},r.handlePositionStatusChange=function(e){var t=r.props.onPositionStatusChange;t&&(t(e),r.checkOpenInAppStyle("fixed"===e))},r.handleObserve=function(e){var t=e[0].intersectionRatio;if(t||!document.querySelector("#root").style.position){var n=t>0;n!==r.state.shouldSticky&&(r.setState({shouldSticky:n}),n||r.checkOpenInAppStyle(!1))}},r.handleTrunObserve=function(e){var t=r.props,n=t.data,a=(n.type,n.id,t.updateReadStatus,e[0]),o=a.intersectionRatio,i=a.isIntersecting;r.truncateComputed||(o>0||i)&&(setTimeout(function(){return r.truncateContent()}),r.truncateComputed=!0)},r.isCollapsed=function(){var e=r.props,t=e.after,n=e.before,a=e.unescapable,o=r.state,i=o.isExpanded,s=o.isTruncated;return!n&&!t||a?s&&!i:!i},$(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),X(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(J({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(w.onViewedOnce)(this.richContentRef.current,function(){var t=e.props,n=t.data,r=n.type,a=n.id,o=t.expanded;e.context.currentUser&&o&&Object(W.c)("article"===r?"post":r,a,W.a)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.richContentRef.current.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,a=n.bottom,o=n.height,i=this.richContentRef.current.offsetHeight,s=window.innerHeight,l=a<s?i-o:r-(s-i);window.scrollTo(0,this.scroll+l),this.rect=null,this.scroll=null}}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,a=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:a?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(g.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,a=t.noCollapsed,o=t.expandText,i=void 0===o?"展开阅读全文":o,l=t.onClick,c=t.videoData,u=this.state,f=u.isExpanded,m=u.isTruncated,v=u.shouldSticky,b=u.offset;if(!f)return[r&&m&&!c&&s.a.createElement(p.c,{key:"expand-button",preset:"plain",className:"ContentItem-rightButton",onClick:l||this.handleExpand},i,s.a.createElement(d.a,{className:"ContentItem-arrowIcon",center:!0})),n&&s.a.createElement(k.a,{key:"actions"},n)];var y=(n||!a)&&s.a.createElement(k.a,{className:"RichContent-actions"},n,!a&&s.a.createElement(p.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse},s.a.createElement("span",{className:"RichContent-collapsedText"},"收起"),s.a.createElement(d.a,{className:"ContentItem-arrowIcon is-active",center:!0})));return v&&y?s.a.createElement(h.a,{offset:b,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange},y):y}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,a=t.data,o=t.itemProp,i=void 0===o?"text":o,l=t.expandText,c=void 0===l?"阅读全文":l,f=t.onClick,h=t.prefix,b=t.unescapable,w=t.collapsedHeight,g=t.ecommerce,E=this.state,O=E.truncatedContent,C=E.previewImg,k=E.viewPort,j=E.contentCollapsed,_=this.isCollapsed(),S=O||r,P="answer"===a.type?Object(v.a)(n):n,T=_?S:P,N=s.a.createElement(x,J({itemProp:i,key:_,className:u()("RichContent-inner",{"RichContent-inner--collapsed":j}),style:_&&b?{maxHeight:w}:null,tag:"span",onRef:function(t){e.content=t},data:a,html:T,viewPort:k,prefix:h},_&&{onClick:f||this.handleExpand},{ecommerce:g}),!b&&_&&s.a.createElement(p.c,{preset:"plain",className:"ContentItem-more"},c,s.a.createElement(d.a,{className:"ContentItem-arrowIcon",center:!0})),C&&s.a.createElement(m.a,{img:C,onClose:function(){return e.setState({previewImg:null})}}));return b?s.a.createElement(y.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve},N):N}},{key:"render",value:function(){var e=this.props,n=e.unescapable,r=e.after,a=e.before,o=e.extra,l=e.cover,c=e.hasVideo,p=e.renderCanExpandExtra,f=e.className,d=e.videoData,m=e.handleClickVideoMoreButton,h=this.state.isExpanded,v=this.isCollapsed(),b=d?s.a.createElement(i.Fragment,null,s.a.createElement(I.a,{data:d}),s.a.createElement("p",{className:"RichContent-videoMore",onClick:m},"点击查看全文")):this.renderText(),w=h?s.a.createElement(y.a,{rootMargin:"-240px 0px",onObserve:this.handleObserve},b):b;return s.a.createElement("div",{className:u()("RichContent",f,{"is-collapsed":v,"RichContent--unescapable":n}),ref:this.richContentRef,onClick:this.handlePreview},s.a.createElement(C.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!v&&a,!n&&v&&l&&s.a.createElement(t.Cover,{url:l,hasVideo:c,onClick:this.handleExpand}),w,o||"function"==typeof p&&p(h,this.handleExpand),!v&&r,this.renderActions())}}]),t}(),Y.contextTypes={currentUser:o.a.object},Y.propTypes={unescapable:o.a.bool,expanded:o.a.bool,noCollapsed:o.a.bool,limit:o.a.number,limitWithImage:o.a.number,collapsedHeight:o.a.number,html:o.a.string,excerpt:o.a.string,truncateDisabled:o.a.bool,before:o.a.node,after:o.a.node,prefix:o.a.node,extra:o.a.node,renderCanExpandExtra:o.a.func,topExcludedHeight:o.a.number,onPositionStatusChange:o.a.func,type:o.a.string,data:o.a.object,cover:o.a.string,hasVideo:o.a.bool,truncateHTMLOptions:o.a.object,expandText:o.a.string,onToggleExpend:o.a.func,videoData:o.a.object,handleClickVideoMoreButton:o.a.func,zaIds:o.a.shape({expand:o.a.number})},Y.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",hasVideo:!1,data:{},collapsedHeight:400,zaIds:{}},Y.Cover=function(e){var t=e.url,n=e.hasVideo,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["url","hasVideo"]);return s.a.createElement("div",J({className:u()("RichContent-cover",{"RichContent-cover--mobile":!1})},r),s.a.createElement("div",{className:"RichContent-cover-inner"},s.a.createElement(b.a,{thumbnail:Object(E.imgUrl)(t,"60w"),url:Object(E.imgUrl)(t,"400x224"),alt:"cover"})),n&&s.a.createElement(f.a,{className:"RichContent-cover-play"}))},G=K))||G;t.b=ne},1927:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(18),i=n(8),s=n(37),l=n(481),c=n(472),u=n(79),p=n(1928),f=n(235),d=n(2),m=n.n(d),h=n(68),v=n.n(h),b=n(49),y=n.n(b),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.a;return function(n){return v()(function(r){function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r)));return i.key=t(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.a.Component),w(o,[{key:"render",value:function(){return a.a.createElement(n,Object.assign({},this.props,(t={},r=e,o=this.key,r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t)));var t,r,o}}]),o}(),n)}},E=n(1947),O=n(477),C=n.n(O),k=function(e,t){return function(n){var r,o=(r=[],{value:{},listen:function(e){r.push(e)},unlisten:function(e){r=r.filter(function(t){return t!==e})},emit:function(e){this.value=e,r.forEach(function(t){return t(e)})}}),i=Object(E.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),s=function(e,t){return e?C()(e,function(e){return function(){return t(e.apply(void 0,arguments))}}):{dispatch:t}}(t,function(e){return o.emit(e(o.value))}),l=Object.assign(function(t){return a.a.createElement(i,{source:o},function(r){return a.a.createElement(n,Object.assign({},t,e({value:r,source:o},t),s))})},{source:o});return v()(l,n)}},j=n(20),_=n.n(j);var S=void 0;!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(S||(S={}));var P=function(e){return a.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),a.a.createElement("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),a.a.createElement("svg",Object.assign({x:16,y:18.5},e),a.a.createElement("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},T=function(e){return a.a.createElement("svg",Object.assign({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),a.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.a.createElement("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),a.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),a.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},a.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),a.a.createElement("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),a.a.createElement("svg",{x:"16",y:"18.5"},a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),a.a.createElement("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},a.a.createElement("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),a.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},N=function(e){return a.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),a.a.createElement("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),a.a.createElement("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))},A=(n(1962),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var R=function(){return new Promise(requestAnimationFrame)},x=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.handleClick=function(e){var t=o.props,n=t.gifKey,r=t.src,a=t.onSuccess,i=t.onFailed,l=t.onClick,c=t.loadState,u=t.isPlaying;l&&l(e),o.canPlay?o.props.updateGif({gifKey:n,isPlaying:!u}):c!==S.Loading&&(o.props.updateGif({gifKey:n,loadState:S.Loading}),Promise.all([Object(s.loadImage)(r),R().then(R)]).then(function(){a&&a(),o.props.updateGif({gifKey:n,isPlaying:!0,loadState:S.Ok})}).catch(function(e){i&&i(e),o.props.updateGif({gifKey:n,loadState:S.Failed})}))},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),A(t,[{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"render",value:function(){var e=this.props,t=e.poster,n=e.src,r=e.size,o=e.loadState,i=e.isPlaying,s=this.canPlay&&i,l=o===S.Loading,c=o===S.Failed,u=void 0;return l?u=a.a.createElement(T,{className:"GifPlayer-icon"}):c?u=a.a.createElement(N,{className:"GifPlayer-icon"}):i||(u=a.a.createElement(P,{className:"GifPlayer-icon"})),u&&(this.lastIcon=u),a.a.createElement("div",{className:m()("GifPlayer",{isPlaying:i}),"data-size":r,onClick:this.handleClick},a.a.createElement("img",{className:"column-gif",role:"presentation",src:s?n:t,"data-thumbnail":t,"data-size":r}),u||this.lastIcon)}},{key:"canPlay",get:function(){return this.props.loadState===S.Ok}}]),t}();x.defaultProps={isPlaying:!1,loadState:S.Initial};var I=g("gifKey")(k(function(e,t){return e.value[t.gifKey]},{updateGif:function(e){return function(t){var n,r,a,o=e.gifKey,i=e.isPlaying,s=_()(e,["gifKey","isPlaying"]),l=Object.assign({},t);if(i){var c=!0,u=!1,p=void 0;try{for(var f,d=Object.keys(l)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var m=f.value,h=l[m];m!==o&&h.isPlaying&&(l[m]=Object.assign({},h,{isPlaying:!1}))}}catch(e){u=!0,p=e}finally{try{!c&&d.return&&d.return()}finally{if(u)throw p}}}return Object.assign({},l,(n={},r=o,a=Object.assign({},t[o],{isPlaying:i},s),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}})(x)),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var q,B,z=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=D(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.onSuccess=function(){i.default.trackEvent(r,{action:"StatusReport",element:"Card"},{status:{result:"Success",event:{action:"Click"}}})},r.onFailed=function(){i.default.trackEvent(r,{action:"StatusReport",element:"Card"},{status:{result:"Fail",event:{action:"Click"}}})},D(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),L(t,[{key:"componentDidMount",value:function(){var e=this;i.default.setModule(this,{module:"GifItem"}),Object(f.onViewedOnce)(Object(o.findDOMNode)(this),function(){i.default.trackCardShow(e,{element:"Card"})})}},{key:"render",value:function(){var e=this.props.data;return a.a.createElement(I,M({onSuccess:this.onSuccess,onFailed:this.onFailed},e))}}]),t}(),Q=(n(1963),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var F={fail:"image_web_fail",success:"image_web_success",timeout:"image_web_timeout"};function H(e,t){var n=F[e]+"_"+t.type,r={monitor:{type:"Event",imgResourceErrorInfo:{error_description:n,img_url:t.url,img_from:"web"}}};i.default.trackMonitor({name:n},r)}var W=(q=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=V(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),B.call(r),V(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),U(t,[{key:"componentDidMount",value:function(){this.mount(),this.mountEcommerceNodes()}},{key:"componentWillUpdate",value:function(e){this.props.html!==e.html&&this.unmount()}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.mount(),!e.ecommerce&&this.props.ecommerce&&this.mountEcommerceNodes()}},{key:"componentWillUnmount",value:function(){this.unmount()}},{key:"mount",value:function(){var e=this;this.gifNodes=Array.from(this.root.getElementsByTagName("img")).filter(function(e){return!e.getAttribute("eeimg")&&e.getAttribute("data-thumbnail")}).map(function(t){var n=document.createElement("div");n.className="RichText-gifPlaceholder",n.innerHTML=t.outerHTML,t.parentNode.replaceChild(n,t);var r={src:t.dataset.actualsrc&&t.dataset.actualsrc.endsWith(".gif")?t.dataset.actualsrc:Object(s.imgUrl)(t.dataset.thumbnail,{extension:"gif",size:"b"}),poster:t.dataset.thumbnail,size:t.dataset.size};return Object(o.unstable_renderSubtreeIntoContainer)(e,e.renderGif(r),n),n}),this.mentionNodes=Array.from(this.root.querySelectorAll(".member_mention")).map(function(t){var n=t.getAttribute("data-hash"),r=t.textContent.replace(/^@/,""),a=document.createElement("span");return t.parentNode.replaceChild(a,t),Object(o.unstable_renderSubtreeIntoContainer)(e,e.renderMention({id:n,name:r}),a),a}),this.videoNodes=Array.from(this.root.querySelectorAll(".video-box, .video-link, .unprocessable_video")).map(function(t){var n=t.getAttribute("data-poster"),r="data:,"===n?"":n,a={title:t.getAttribute("data-name"),thumbnail:r,url:t.getAttribute("href"),src:t.getAttribute("data-src")};a=t.getAttribute("data-lens-id")?Q({},a,{isLens:!0,id:t.getAttribute("data-lens-id"),isPlayable:!0}):Q({},a,{isLens:!1,id:t.getAttribute("data-video-id"),isPlayable:"true"===t.getAttribute("data-video-playable")}),t.hasAttribute("data-lens-status")&&(a=Q({},a,{error:{status:t.getAttribute("data-lens-status"),message:t.getAttribute("data-description")}}));var i=document.createElement("div");return t.parentNode.replaceChild(i,t),Object(o.unstable_renderSubtreeIntoContainer)(e,e.renderVideo(a),i),i})}},{key:"unmount",value:function(){this.gifNodes&&this.gifNodes.forEach(function(e){Object(o.unmountComponentAtNode)(e)}),this.mentionNodes&&this.mentionNodes.forEach(function(e){Object(o.unmountComponentAtNode)(e)}),this.videoNodes&&this.videoNodes.forEach(function(e){Object(o.unmountComponentAtNode)(e)}),Object(c.e)({parentComponent:this})}},{key:"renderMention",value:function(e){return a.a.createElement(u.a,{noBadge:!0,user:e,target:"_blank"},"@",e.name)}},{key:"renderVideo",value:function(e){return a.a.createElement(p.a,{data:e})}},{key:"renderGif",value:function(e){return a.a.createElement(z,{data:e})}},{key:"render",value:function(){var e=this;return a.a.createElement(l.a,Q({onRef:function(t){e.root=t},onClick:this.handleGifPlayerClick},this.props,{onLoadImageSuccess:this.trackLoadImageSuccess,onLoadImageFail:this.trackLoadImageFail,onLoadImageTimeout:this.trackLoadImageTimeout}))}}]),t}(),B=function(){var e=this;this.mountEcommerceNodes=function(){Object(c.d)({ecommerce:e.props.ecommerce,parentComponent:e})},this.handleGifPlayerClick=function(e){var t=e.target;"IMG"===t.tagName&&(t.parentNode.classList.contains("isPlaying")||t.dataset.thumbnail&&i.default.trackEvent(t,{action:"Click",element:"Image"}))},this.trackLoadImageFail=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return H.apply(void 0,["fail"].concat(t))},this.trackLoadImageSuccess=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return H.apply(void 0,["success"].concat(t))},this.trackLoadImageTimeout=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return H.apply(void 0,["timeout"].concat(t))}},q);t.a=W},1928:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"DOM",function(){return d}),n.d(r,"PLAYER",function(){return m});var a={};n.r(a),n.d(a,"PLAYER",function(){return h});var o=n(0),i=n.n(o),s=n(10),l=n(1945),c=n.n(l),u=n(1922),p=n(1921),f=n(1933),d={PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},m={QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen"},h={PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen"},v="griffith";var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments[2];return{subscribeMessage:function(r){function a(a){var o=a.origin||a.originalEvent.origin,i="*"===t||t===o,s=a.data||{},l=s.from,c=s.id,u=s.payload;if(i&&l===v&&(!n||e===c)&&u){var p=u.messageName,f=u.data;p&&r(p,f,a.source)}}return window.addEventListener("message",a),{unsubscribe:function(){return window.removeEventListener("message",a)}}},dispatchMessage:function(n,r,a){n&&n.postMessage&&n.postMessage({from:v,id:e,payload:{messageName:r,data:a}},t||"*")}}},y=n(43),w=n(14),g=n(199),E=n(161),O=n(820),C=n.n(O),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j=function(e,t){return e+(t?Date.now()-t:0)},_=function(e,t){return Math.abs(e-t)<.01},S={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},P={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},T=[1,2,3,5,8,13];function N(e){var t="sd",n=0,r=null,a=0,o=null,i=!1,s=0,l=0,c=void 0;function u(i,s){e(i,k({play_event_identifier:r,duration:1e3*n,elapsed:j(a,o),video_quality:S[t]},s))}function p(){(++l<15?T.includes(l):l%15==0)&&u({action:"Playing"})}function f(){clearInterval(c)}return{handlePlayEvent:function(e){var t=e.currentTime,i=e.duration;n=i,_(t,0)&&(r=C()(),a=0),o=Date.now(),_(t,0)?u({action:"Play"}):u({action:"ResumePlay"}),l=0,f(),c=setInterval(p,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;o&&(a+=Date.now()-o,o=null),_(t,n)?u({action:"EndPlay"}):u({action:"Pause"}),f()},handleQualityChangeEvent:function(e){var n=e.quality;u({action:"Switch",name:P[n]}),t=n},handleFragmentLoading:function(){i||(s=Date.now())},handleFragmentLoaded:function(){i||(i=!0,u({action:"Load"},{video_load_time:Date.now()-s}))},clearTick:f}}var A,R,x,I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var L=Object(s.connect)(function(e,t){var n=t.data,r=n.isLens,a=n.id;if(r){var o=!1;if("undefined"!=typeof window){var i=e.env.userAgent.origin,s=Object(y.d)(e,{includeTablet:!0});"Chrome"!==c()(i).browser.name||s||(o="1"===Object(y.a)(e,"ls_fmp4"))}return{data:M({},t.data,{source:"lens",playerUrl:"https://www.zhihu.com/video/"+a}),useMSE:o}}return{data:e.video.data[a]||t.data}},{showNotification:w.g,loadVideo:g.c})(A=Object(E.a)(function(e){var t=e.data,n=t.isLens,r=t.id,a=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:r,is_playable:Boolean(a)},trackCardShow:!0,view:{id:174}}})((R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));x.call(n);var r=e.trackEvent,a=e.data;return n.messageHelper=b(a.id,"*",!0),n.videoTracker=N(function(e,t){r(n,e,{play:t})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),I(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,r=t.id,a=t.playerUrl,o=t.flvPlayerUrl,i=e.loadVideo;n||!r||a||o||i(r);var s=this.messageHelper.subscribeMessage;this.messageSubscription=s(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.data.error,a=t.onBeforePlay,o=t.useMSE;return i.a.createElement("div",{className:"RichText-video"},r?i.a.createElement(f.a,n):i.a.createElement(u.a,{onObserve:this.handleObserve},i.a.createElement(p.b,M({},n,{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:a},o&&{useMSE:!0}))))}}]),t}(),x=function(){var e=this;this.pauseVideoInIframe=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.messageHelper.dispatchMessage(t.contentWindow,a.PLAYER.PAUSE,{dontApplyOnFullScreen:n})},this.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter(function(t){return t!==e.iframe}).forEach(function(t){return e.pauseVideoInIframe(t)})},this.handleMessage=function(t,n){var a=e.videoTracker,o=a.handlePlayEvent,i=a.handlePauseEvent,s=a.handleQualityChangeEvent,l=a.handleFragmentLoading,c=a.handleFragmentLoaded;switch(t){case r.DOM.PLAY:e.pauseAllOtherVideos(),o(n);break;case r.DOM.PAUSE:i(n);break;case r.PLAYER.QUALITY_CHANGE:s(n);break;case"fragment-loading":l(n);break;case"fragment-loaded":c(n)}},this.handleObserve=function(t){t[0].intersectionRatio<=0&&e.iframe&&e.pauseVideoInIframe(e.iframe,!0)},this.handlePlay=function(){e.props.trackEvent(e,{id:5500,action:"Play",element:"Video"})},this.handlePlayFailed=function(){(0,e.props.showNotification)("视频加载失败，请刷新页面重试","red")}},A=R))||A)||A;t.a=L},1929:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1938);t.getHexRandom=r.getHexRandom,t.sliceString=r.sliceString,t.stringWidth=r.stringWidth,t.cutStringWidth=r.cutStringWidth},1930:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),o(t,[{key:"handleEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return a.a.createElement("div",{onBeforeInput:this.handleEvent,onBlur:this.handleEvent,onCompositionEnd:this.handleEvent,onCompositionStart:this.handleEvent,onCopy:this.handleEvent,onCut:this.handleEvent,onDragEnd:this.handleEvent,onDragEnter:this.handleEvent,onDragLeave:this.handleEvent,onDragOver:this.handleEvent,onDragStart:this.handleEvent,onDrop:this.handleEvent,onFocus:this.handleEvent,onInput:this.handleEvent,onKeyDown:this.handleEvent,onKeyPress:this.handleEvent,onKeyUp:this.handleEvent,onMouseUp:this.handleEvent,onPaste:this.handleEvent,onSelect:this.handleEvent,onClick:this.handleEvent},this.props.children)}}]),t}()},1932:function(e,t){(function(t){e.exports=t}).call(this,{})},1933:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(0),i=n.n(o),s=n(1921),l=(n(1946),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),l(t,[{key:"renderThumbnail",value:function(){var e=this.props.error;return i.a.createElement("div",{className:"VideoErrorCard-thumbnail"},i.a.createElement("div",{className:"VideoErrorCard-error"},e.message||"错误"))}},{key:"render",value:function(){var e=this.props,t=e.isLens,n=e.id;return i.a.createElement("div",{className:"VideoErrorCard"},i.a.createElement(s.b,Object.assign({},this.props,t&&{playerUrl:"https://www.zhihu.com/video/"+n},{thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}})))}}]),t}();c.propTypes={error:a.a.object.isRequired},t.a=c},1934:function(e,t,n){"use strict";var r,a,o=n(1969),i=n(0),s=n.n(i),l=n(1),c=n.n(l),u=n(10),p=n(2),f=n.n(p),d=(n(2069),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var m,h,v=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),d(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.commercial,r=e.positive,a=e.neutral,o=e.disclaimer,i=e.circle,l=e.paidContent;if(!(n||r||a||o||i||l))return null;var c=[l,n,r,a,o,i].filter(Boolean).slice(0,2);return s.a.createElement("div",{className:f()("Labels",t)},c.map(function(e,t){return s.a.createElement("div",{className:"Labels-item",key:t},e)}))}}]),t}(),r.propTypes={className:c.a.string,commercial:c.a.node,positive:c.a.node,neutral:c.a.node,disclaimer:c.a.node,circle:c.a.node,paidContent:c.a.node},a),b=n(1952),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[b.e[e],t].filter(Boolean).join(" · ")},w=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?{icon:b.b[t],title:y(t,e.onlineRoundtable.name),shortTitle:b.d[t],description:b.a[t],link:"https://www.zhihu.com/roundtable/"+e.onlineRoundtable.urlToken,linkDescription:b.c[t],zaName:b.g[t]}:null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?{icon:b.b[t],title:y(t),shortTitle:b.d[t],description:b.a[t],zaName:b.g[t]}:null;case"professional":return e.recognitionInfo&&e.recognitionInfo.recognizedCount?{icon:b.b[t],title:y(t),shortTitle:b.d[t],description:b.a[t].replace("{}",String(e.recognitionInfo.recognizedCount)),link:"javascript:;",members:e.recognitionInfo.latestRecognizers,zaName:b.g[t]}:null;default:var n=e.includedInfos?e.includedInfos.find(function(e){return e.type===t}):null;return n?{icon:b.b[t],title:y(t,n.title),shortTitle:b.d[t],description:b.a[t],link:n.url,linkDescription:b.c[t],zaName:b.g[t]}:null}},g=n(2070),E=n.n(g),O=n(246),C=n(8),k=(n(2075),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _,S,P=(h=m=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=j(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={expanded:!1,width:null},r.bar=null,r.list=null,r.popover=null,r.trackListCardShow=E()(function(){C.default.setModule(r.list,{module:"Content",module_name:"正向列表卡片"}),C.default.trackCardShow(r.list,{id:3770})}),r.expand=function(){var e=r.props,t=e.isMobile,n=e.onExpand,a=e.data;t&&r.setState({width:r.bar.getBoundingClientRect().width}),r.setState({expanded:!0},function(){r.trackListCardShow(),n&&n(a)})},r.collapse=function(){r.setState({expanded:!1})},r.handleToggle=function(){r.state.expanded?r.collapse():r.expand()},r.handleDismiss=function(e){r.state.expanded&&(r.bar.contains(e.target)||r.popover.contains(e.target)||r.collapse())},j(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),k(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDismiss),document.addEventListener("touchstart",this.handleDismiss)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDismiss),document.removeEventListener("touchstart",this.handleDismiss)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.isExpandable,a=t.renderBar,o=t.renderItems,i=t.placement,l=t.borderStyle,c=t.arrowed,u=r(n);return s.a.createElement("div",{className:"PositiveLabelLayout"},s.a.createElement("div",{ref:function(t){return e.bar=t},className:"PositiveLabelLayout-bar"},a(n,{expandable:u,onExpand:this.handleToggle})),u&&s.a.createElement(O.a,{onRef:function(t){return e.popover=t},className:f()("PositiveLabelLayout-popover","PositiveLabelLayout-popover--"+i,"PositiveLabelLayout-popover--"+l),isOpen:this.state.expanded,target:this.bar,placement:i,arrowed:c,listenResize:!0},s.a.createElement("div",{ref:function(t){return e.list=t},className:"PositiveLabelLayout-list",style:{width:this.state.width}},o(n))))}}]),t}(),m.propTypes={data:c.a.object.isRequired,isExpandable:c.a.func.isRequired,renderBar:c.a.func.isRequired,renderItems:c.a.func.isRequired,placement:c.a.string,isMobile:c.a.bool.isRequired,borderStyle:c.a.oneOf(["none","common"]),arrowed:c.a.bool.isRequired,onExpand:c.a.func},m.defaultProps={borderStyle:"common"},h),T=n(235),N=n(1884),A=n(72),R=(n(2076),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var x,I,M=(S=_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),R(t,[{key:"render",value:function(){var e=this.props.members;return s.a.createElement("div",{className:"PositiveLabelMembers"},e.slice(0,3).reverse().map(function(e){return s.a.createElement(A.a,{key:e.id,className:"PositiveLabelMembers-avatar",url:e.avatarUrl,size:20})}))}}]),t}(),_.propTypes={members:c.a.array},S),L=(n(2077),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var q,B,z=(I=x=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=D(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.type,a=t.link,o=t.onLinkClick,i=t.zaName;C.default.trackEvent(r.root,{id:3771,name:"一个"},{button:{text:i}}),o&&o(e,a,n)},D(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),L(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;C.default.setModule(this.root,{module:"Content",module_name:r}),Object(T.onViewedOnce)(this.root,function(){C.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,a=e.meta,o=e.link,i=e.linkDescription,l=e.members;return s.a.createElement("div",{className:"PositiveLabelBar-content"},s.a.createElement(t,{className:"PositiveLabelBar-icon"}),s.a.createElement("div",{className:"PositiveLabelBar-main"},s.a.createElement("span",{className:"PositiveLabelBar-title"},n),r&&s.a.createElement("span",{className:"PositiveLabelBar-description"}," "+r)),(o||a||l&&Boolean(l.length))&&s.a.createElement("div",{className:"PositiveLabelBar-side"},l&&Boolean(l.length)&&s.a.createElement("div",{className:"PositiveLabelBar-members"},s.a.createElement(M,{members:l})),o&&!a&&s.a.createElement("span",{className:"PositiveLabelBar-link"},i&&s.a.createElement("span",{className:"PositiveLabelBar-linkDescription"},i),s.a.createElement(N.a,{className:"PositiveLabelBar-linkIcon"})),a&&s.a.createElement("span",{className:"PositiveLabelBar-meta"},a)))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.shortTitle,a=e.description,o=e.meta,i=e.link,l=e.expandable,c=e.members;return s.a.createElement("div",{className:"PositiveLabelBar-content"},s.a.createElement(t,{className:"PositiveLabelBar-icon"}),s.a.createElement("div",{className:"PositiveLabelBar-main"},s.a.createElement("span",{className:"PositiveLabelBar-title"},o&&r||n),a&&!o&&s.a.createElement("span",{className:"PositiveLabelBar-description"}," "+a),o&&s.a.createElement("span",{className:"PositiveLabelBar-meta"}," "+o)),(i||l||c&&Boolean(c.length))&&s.a.createElement("div",{className:"PositiveLabelBar-side"},c&&Boolean(c.length)&&s.a.createElement("div",{className:"PositiveLabelBar-members"},s.a.createElement(M,{members:c})),i&&!l&&s.a.createElement("span",{className:"PositiveLabelBar-link"},s.a.createElement(N.a,{className:"PositiveLabelBar-linkIcon"})),l&&s.a.createElement("span",{className:"PositiveLabelBar-expand"},"点击查看")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,a=t.expandable,o=t.onExpand,i=n?this.renderMobileContent():this.renderDesktopContent();return r&&!a?s.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--link",href:r,onClick:this.handleLinkClick},i):a?s.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--expandable",onClick:o},i):s.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar"},i)}}]),t}(),x.propTypes={isMobile:c.a.bool.isRequired,icon:c.a.func.isRequired,title:c.a.string.isRequired,shortTitle:c.a.string,description:c.a.string,meta:c.a.string,link:c.a.string,linkDescription:c.a.string,onLinkClick:c.a.func,expandable:c.a.bool.isRequired,onExpand:c.a.func,members:c.a.array,zaName:c.a.string},x.defaultProps={isMobile:!1,expandable:!1},I),Q=(n(2078),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var V,F,H=(B=q=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=U(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.type,a=t.link,o=t.onLinkClick,i=t.zaName;C.default.trackEvent(r.root,{id:3771,name:"一个"},{button:{text:i}}),o&&o(e,a,n)},U(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Q(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;C.default.setModule(this.root,{module:"Content",module_name:r}),Object(T.onViewedOnce)(this.root,function(){C.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,a=e.linkDescription;return s.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},s.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),s.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},s.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},s.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),s.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),s.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},r)),s.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},s.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},s.a.createElement("span",{className:"PositiveLabelRoundtableBar-linkDescriptio"},a),s.a.createElement(N.a,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return s.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},s.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),s.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},s.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},s.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),s.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),s.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},r)),s.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},s.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},s.a.createElement(N.a,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,a=n?this.renderMobileContent():this.renderDesktopContent();return s.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelRoundtableBar PositiveLabelRoundtableBar--link",href:r,onClick:this.handleLinkClick},a)}}]),t}(),q.propTypes={isMobile:c.a.bool.isRequired,icon:c.a.func.isRequired,title:c.a.string.isRequired,description:c.a.string,meta:c.a.string,link:c.a.string,linkDescription:c.a.string,onLinkClick:c.a.func,expandable:c.a.bool.isRequired,onExpand:c.a.func,zaName:c.a.string},q.defaultProps={isMobile:!1,expandable:!1},B),W=(n(2079),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Y,K,J=(F=V=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=G(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.type,a=t.link,o=t.onLinkClick,i=t.zaName;C.default.trackEvent(r.root,{id:3771,name:"多个"},{button:{text:i}}),o&&o(e,a,n)},G(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),W(t,[{key:"renderContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,a=e.link,o=e.members;return s.a.createElement("div",{className:"PositiveLabelItem-content"},s.a.createElement(t,{className:"PositiveLabelItem-icon"}),s.a.createElement("div",{className:"PositiveLabelItem-main"},s.a.createElement("span",{className:"PositiveLabelItem-title"},n),r&&s.a.createElement("span",{className:"PositiveLabelItem-description"}," "+r)),(a||o&&Boolean(o.length))&&s.a.createElement("div",{className:"PositiveLabelItem-side"},o&&Boolean(o.length)&&s.a.createElement("div",{className:"PositiveLabelItem-members"},s.a.createElement(M,{members:o})),a&&s.a.createElement("span",{className:"PositiveLabelItem-link"},s.a.createElement(N.a,{className:"PositiveLabelItem-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props.link,n=this.renderContent();return t?s.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelItem PositiveLabelItem--link",href:t,onClick:this.handleLinkClick},n):s.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelItem"},n)}}]),t}(),V.propTypes={isMobile:c.a.bool.isRequired,icon:c.a.func.isRequired,title:c.a.string.isRequired,description:c.a.string,link:c.a.string,onLinkClick:c.a.func,members:c.a.array,zaName:c.a.string},V.defaultProps={isMobile:!1},F),X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ee,te,ne=(K=Y=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.isExpandable=function(e){return e.items.length>1&&"online_roundtable"!==e.items[0].type},r.renderBar=function(e,t){var n=t.expandable,a=t.onExpand,o=r.props,i=o.isMobile,l=o.onLinkClick,c=e.items[0],u=c.type,p=c.props,f=X({isMobile:i,type:u},p,{meta:n?"relevant"===u?"及 "+(e.items.length-1)+" 项收录":i?"等 "+e.items.length+" 项收录":"共 "+e.items.length+" 项收录":null,onLinkClick:l,expandable:n,onExpand:a});return"online_roundtable"===u?s.a.createElement(H,f):s.a.createElement(z,f)},r.renderItems=function(e){var t=r.props,n=t.isMobile,a=t.onLinkClick;return e.items.map(function(e){var t=e.type,r=e.props;return s.a.createElement(J,X({key:t,isMobile:n,type:t},r,{onLinkClick:a}))})},Z(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),$(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.data,r=e.placement,a=e.borderStyle,o=e.arrowed,i=e.onExpand,l=function(e){var t=b.f.map(function(t){return{type:t,props:w(e,t)}}).filter(function(e){return e.props});return t.length?{items:t}:null}(n);return l?s.a.createElement("div",{className:"PositiveLabel"},s.a.createElement(P,{arrowed:o||t,isMobile:t,placement:r||(t?"bottom":"bottom-right"),borderStyle:a||(t?"none":"common"),data:l,isExpandable:this.isExpandable,renderBar:this.renderBar,renderItems:this.renderItems,onExpand:i})):null}}]),t}(),Y.propTypes={isMobile:c.a.bool.isRequired,data:c.a.object.isRequired,onLinkClick:c.a.func,placement:c.a.string,borderStyle:c.a.oneOf(["none","common"]),arrowed:c.a.bool.isRequired,onExpand:c.a.func},Y.defaultProps={isMobile:!1},K),re=(n(2080),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var ae,oe,ie=(te=ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),re(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.disclaimerInfo;return n?s.a.createElement("div",{className:f()("DisclaimerLabel",{"DisclaimerLabel--mobile":t})},s.a.createElement("div",{className:"DisclaimerLabel-title"},n.description),s.a.createElement("div",{className:"DisclaimerLabel-description"},n.subDescription)):null}}]),t}(),ee.propTypes={isMobile:c.a.bool.isRequired,disclaimerInfo:c.a.object.isRequired},ee.defaultProps={isMobile:!1},te),se=n(2203),le=(n(2081),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var ce,ue,pe=(oe=ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),le(t,[{key:"componentDidMount",value:function(){C.default.trackCardShow(this,{id:4027})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return s.a.createElement("div",{className:"CircleLabelBar"},s.a.createElement("div",{className:"CircleLabelBar-content"},s.a.createElement(t,{className:"CircleLabelBar-icon"}),s.a.createElement("div",{className:"CircleLabelBar-main"},s.a.createElement("span",{className:"CircleLabelBar-title"},n),r&&s.a.createElement("span",{className:"CircleLabelBar-description"}," "+r))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.linkDescription,a=e.onLinkClick,o=Boolean(a);return s.a.createElement("div",{className:"CircleLabelBar",onClick:function(e){return o&&a(e)}},s.a.createElement("div",{className:"CircleLabelBar-content"},s.a.createElement(t,{className:"CircleLabelBar-icon"}),s.a.createElement("div",{className:"CircleLabelBar-main"},s.a.createElement("span",{className:"CircleLabelBar-title"},n)),o&&s.a.createElement("div",{className:"CircleLabelBar-side"},s.a.createElement("span",{className:"CircleLabelBar-link"},r&&s.a.createElement("span",{className:"CircleLabelBar-linkDescription"},r),s.a.createElement(N.a,{className:"CircleLabelBar-linkIcon"})))))}},{key:"render",value:function(){var e=this.props.isMobile;return s.a.createElement("div",null,e?this.renderMobileContent():this.renderDesktopContent())}}]),t}(),ae.propTypes={isMobile:c.a.bool.isRequired,icon:c.a.func.isRequired,title:c.a.string.isRequired,link:c.a.string,linkDescription:c.a.string,onLinkClick:c.a.func},ae.defaultProps={isMobile:!1},oe),fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var me=(ue=ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),de(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.circleInfo,r=e.onLinkClick,a=function(e){return e?{icon:se.a,title:"圈内说 · 相关专业用户撰写",hasDesktopLink:!1,hasMobileLink:!0,linkDescription:"查看 "+e.realmMemberCount+" 个回答",id:e.id}:null}(n);return a?s.a.createElement("div",{className:"CircleLabel"},s.a.createElement(pe,fe({isMobile:t},a,{onLinkClick:r}))):null}}]),t}(),ce.propTypes={isMobile:c.a.bool.isRequired,circleInfo:c.a.object.isRequired,onLinkClick:c.a.func},ce.defaultProps={isMobile:!1},ue),he=n(3),ve=function(e){return s.a.createElement(he.a,e,s.a.createElement("path",{d:"M8.306 23h-.092C3.678 23 0 19.379 0 14.912c0-3.681 2.497-6.788 5.914-7.767V3.5c0-.87.09-1.185.26-1.502.17-.318.42-.568.738-.738.318-.17.633-.26 1.502-.26H20.5c.87 0 1.185.09 1.502.26.318.17.568.42.738.738S23 2.63 23 3.5v13.676h-4.248c-.58 0-.79.06-1.001.174-.212.113-.378.28-.492.492-.113.211-.173.422-.173 1.001V23H8.306zm-.092-1.941c3.448 0 6.243-2.752 6.243-6.147 0-3.395-2.795-6.147-6.243-6.147s-6.243 2.752-6.243 6.147c0 3.395 2.795 6.147 6.243 6.147zm7.547-12.294a.647.647 0 0 0 0 1.294h3.963a.647.647 0 1 0 0-1.294zm-3.285-3.236a.647.647 0 1 0 0 1.295h7.248a.647.647 0 1 0 0-1.295zM18.4 23v-3.88a.65.65 0 0 1 .65-.65H23zm-9.2-6.47h1.982a.647.647 0 0 1 0 1.294H9.2v1.121c0 .273-.03.381-.087.487a.59.59 0 0 1-.246.246c-.105.057-.213.087-.487.087h-.332c-.273 0-.381-.03-.487-.087a.59.59 0 0 1-.246-.246c-.056-.106-.086-.214-.086-.487v-1.121H5.247a.647.647 0 1 1 0-1.295H7.23v-1.294H5.247a.647.647 0 1 1 0-1.294H6.61l-1.774-1.905c-.159-.17-.201-.255-.224-.352s-.013-.193.028-.285c.04-.092.1-.17.288-.312l.224-.169c.188-.142.282-.18.39-.201.108-.02.215-.012.317.025s.188.09.346.26l2.01 2.156 2.009-2.157c.158-.17.243-.222.345-.26s.21-.045.318-.024c.107.02.201.059.39.201l.224.17c.188.142.247.219.288.31.04.093.05.19.028.286-.023.097-.066.182-.224.352L9.818 13.94h1.364a.647.647 0 0 1 0 1.294H9.2z",fillRule:"evenodd"}))};ve.defaultProps={name:"PaidContent"};var be=ve,ye=function(e){return s.a.createElement(he.a,e,s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"id-609579976-a",x1:"29.377%",x2:"72.366%",y1:"10.503%",y2:"87.913%"},s.a.createElement("stop",{offset:"0%",stopColor:"#B39874"}),s.a.createElement("stop",{offset:"100%",stopColor:"#805820"}))),s.a.createElement("path",{fill:"url(#id-609579976-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};ye.defaultProps={name:"VIPNight"};var we=ye,ge=function(e){return s.a.createElement(he.a,e,s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"id-763684632-a",x1:"29.377%",x2:"72.366%",y1:"10.503%",y2:"87.913%"},s.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),s.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),s.a.createElement("path",{fill:"url(#id-763684632-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};ge.defaultProps={name:"VIP"};var Ee=ge,Oe=n(1914),Ce=n(1882),ke=function(e){return s.a.createElement(he.a,e,s.a.createElement("path",{d:"M4 2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm3 7.278v5.444a.792.792 0 0 0 1.209.674l4.48-2.774a.792.792 0 0 0-.012-1.354l-4.48-2.67A.792.792 0 0 0 7 9.278zM19.538 18.5c-.038 0-.038-13-.038-13 2.656 1.131 4.5 3.62 4.5 6.508 0 2.875-1.827 5.354-4.462 6.492z",fillRule:"evenodd"}))};ke.defaultProps={name:"RemixAlbum"};var je=ke,_e=function(e){return s.a.createElement(he.a,e,s.a.createElement("path",{d:"M5 2h14c1.105 0 2 .814 2 1.818v16.364C21 21.186 20.105 22 19 22H5c-1.105 0-2-.814-2-1.818V3.818C3 2.814 3.895 2 5 2zm6.5 16v-1.525A5 5 0 0 1 7 11.5a.5.5 0 1 1 1 0 4 4 0 1 0 8 0 .5.5 0 1 1 1 0 5 5 0 0 1-4.5 4.975V18h2a.5.5 0 1 1 0 1h-5a.5.5 0 1 1 0-1h2zm-2-10.336v3.672C9.5 12.805 10.62 14 12 14c1.378 0 2.5-1.193 2.5-2.664V7.664C14.5 6.195 13.38 5 12 5c-1.378 0-2.5 1.193-2.5 2.664z",fillRule:"evenodd"}))};_e.defaultProps={name:"RemixInstabook"};var Se,Pe,Te=_e,Ne=n(2176),Ae=n(118),Re=(n(2082),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ie,Me,Le="purchase_required",De="vip_free",qe="purchased",Be="ebook",ze="live",Qe="remix_album",Ue="remix_instabook",Ve="PaidContentLabel-icon",Fe=(Pe=Se=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=xe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(){var e=r.props.link;Ae.default.dispatch("base/openURL",{url:e})},xe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Re(t,[{key:"renderMainContent",value:function(){var e=this.props,t=e.theme,n=e.paidInfo.type,r=e.showVipFreeDesc,a="dark"===t;switch(n){case Le:return s.a.createElement(s.a.Fragment,null,s.a.createElement(be,{className:""+Ve}),"包含付费内容");case qe:return s.a.createElement(s.a.Fragment,null,s.a.createElement(be,{className:""+Ve}),"已购付费内容");case De:return s.a.createElement(s.a.Fragment,null,a?s.a.createElement(we,{className:""+Ve}):s.a.createElement(Ee,{className:""+Ve}),s.a.createElement("div",{className:"PaidContentLabel-vipLabel"},s.a.createElement("div",{className:"PaidContentLabel-vipLabel-left"},"会员专享"),r&&s.a.createElement("div",{className:"PaidContentLabel-vipLabel-right"},"你可以完整查看该付费内容")));case Be:return s.a.createElement(s.a.Fragment,null,s.a.createElement(Oe.a,{className:""+Ve}),"选自电子书");case ze:return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ce.a,{className:""+Ve}),"选自 Live");case Qe:return s.a.createElement(s.a.Fragment,null,s.a.createElement(je,{className:""+Ve}),"选自私家课");case Ue:return s.a.createElement(s.a.Fragment,null,s.a.createElement(Te,{className:""+Ve}),"选自讲书");default:return null}}},{key:"render",value:function(){var e=this.props.paidInfo.type===De;return s.a.createElement("div",{className:f()("PaidContentLabel",{"PaidContentLabel-vipFree":e})},s.a.createElement("div",{className:"PaidContentLabel-main"},this.renderMainContent()),s.a.createElement(Ne.a,{onClick:this.handleClick,className:"PaidContentLabel-HelpOutline"}))}}]),t}(),Se.propTypes={link:c.a.string,paidInfo:c.a.object.isRequired,onPaidContentLabelClick:c.a.func,showVipFreeDesc:c.a.bool},Se.defaultPorps={showVipFreeDesc:!1},Pe),He=n(466),We=n(117),Ge=n(162),Ye=n(66),Ke=n(467),Je=n(75),Xe=(n(2083),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var $e,Ze=(Me=Ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Xe(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.shown,r=e.data,a=e.paging,o=(a=void 0===a?{}:a).isEnd,i=void 0!==o&&o,l=a.isLoading,c=void 0!==l&&l,u=a.totals,p=e.loadAnswerRecognizerList,f=e.answerId;return s.a.createElement(Ge.b,{size:"fullPage",onClose:t},n&&s.a.createElement("div",{className:"RecognizerListModal"},s.a.createElement("div",{className:"RecognizerListModal-header"},"已有 ",u||"-"," 位用户对该回答送出了专业徽章",s.a.createElement("div",{className:"RecognizerListModal-headerDescription"},"社区内有着专业创作水平的用户有着对其他创作用户送出「专业徽章」的特权，以示对其他用户创作专业内容的鼓励")),s.a.createElement(Ye.b,{isDrained:i,isLoading:c,onLoad:function(){p(f)}},r.map(function(e){return s.a.createElement(Ke.a,{className:"UserItem",key:e.id,user:e})}))))}}]),t}(),Ie.propTypes={onClose:c.a.func.isRequired,shown:c.a.bool.isRequired,answerId:c.a.number.isRequired},Me),et=Object(u.connect)(function(e,t){var n=Object(He.a)(e,t.answerId)||{},r=n.data,a=void 0===r?[]:r,o=n.paging,i=void 0===o?{}:o;return{data:a.map(function(t){return Object(Je.c)(e,{urlToken:t})}),paging:i}},{loadAnswerRecognizerList:He.d})(Ze),tt=n(11),nt=(n(2084),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function at(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ot=Object(We.a)()($e=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=at(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={recognizerListModalShown:!1},r.isFetched=!1,r.loadLabels=function(){var e=r.props,t=e.loadLabel,n=e.item;if(n){var a=n.isLabeled,o=n.id,i=n.type;a&&!r.isFetched&&(t(i,o),r.isFetched=!0)}},r.handlePositiveLabelClick=function(e,t,n){"professional"===n&&r.toggleRecognizerModal()},r.toggleRecognizerModal=function(){r.setState({recognizerListModalShown:!r.state.recognizerListModalShown})},at(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),rt(t,[{key:"componentDidMount",value:function(){this.loadLabels()}},{key:"componentDidUpdate",value:function(){this.loadLabels()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.item,r=e.commercialLabels,a=e.neutralLabels,o=this.state.recognizerListModalShown,l=null,c=null,u=null,p=null,f={item:n,isMobile:!1};if(n&&n.isLabeled)if(t){l=(t.includedInfos&&Boolean(t.includedInfos.length)||t.onlineRoundtable||t.relevantInfo||t.recognitionInfo)&&s.a.createElement(ne,nt({},f,{data:t,onLinkClick:this.handlePositiveLabelClick})),c=t.disclaimerInfo&&s.a.createElement(ie,{disclaimerInfo:t.disclaimerInfo}),u=t.circleInfo&&s.a.createElement(me,nt({},f,{circleInfo:t.circleInfo}));var d=n.paidInfo&&n.paidInfo.type===tt.D.EBOOK;p=t.paidInfo&&s.a.createElement(Fe,{showVipFreeDesc:d,paidInfo:t.paidInfo})}else l=s.a.createElement("div",{className:"LabelContainer-placeholder"});return s.a.createElement(i.Fragment,null,s.a.createElement(v,{className:"LabelContainer",positive:l,neutral:a,commercial:r,disclaimer:c,circle:u,paidContent:p}),s.a.createElement(et,{onClose:this.toggleRecognizerModal,answerId:n.id,shown:o}))}}]),t}())||$e;ot.propTypes={data:c.a.object,item:c.a.object.isRequired,commercialLabels:c.a.node,neutralLabels:c.a.node};var it=Object(u.connect)(function(e,t){var n=t.item;return{data:Object(He.c)(e,n)}},{loadLabel:He.e})(ot),st=n(28),lt=n.n(st),ct=n(68),ut=n.n(ct),pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var ft=["answer","article","post","item"],dt=function(e){return e.itemType||ft.find(function(t){return e[t]})},mt=function(e){return ut()(Object(u.connect)(function(e,t){return{useNewLabels:Object(He.f)(e,t[dt(t)])}})(function(t){var n,r,a,o=t.showLabelInfo,i=void 0===o||o,l=t.showLabels,c=void 0===l||l,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["showLabelInfo","showLabels"]),p=dt(u),f=u,d=[];return c||d.push("isLabeled"),i||(d.push("labelInfo"),d.push("hermesLabel")),p&&d.length>0&&(f=pt({},f,(n={},r=p,a=lt()(u[p],d),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n))),s.a.createElement(e,f)}),e)},ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vt=Object(i.createContext)({showLabelInfo:!0,showLabels:!0}),bt=vt.Provider,yt=vt.Consumer,wt=function(e){return function(t){var n=s.a.createElement(yt,null,function(n){return s.a.createElement(e,ht({},t,{showLabelProps:n}))});return ut()(n,e)}};n.d(t,"b",function(){return o.a}),n.d(t,"a",function(){return it}),n.d(t,"d",function(){return mt}),n.d(t,"c",function(){return bt}),n.d(t,"e",function(){return wt})},1935:function(e,t,n){"use strict";var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(10),u=n(2),p=n.n(u),f=n(72),d=n(28),m=n.n(d),h=n(4),v=n(105),b=n(171),y=n(8),w=n(234),g=n(38),E=n(11),O=n(101),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _,S,P,T=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=j(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.load=function(){var e=r.props,t=e.dispatch,n=e.id;t(Object(O.r)(n))},r.track=function(){var e=r.props.topic;r.hoverCardElement&&e&&(y.default.setModule(r.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:e.id,item_num:e.questionsCount,follower_num:e.followersCount}}}),y.default.trackCardShow(r.hoverCardElement))},r.handleFollow=r.context.authRequired(function(){var e=!r.props.topic.isFollowing;y.default.trackEvent(r.hoverCardElement,{action:e?"Follow":"UnFollow",element:"Button"});var t=r.props,n=t.dispatch,a=t.id;n(Object(O.D)(a))},E.N.follow),r.handleOpen=function(){r.load(),r.track()},j(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),k(t,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,r=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,r=t.topic,a=t.id,o=t.isLoading,i=t.onRef,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["toggler","topic","id","isLoading","onRef"]),c=r||{},u=c.name,p=c.introduction,f=c.questionsCount,d=c.followersCount,m=c.bestAnswersCount,y=c.avatarUrl,E=c.isFollowing,O=c.headerCard,k="//www.zhihu.com/topic/"+a,j=O&&O.avatarUrl||y;return l.a.createElement(b.b,C({toggler:n,preventCloseOnTarget:!0,isLoading:o,onOpen:this.handleOpen,size:"large"},s,{onRef:function(t){i&&"function"==typeof i&&i(t),e.hoverCardElement=t}}),l.a.createElement(b.a,{title:l.a.createElement("a",{target:"_blank",href:k},u),avatarUrl:j}),p&&l.a.createElement("div",null,l.a.createElement(w.a,{className:"HoverCard-description",html:p})),l.a.createElement("div",null,this.isTopicReady()&&l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{tag:g.a,preset:"plain",a:!0,to:k+"/questions",name:"问题",value:f,target:"_blank"}),l.a.createElement(v.a.Item,{tag:g.a,preset:"plain",a:!0,to:k+"/top-answers",name:"精华",value:m,target:"_blank"}),l.a.createElement(v.a.Item,{tag:g.a,preset:"plain",a:!0,to:k+"/followers",name:"关注者",target:"_blank",value:d})),l.a.createElement("div",{className:"HoverCard-buttons"},r&&l.a.createElement(h.c,{preset:"primary",color:E?"grey":"blue",onClick:this.handleFollow},E?"已关注":"关注话题"))))}}]),t}(),r.contextTypes={authRequired:i.a.func},a),N=Object(c.connect)(function(e,t){var n=t.id,r=e.entities.topics,a=e.loading.local;return{topic:r[n],isLoading:Boolean(a["topic/"+n])}})(T),A=n(43),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var I=Object(c.connect)(function(e){return{isMobile:Object(A.d)(e,{includeTablet:!0})}})((P=S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),x(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.topic,r=n.name,a=n.avatarUrl,o=n.id,i=n.headerCard,s=e.avatar,c=e.avatarProps,u=e.noHoverCard,d=e.noLink,h=e.style,v=e.className,b=e.children,y=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children"]),w=void 0===u?t:u,g=i&&i.avatarUrl||a,E=void 0;E=s?l.a.createElement(f.a,R({className:"TopicLink-avatar",url:g,alt:r},c)):b||r,d||w||(E=l.a.createElement(N,{toggler:E,id:o}));var O=d?"span":"a";return l.a.createElement(O,R({style:h,className:p()("TopicLink",v),href:"//www.zhihu.com/topic/"+o,target:"_blank"},m()(y,["dispatch"])),E)}}]),t}(),S.propTypes={topic:i.a.object.isRequired,user:i.a.object,avatar:i.a.bool,avatarProps:i.a.object,noHoverCard:i.a.bool,noLink:i.a.bool,style:i.a.object,className:i.a.string,children:i.a.node},S.defaultProps={avatar:!1,noLink:!1},_=P))||_;t.a=I},1936:function(e,t,n){"use strict";var r,a,o=n(0),i=n.n(o),s=n(4),l=n(1881),c=n(136),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var p=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.label,a=e.onRef;return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),i.a.createElement(s.c,{onRef:a,className:t,preset:"plain",onClick:n,icon:l.a,label:r}))}}]),t}(),r.defaultProps={label:"收藏"},a);n.d(t,"a",function(){return p})},1937:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),o=(n(2024),32300);function i(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,r=t.reasonDescription;return a.a.createElement("span",{className:"AnnotationTag"},n===o?"该内容已被标记":r)}},1938:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(1939));function o(e){return"string"==typeof e&&e?Array.from(e).reduce(function(e,t){var n=t.codePointAt(0);return e+(a.default(n)?2:1)},0):0}t.getHexRandom=function(e){return Array.from({length:e}).map(function(){return Math.floor(16*Math.random()).toString(16).toUpperCase()}).join("")},t.sliceString=function(e,t){return e.length>t?e.slice(0,t)+"...":e},t.stringWidth=o,t.cutStringWidth=function(e,t){if("string"!=typeof e||"number"!=typeof t||o(e)<=t)return e;for(var n="",r=0;o(e.slice(0,r+1))<=t;)r++,n=e.slice(0,r);return n}},1939:function(e,t,n){"use strict";var r=n(1940);e.exports=function(e){return!r(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141))}},1940:function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},1941:function(e,t,n){},1942:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return l(e);if("number"==typeof e)return s(e,t);return null},e.exports.format=s,e.exports.parse=l;var r=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",s=t&&t.unitSeparator||"",l=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,c=Boolean(t&&t.fixedDecimals),u=t&&t.unit||"";u&&o[u.toLowerCase()]||(u=n>=o.pb?"PB":n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var p=(e/o[u.toLowerCase()]).toFixed(l);return c||(p=p.replace(a,"$1")),i&&(p=p.replace(r,i)),p+s+u}function l(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(o[r]*t)}},1943:function(e,t,n){},1944:function(e,t,n){},1945:function(e,t,n){var r;!function(a,o){"use strict";var i="model",s="name",l="type",c="vendor",u="version",p="mobile",f="tablet",d={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m={rgx:function(){for(var e,t,n,r,a,o,i,s=0,l=arguments;s<l.length&&!o;){var c=l[s],u=l[s+1];if(void 0===e)for(r in e={},u)u.hasOwnProperty(r)&&("object"==typeof(a=u[r])?e[a[0]]=void 0:e[a]=void 0);for(t=n=0;t<c.length&&!o;)if(o=c[t++].exec(this.getUA()))for(r=0;r<u.length;r++)i=o[++n],"object"==typeof(a=u[r])&&a.length>0?2==a.length?"function"==typeof a[1]?e[a[0]]=a[1].call(this,i):e[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?e[a[0]]=i?i.replace(a[1],a[2]):void 0:e[a[0]]=i?a[1].call(this,i,a[2]):void 0:4==a.length&&(e[a[0]]=i?a[3].call(this,i.replace(a[1],a[2])):void 0):e[a]=i||void 0;s+=2}return e},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(d.has(t[n][r],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[s,u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,m.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,c,[l,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[c,"Apple"],[l,f]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,i,[l,f]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[i,[c,"Amazon"],[l,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[i,m.str,h.device.amazon.model],[c,"Amazon"],[l,p]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,c,[l,p]],[/\((ip[honed|\s\w*]+);/i],[i,[c,"Apple"],[l,p]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,i,[l,p]],[/\(bb10;\s(\w+)/i],[i,[c,"BlackBerry"],[l,p]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[c,"Asus"],[l,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[i,"Xperia Tablet"],[l,f]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[c,"Sony"],[i,"Xperia Phone"],[l,p]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,i,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[c,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[c,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[c,m.str,h.device.sprint.vendor],[i,m.str,h.device.sprint.model],[l,p]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,i,[l,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[c,[i,/_/g," "],[l,p]],[/(nexus\s9)/i],[i,[c,"HTC"],[l,f]],[/(nexus\s6p)/i],[i,[c,"Huawei"],[l,p]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,i,[l,p]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[c,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[c,"Microsoft"],[l,p]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[c,"Motorola"],[l,p]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[c,"Motorola"],[l,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,d.trim],[i,d.trim],[l,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[c,"Samsung"],[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[i,[c,"Sharp"],[l,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],i,[l,f]],[/smart-tv.+(samsung)/i],[c,[l,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[c,"Samsung"],i,[l,p]],[/sie-(\w+)*/i],[i,[c,"Siemens"],[l,p]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[c,"Nokia"],i,[l,p]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[c,"Acer"],[l,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],i,[l,f]],[/(lg) netcast\.tv/i],[c,i,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[i,[c,"LG"],[l,p]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[c,"Lenovo"],[l,f]],[/linux;.+((jolla));/i],[c,i,[l,p]],[/((pebble))app\/[\d\.]+\s/i],[c,i,[l,"wearable"]],[/android.+;\s(glass)\s\d/i],[i,[c,"Google"],[l,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[i,/_/g," "],[c,"Xiaomi"],[l,p]],[/android.+a000(1)\s+build/i],[i,[c,"OnePlus"],[l,p]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,d.lowerize],c,i]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]+).*(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,m.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,m.str,h.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[s,"iOS"],[u,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,u]]},b=function(e,t){if(!(this instanceof b))return new b(e,t).getResult();var n=e||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),r=t?d.extend(v,t):v;return this.getBrowser=function(){var e=m.rgx.apply(this,r.browser);return e.major=d.major(e.version),e},this.getCPU=function(){return m.rgx.apply(this,r.cpu)},this.getDevice=function(){return m.rgx.apply(this,r.device)},this.getEngine=function(){return m.rgx.apply(this,r.engine)},this.getOS=function(){return m.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};b.VERSION="0.7.12",b.BROWSER={NAME:s,MAJOR:"major",VERSION:u},b.CPU={ARCHITECTURE:"architecture"},b.DEVICE={MODEL:i,VENDOR:c,TYPE:l,CONSOLE:"console",MOBILE:p,SMARTTV:"smarttv",TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},b.ENGINE={NAME:s,VERSION:u},b.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=b),t.UAParser=b):n(1932)?void 0===(r=function(){return b}.call(t,n,t,e))||(e.exports=r):a.UAParser=b;var y=a.jQuery||a.Zepto;if(void 0!==y){var w=new b;y.ua=w.getResult(),y.ua.get=function(){return w.getUA()},y.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var n in t)y.ua[n]=t[n]}}}("object"==typeof window?window:this)},1946:function(e,t,n){},1947:function(e,t,n){"use strict";e.exports=n(1948)},1948:function(e,t,n){"use strict";
/** @license React v16.4.1
 * create-subscription.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r=n(343),a=n(0);function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function a(){var n,r;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=r=o(this,e.call.apply(e,[this].concat(s))),r.state={source:r.props.source,value:null!=r.props.source?t(r.props.source):void 0},r._hasUnmounted=!1,r._unsubscribe=null,o(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e),a.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null},a.prototype.componentDidMount=function(){this.subscribe()},a.prototype.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(t),this.subscribe())},a.prototype.componentWillUnmount=function(){this.unsubscribe(this.state),this._hasUnmounted=!0},a.prototype.render=function(){return this.props.children(this.state.value)},a.prototype.subscribe=function(){var e=this,a=this.state.source;if(null!=a){var o=n(a,function(t){e._hasUnmounted||e.setState(function(e){return t===e.value||a!==e.source?null:{value:t}})});"function"!=typeof o&&function(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=0;a<t;a++)n+="&args[]="+encodeURIComponent(arguments[a+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}("266"),this._unsubscribe=o,(o=t(this.props.source))!==this.state.value&&this.setState({value:o})}},a.prototype.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},a}(a.Component)}},1949:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(483);function a(e){var t=e.badge;if(!e.isOrg)return!1;var n=Object(r.a)(t)||{};return Boolean(n.identityInfo)}},1950:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},1951:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o),s=n(4),l=n(162),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleSubmit=function(){var e=r.props,t=e.onSubmit;(0,e.onCancel)(),t()},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),c(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.shown,o=e.onCancel,c=e.className,u=e.isMobile,p=a.a.createElement(s.c,{key:"confirm",preset:"primary",color:"blue",onClick:this.handleSubmit},"确认"),f=a.a.createElement(s.c,{key:"cancel",onClick:o},"取消"),d=u?[f,p]:[p,f];return a.a.createElement(l.b,{wrapperClassName:"ConfirmModal-wrapper",className:i()("ConfirmModal",c),title:t,size:u?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0},r&&a.a.createElement(l.a,{direction:u?"horizontal":"vertical"},d))}}]),t}();t.a=p},1952:function(e,t,n){"use strict";var r=n(1876),a=n(0),o=n.n(a),i=n(3),s=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 0 1 0 1.856l-1.32 1.894a1.624 1.624 0 0 0-.266.643l-.406 2.272a1.624 1.624 0 0 1-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.266l-1.894 1.32a1.624 1.624 0 0 1-1.856 0l-1.894-1.32a1.624 1.624 0 0 0-.643-.266l-2.272-.406a1.624 1.624 0 0 1-1.313-1.313l-.406-2.272a1.624 1.624 0 0 0-.266-.643l-1.32-1.894a1.624 1.624 0 0 1 0-1.856l1.32-1.894c.134-.193.224-.412.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.042.45-.132.643-.266l1.894-1.32a1.624 1.624 0 0 1 1.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.209 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.978.209-1.352.625a2.166 2.166 0 0 0-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.416.825.625 1.351.625zm3.436-3.159a.373.373 0 0 0-.278-.121c-.107 0-.199.04-.277.121a.402.402 0 0 0-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 0 1-.81-2.027v-.82a.402.402 0 0 0-.118-.289.373.373 0 0 0-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 0 0-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 0 0-.117-.289z",fillRule:"evenodd"}))};s.defaultProps={name:"LabelRelevant"};var l=s,c=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.537.31.868.881.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 0 1-.868-1.5V8.199c0-.619.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 0 1 1.736 0zm-2.614 11.85a.29.29 0 0 1 .255.148l1.239 2.207a.289.289 0 0 0 .504 0l1.24-2.207a.29.29 0 0 1 .254-.148l2.52.023a.29.29 0 0 0 .253-.434l-1.284-2.192a.288.288 0 0 1 0-.292l1.284-2.192a.288.288 0 0 0-.253-.434l-2.52.023a.29.29 0 0 1-.255-.148l-1.239-2.207a.289.289 0 0 0-.504 0l-1.24 2.207a.29.29 0 0 1-.254.148l-2.52-.023a.29.29 0 0 0-.253.434l1.284 2.192a.288.288 0 0 1 0 .292L7.48 14.338a.288.288 0 0 0 .253.434l2.52-.023z",fillRule:"evenodd"}))};c.defaultProps={name:"LabelEditorRecommendation"};var u=c,p=n(1877),f=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 0 1 .346.543v10.31a.24.24 0 0 1-.342.216c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.604.738a.6.6 0 0 1-.824-.557V6.957a1.8 1.8 0 0 1 1.182-1.69zm9.045.339c1.335-.626 2.672-.938 4.01-.938 1.07 0 2.152.2 3.246.6a1.8 1.8 0 0 1 1.182 1.69v8.958a.6.6 0 0 1-.824.557c-1.217-.492-2.418-.737-3.604-.737-1.339 0-2.677.313-4.014.94a.24.24 0 0 1-.342-.218V6.148a.6.6 0 0 1 .346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.806.419.172.62.656.45 1.081a.813.813 0 0 1-1.065.457c-1.108-.457-2.207-.684-3.303-.684-1.08 0-2.163.22-3.254.664h.001a1.8 1.8 0 0 1-.649.121l-2.079.001c-.195 0-.39-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.684a.813.813 0 0 1-1.065-.457.834.834 0 0 1 .45-1.081c1.3-.536 2.607-.806 3.918-.806a10.009 10.009 0 0 1 3.391.604 3 3 0 0 0 1.025.18l.973.001a3 3 0 0 0 1.028-.18 10.01 10.01 0 0 1 3.393-.604z",fillRule:"evenodd"}))};f.defaultProps={name:"LabelWeekly"};var d=f,m=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.712a4.846 4.846 0 0 1 2.016 2.016c.464.87.712 1.732.712 4.109v3.926c0 2.377-.248 3.24-.712 4.109a4.846 4.846 0 0 1-2.016 2.016c-.87.464-1.732.712-4.109.712h-3.926c-2.377 0-3.24-.248-4.109-.712a4.846 4.846 0 0 1-2.016-2.016c-.464-.87-.712-1.732-.712-4.109v-3.926c0-2.377.248-3.24.712-4.109a4.846 4.846 0 0 1 2.016-2.016c.87-.464 1.732-.712 4.109-.712zM12 17.61a1.027 1.027 0 0 0 0-2.053A3.557 3.557 0 1 1 15.557 12a1.027 1.027 0 1 0 2.053 0A5.61 5.61 0 1 0 12 17.61z",fillRule:"evenodd"}))};m.defaultProps={name:"LabelDaily"};var h=m,v=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 1 0 0 8.42 4.21 4.21 0 0 0 0-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 0 0-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 0 0 .062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 0 0-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 0 0 .062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027z"}))};v.defaultProps={name:"LabelProfessional"};var b=v;n.d(t,"f",function(){return y}),n.d(t,"b",function(){return w}),n.d(t,"e",function(){return g}),n.d(t,"d",function(){return E}),n.d(t,"a",function(){return O}),n.d(t,"c",function(){return C}),n.d(t,"g",function(){return k});var y=["online_roundtable","relevant","editor_recommendation","roundtable","special","weekly","daily","professional"],w={online_roundtable:r.a,relevant:l,editor_recommendation:u,roundtable:r.a,special:p.a,weekly:d,daily:h,professional:b},g={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"知乎圆桌精选",special:"专题收录",weekly:"知乎周刊收录",daily:"知乎日报收录",professional:"专业"},E={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌精选",special:"专题收录",weekly:"周刊收录",daily:"日报收录",professional:"专业"},O={online_roundtable:"此回答被收录进圆桌精选",relevant:"此回答由问题相关方亲自撰写",professional:"已有 {} 人赠与了专业徽章"},C={online_roundtable:"前往圆桌",roundtable:"前往圆桌",special:"前往专题",weekly:"前往周刊",daily:"前往日报"},k={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌",special:"专题收录",weekly:"周刊收录",daily:"日报收录",professional:"内容专业"}},1953:function(e,t,n){"use strict";var r,a,o=n(0),i=n.n(o),s=n(1),l=n.n(s),c=n(463),u=n(136),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),p(t,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["containerClassName","selector"]);return i.a.createElement(u.b,{className:t,selector:n},i.a.createElement(c.b,r))}}]),t}(),r.propTypes={containerClassName:l.a.string,selector:l.a.string},r.defaultProps={selector:".List-item"},a);n.d(t,"a",function(){return f})},1954:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o);n(2085);function s(e){var t=e.className;return a.a.createElement("span",{className:i()("ActivityItem-StickyMark",t)},"置顶")}n.d(t,"a",function(){return s})},1955:function(e,t,n){e.exports=n(2113)()},1956:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function a(e,t){for(var n,r=0,a="",o=e.length,i=0;i<o&&((n=e[i]).charCodeAt(0)<128?r+=1:r+=2,a+=n,!(r>=t-1));i+=1);return a}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var o=null;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=void 0,s=void 0;"undefined"==typeof document?i=a(s=e.replace(/<.+?>/g,""),t):((o=o||document.createElement("div")).textContent=e,i=a(s=o.textContent.replace(/<.+?>/g,""),t));var l=!1;return i!==s&&(l=!0,i=i.slice(0,i.length-n.length),i+=n),r?{output:i,truncated:l}:i}},1957:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(2),l=n.n(s),c=n(1888),u=n(481);n(2023);function p(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var r=t.detail,o=t.member,i=t.reasonDescription,s=t.type,p=o?o.name+"：":"";return a.a.createElement("section",{className:l()("Annotation-mark",n)},a.a.createElement("header",{className:"Annotation-header"},"strong"===s&&a.a.createElement(c.a,{size:16,center:!0,text:!0,className:"Annotation-alert"}),a.a.createElement("h1",{className:"Annotation-markTitle"},i||"该内容已被标记")),(r||p)&&a.a.createElement(u.a,{className:"Annotation-markSummary",html:""+p+(r||"未填写原因")}))}p.propTypes={annotationDetail:i.a.shape({reason:i.a.number.isRequired,reasonDescription:i.a.string,type:i.a.oneOf(["strong","weak"]).isRequired,detail:i.a.string,member:i.a.shape({name:i.a.string.isRequired}),showOuter:i.a.bool}).isRequired}},1958:function(e,t,n){"use strict";var r=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],a=function(e){return r.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.childNodes)),o=!0,i=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if("BR"===u.nodeName&&u.previousSibling&&"BR"!==u.previousSibling.nodeName&&u.nextSibling&&"BR"===u.nextSibling.nodeName){for(var p=t.createElement("p"),f=u.previousSibling;f&&!a(f)&&("BR"!==f.nodeName||f.previousSibling&&"BR"!==f.previousSibling.nodeName&&!a(f.previousSibling));){var d=p.childNodes;d.length>0?p.insertBefore(f,d[0]):p.appendChild(f),f=u.previousSibling}p.childNodes.length>0&&(n.insertBefore(p,u),u.nextSibling.parentNode.removeChild(u.nextSibling),u.parentNode.removeChild(u))}}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}return n.innerHTML}},1960:function(e,t,n){"use strict";var r,a,o,i=n(0),s=n.n(i),l=n(1),c=n.n(l),u=n(10),p=n(2129),f=n(40),d=n(16),m=n(91),h=(n(1996),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y,w={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},g={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},E=Object(u.connect)(function(e){return{isOrg:Object(d.g)(e)}})((o=a=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClickOption=function(e){var t=r.props,n=t.isOrg,a=t.target,o=t.onChange,i=t.current;if(e!==i)if(a){var s=a.id;a.adminClosedComment?Object(m.b)("此内容无法更改评论权限",{theme:"red-ghost"}):n||"censor"!==e&&"censor"!==i?o(s,e):Object(m.a)("你确定要更改评论权限吗？",{content:"censor"===e?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then(function(){return o(s,e)}).catch(function(){return null})}else o(e)},r.getCommentPermission=function(){var e=r.props.target,t=e&&"answer"===e.type&&"paid"===e.answerType;return Object.keys(g).filter(function(n){if("paid"!==n||t)return"follower"!==n||e&&"article"===e.type}).reduce(function(e,t){return h({},e,(n={},r=t,a=g[t],r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n));var n,r,a},{})},b(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),v(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,r=t.current,a=n?w:this.getCommentPermission();return s.a.createElement(i.Fragment,null,Object.keys(a).map(function(t){var n=t===r;return s.a.createElement(f.b,{key:t,onClick:function(){return e.handleClickOption(t)},className:"CommentPermission-item"},n&&s.a.createElement(p.a,{text:!0,center:!0}),a[t])}))}}]),t}(),a.propTypes={current:c.a.string.isRequired,target:c.a.object,onChange:c.a.func.isRequired},r=o))||r,O=n(32),C=n(1997),k=n.n(C),j=n(161),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var S=Object(j.a)({view:{id:3038},trackCardShow:!0})(y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),_(t,[{key:"render",value:function(){return s.a.createElement("img",{src:k.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),t}())||y;S.showModal=function(e){O.b.open(function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),s.a.createElement(O.b,{title:"举报成功",onClose:t},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("div",null,n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"),s.a.createElement(S,null)))})};var P=S,T=n(4),N=n(167),A=(n(1998),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=R(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={reportModalShown:!1},r.handleSubmit=function(){var e=r.props,t=e.id,n=e.onDelete,a=e.onClose;n(t),a()},r.handleReportModalOpen=function(){return r.setState({reportModalShown:!0})},r.handleReportModalClose=function(){r.setState({reportModalShown:!1}),r.handleSubmit()},r.handleSuccess=function(){r.handleSubmit()},R(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),A(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,r=e.onClose,a=e.reportAndDeleteExperiment;return s.a.createElement(i.Fragment,null,s.a.createElement(O.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:r,footer:a&&s.a.createElement("div",{className:"CommentDeleteAndReport-extra"},"评论若构成举报条件可以",s.a.createElement(T.c,{preset:"link",onClick:this.handleReportModalOpen},"删除并举报"))},n&&s.a.createElement(O.a,{direction:"horizontal"},s.a.createElement(T.c,{onClick:r},"取消"),s.a.createElement(T.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"确定"))),s.a.createElement(N.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose}))}}]),t}();n.d(t,"c",function(){return E}),n.d(t,"a",function(){return x}),n.d(t,"b",function(){return P})},1961:function(e,t,n){"use strict";var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(2),u=n.n(c),p=n(4),f=n(2130),d=n(2131),m=n(8),h=n(46),v=n(32),b=n(136),y=n(29),w=n(89),g=(n(2006),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={step:0},r.containerRef=l.a.createRef(),r.reasonButtonRefs=[],r.toggleStep=function(){r.setState({step:0===r.state.step?1:0},function(){r.popover.position()})},r.handleKeyDown=function(e){var t=Number(e.key);t&&r.reasonButtonRefs[t-1]&&r.reasonButtonRefs[t-1].focus()},r.handleNeverShowVoteDownReason=function(){r.props.onSetVoteDownReason(!1),r.popover.close()},r.handleSelectReason=function(e){r.props.onSelectVoteDownReason(e),r.popover.close()},E(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),g(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,r=t.positionStatus,a=this.state.step,o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)).sort(function(e,t){return e.sort-t.sort});return l.a.createElement(w.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:r,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0},l.a.createElement("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1},l.a.createElement("div",{className:"VoteDownReasonMenu-header"},0===a&&"已反对，你觉得",1===a&&"不再显示该反馈功能？"),l.a.createElement("div",{className:"VoteDownReasonMenu-action"},0===a&&l.a.createElement(p.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep},"不再显示"),0===a&&l.a.createElement("div",{className:"VoteDownReasonMenu-spliter"}),l.a.createElement(p.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1},l.a.createElement(y.a,{className:"VoteDownReasonMenu-closeIcon",name:"remove",width:12,height:12,fill:"#a5b6cf"}))),0===a&&l.a.createElement("div",{className:"VoteDownReasonMenu-reasonList"},o.map(function(t,n){return l.a.createElement(p.c,{preset:"plain",className:"VoteDownReasonMenu-reason",key:t.reasonId,onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t}},t.name)})),1===a&&l.a.createElement("div",{className:"VoteDownReasonMenu-disableReason"},l.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonHint"},"你可以在「设置」页面中的「屏蔽」开启。"),l.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonButtonList"},l.a.createElement(p.c,{className:"preventCloseOnTarget",onClick:this.toggleStep},"返回"),l.a.createElement(p.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason},"不再显示")))))}}]),t}(),r.defaultProps={reasonList:[]},a),C=n(11);n(1968);n.d(t,"a",function(){return N});var k,j,_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N=(j=k=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:r.props.isRecognized}},r.voteUpButtonRef=l.a.createRef(),r.voteDownButtonRef=l.a.createRef(),r.shouldShowMenu=function(){var e=r.props,t=e.voting,n=e.voteDownReason,a=e.onLoadVoteDownReason;return!!e.isShowVoteDownMenu&&(-1===t?(r.popover.close(),!1):!!n||(r.isPendingForVoteDownReason=!0,a(),!1))},r.onVote=r.context.authRequired(function(e){r.props.onVote(e)},C.N.vote),r.voteUp=function(e){var t=r.props.voting,n=S(1===t?["UnUpvote","neutral"]:["Upvote","up"],2),a=n[0],o=n[1];r.vote(e,a,o),r.voteUpButtonRef.current.focus()},r._voteDown=function(e){var t=r.props.voting,n=S(-1===t?["UnDownvote","neutral"]:["Downvote","down"],2),a=n[0],o=n[1];r.vote(e,a,o),r.voteDownButtonRef.current.focus()},r.voteDown=function(e){r.shouldShowMenu()&&r.popover.open(),r._voteDown(e)},r.vote=function(e,t,n){var a=r.props,o=a.disableAuth,i=a.handleToggleGuide,s=a.onClick,l=a.type,c=a.zaIds,u=c.voteUp,p=c.voteDown,f=t.includes("Upvote")?u:p;"article"===l&&"down"===n&&m.default.trackEvent(r.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),m.default.trackEvent(t.includes("Upvote")?r.voteUpButtonRef.current:r.voteDownButtonRef.current,_({action:t,element:"Button"},f&&{id:f})),s?s(e):o?i():r.onVoteWithRecognize(t,n)},r.onVoteWithRecognize=function(e,t){var n=r.props.voting;!r.state.recognizeInfo.isRecognized||1!==n||"UnUpvote"!==e&&"Downvote"!==e?r.onVote(t):r.setState({recognizeInfo:_({},r.state.recognizeInfo,{showRecognizeModal:!0,action:e,voteType:t})})},r.handleConfirmCancelRecognize=function(){r.onVote(r.state.recognizeInfo.voteType),r.setState({recognizeInfo:_({},r.state.recognizeInfo,{isRecognized:!1,showRecognizeModal:!1})})},r.handleCloseCancelRecognizeModal=function(){return r.setState({recognizeInfo:_({},r.state.recognizeInfo,{showRecognizeModal:!1})})},r.handleTogglerClick=function(e){r.shouldShowMenu()||e.preventDefault(),r._voteDown(e)},r.renderVoteUpButton=function(){var e=r.props,t=e.isOwner,n=e.count,a=e.voting,o=e.disabled,i=e.hideDesc,s=1===a?"已赞同":"赞同",c=[s,Object(h.niceNumber)(n)].join(" "),d=[!i&&s,0!==n&&Object(h.niceNumber)(n)].filter(Boolean).join(" ");return l.a.createElement(p.c,{className:u()("VoteButton VoteButton--up",{"is-active":1===a}),disabled:t||o,onClick:r.voteUp,"aria-label":c,onRef:r.voteUpButtonRef},l.a.createElement(f.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),d)},r.renderVoteDownButton=function(){var e=r.props,t=e.voting,n=e.disabled,a=-1===t?"已反对":"反对";return l.a.createElement(p.c,{className:u()("VoteButton VoteButton--down",{"is-active":-1===t},{"VoteButton--mobileDown":!1}),disabled:n,onClick:r._voteDown,"aria-label":a,onRef:r.voteDownButtonRef},l.a.createElement(d.a,{center:!0,size:10}))},T(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),P(t,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,r=t.positionStatus,a=t.isShowVoteDownMenu,o=t.voteDownReason,i=this.state.recognizeInfo,s=i.showRecognizeModal,c="UnUpvote"===i.action,u=a&&!0;return l.a.createElement("span",{ref:this.voteButtonRef},l.a.createElement(b.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!u&&this.renderVoteDownButton(),!n&&u&&l.a.createElement(O,{reasonList:o,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:r,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),l.a.createElement(v.b,{title:"确定"+(c?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal},s&&l.a.createElement("div",null,l.a.createElement("div",null,c?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"),l.a.createElement(v.a,{direction:"horizontal"},l.a.createElement(p.c,{onClick:this.handleCloseCancelRecognizeModal},c?"暂不取消":"暂不选择"),l.a.createElement(p.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize},c?"取消赞同":"选择反对")))))}}]),t}(),k.contextTypes={authRequired:i.a.func},k.propTypes={voting:i.a.oneOf([-1,0,1]).isRequired,disabled:i.a.bool,type:i.a.string,hideDesc:i.a.bool,zaIds:i.a.shape({voteUp:i.a.number,voteDown:i.a.number}),isRecognized:i.a.bool},k.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}},j)},1962:function(e,t,n){},1963:function(e,t,n){},1964:function(e,t,n){"use strict";var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(463),u=n(46),p=n(66),f=n(490),d=n(467),m=(n(2039),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var v=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),h(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,a=e.voteupCount,o=e.onLoad,i=e.text,s=e.isRewardList,h=e.notice,v=e.type,b=e.currentUser,y={getContainer:function(e){return e}};return l.a.createElement("div",{className:"VoterList"},l.a.createElement(f.a,{header:Object(u.formatNumber)(a)+" 人"+(i||"赞同了")}),s&&h&&l.a.createElement("div",{className:"VoterList-description"},l.a.createElement("p",null,h)),l.a.createElement(p.b,m({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:o,placeholder:l.a.createElement(p.a,{className:"List-item",withAvatar:!0})},y),r&&r.map(function(e,t){return l.a.createElement(c.a,{key:t+"."+e.urlToken},l.a.createElement(d.a,{currentUser:b,user:e,isRewardList:s,meta:null,type:v}))})))}}]),t}(),r.propTypes={isFetching:i.a.bool.isRequired,isDrained:i.a.bool.isRequired,items:i.a.array.isRequired,voteupCount:i.a.number.isRequired,text:i.a.string.isRequired,onLoad:i.a.func.isRequired,isRewardList:i.a.bool,type:i.a.string,currentUser:i.a.object},a);t.a=v},1967:function(e,t,n){"use strict";var r,a,o=n(0),i=n.n(o),s=n(1),l=n.n(s),c=n(2),u=n.n(c),p=n(10),f=n(17),d=n(474),m=n(1899),h=n(1887),v=n(2204),b=n(2205),y=n(8),w=n(4),g=n(29),E=n(40),O=n(80),C=n(21),k=n.n(C),j=(n(1971),n(50)),_=n(162),S=32305,P=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}],T=(n(2028),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var N,A,R=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["PureComponent"]),T(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,a=e.className;return i.a.createElement("div",{className:u()("RadioButtons",a)},t.map(function(e,t){var a=e.value,o=e.text,s=e.placeholder;return i.a.createElement("label",{key:t,className:"RadioButtons-item"},i.a.createElement("span",{className:"RadioButtons-text"},o),i.a.createElement("input",{type:"radio",className:"RadioButtons-input",value:a,checked:n===a,onChange:function(){return r(a,s)}}))}))}}]),t}(),r.propTypes={options:l.a.arrayOf(l.a.shape({value:l.a.string,text:l.a.string,placeholder:l.a.string})).isRequired,value:l.a.string,onChange:l.a.func,className:l.a.string},a),x=(n(2029),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var M,L,D=function(){return n.e(7).then(n.bind(null,1873))},q=P.map(function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}}),B=(A=N=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},r.handleReasonCodeChange=function(e,t){r.setState({selectedReasonCode:Number(e),selectedReasonPlaceholder:t||""}),r.input&&r.input.resetWithValue(t||"")},r.handleAddAnnotation=function(){var e=r.props,t=e.addAnnotation,n=e.type,a=e.urlToken,o=e.showNotification,i=e.onClose;t(n,a,r.state.selectedReasonCode,r.input.toHTML()).then(function(){i(),o&&o("标记内容成功")})},r.handleReasonDescriptionChange=function(e){r.setState({isReasonDescriptionEmpty:e.isEmpty})},I(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["PureComponent"]),x(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state,s=o.selectedReasonCode,l=o.isReasonDescriptionEmpty,c=o.selectedReasonPlaceholder,u=function(e){var t=P.find(function(t){return t.code===e});return t&&t.description}(s),p=32300===s;return i.a.createElement(_.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:a},r&&i.a.createElement("div",null,i.a.createElement("div",{className:"AddAnnotationModal-body"},i.a.createElement(R,{options:q,onChange:this.handleReasonCodeChange,value:String(s)}),s&&i.a.createElement("div",null,i.a.createElement("div",{className:"AddAnnotationModal-description"},u,"（",p?"必填":"选填","）"),i.a.createElement(j.a,{getComponent:D,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:c,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange}))),i.a.createElement(_.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup"},i.a.createElement(w.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!s||p&&l},"标记"))))}}]),t}(),N.propTypes={addAnnotation:l.a.func.isRequired,onClose:l.a.func.isRequired,shown:l.a.bool.isRequired,type:l.a.oneOf([0,1,2]).isRequired,urlToken:l.a.oneOfType([l.a.number,l.a.string]),showNotification:l.a.func,className:l.a.string},A),z=n(25),Q=n(44),U=n.n(Q),V=n(88),F=(n(2030),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var W=(L=M=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=H(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={isReasonDescriptionEmpty:!0},r.handleCancelAnnotation=function(){var e=r.props,t=e.cancelAnnotation,n=e.type,a=e.urlToken,o=e.showNotification,i=e.onClose;t(n,a,S,r.input.value).then(function(){i(),o&&o("撤销标记成功")})},r.handleReasonDescriptionChange=function(e){return r.setState({isReasonDescriptionEmpty:e.isEmpty})},H(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["PureComponent"]),F(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state.isReasonDescriptionEmpty;return i.a.createElement(_.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:a},r&&i.a.createElement("div",{className:"CancelAnnotationModal"},i.a.createElement(V.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),i.a.createElement(_.a,{direction:"horizontal"},Object(z.isBrowser)()&&!U()(window.navigator.userAgent).Mobile&&i.a.createElement(w.c,{onClick:n,size:"spread"},"取消"),i.a.createElement(w.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:o},"撤销标记"))))}}]),t}(),M.propTypes={cancelAnnotation:l.a.func.isRequired,onClose:l.a.func.isRequired,shown:l.a.bool.isRequired,type:l.a.oneOf([0,1,2]).isRequired,urlToken:l.a.oneOfType([l.a.number.isRequired,l.a.string.isRequired]),showNotification:l.a.func,className:l.a.string},L),G=n(90),Y=n(2026),K=(n(2031),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function J(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}!function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=J(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(e,t){y.default.trackEvent(r.node,{id:4238,action:"OpenUrl",name:t},{link:{url:e}})},J(r,n)}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,i.a.Component),K(t,[{key:"componentDidMount",value:function(){var e=this.props.mediaCard.playInfo,t=e.link,n=e.btnText;y.default.trackCardShow(this.node,{id:4239,name:n},{link:{url:t}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.mediaCard,r=t.zaInfo,a=t.className,o=n.title,s=n.playInfo,l=s.link,c=s.btnText,p=n.duration;return i.a.createElement("a",{className:u()("MediaCard",a),href:l,target:"_blank",onClick:function(){return e.handleClick(l,c)},onRef:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},i.a.createElement("div",{className:"MediaCard-content"},i.a.createElement("div",{className:"MediaCard-content-title"},o),i.a.createElement(Y.a,{className:"MediaCard-play-icon"})),i.a.createElement("div",{className:"MediaCard-content"},i.a.createElement("div",{className:"MediaCard-content-duration"},p),i.a.createElement("div",{className:"MediaCard-play-text"},c)))}}])}();var X,$,Z=n(37),ee=n(1884),te=(n(2032),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var re="dark",ae="light",oe=($=X=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=ne(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(e,t){y.default.trackEvent(r.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},ne(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),te(t,[{key:"componentDidMount",value:function(){var e=this.props.goodsCard.body.link;y.default.trackCardShow(this.node,{id:4241,name:"课程"},{link:{url:e,anchor:"课程"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaInfo,a=t.goodsCard,o=t.className,s=n===re,l=a.header.title,c=a.body,p=c.title,f=c.cover,d=c.coverLabel,m=c.link,h=c.desc,v=c.label;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:u()("GoodsCard",o)},i.a.createElement("h1",{className:"GoodsCard-header"},l),i.a.createElement("a",{href:m,target:"_blank",className:"GoodsCard-content",onClick:function(){return e.handleClick(m,p)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},i.a.createElement("div",{className:"GoodsCard-cover"},i.a.createElement("img",{className:u()("GoodsCard-cover-img",{"GoodsCard-cover-img--dark":s}),src:Object(Z.imgUrl)(f,{size:"200x0"})}),i.a.createElement("div",{className:"GoodsCard-cover-label"},d)),i.a.createElement("div",{className:"GoodsCard-contnt"},i.a.createElement("div",null,i.a.createElement("h2",{className:"GoodsCard-contnt-title"},p),h&&i.a.createElement("p",{className:"GoodsCard-contnt-desc"},h)),i.a.createElement("p",{className:"GoodsCard-contnt-label"},v)),i.a.createElement("div",{className:"GoodsCard-contnt-ArrowRight"},i.a.createElement(ee.a,null)))))}}]),t}(),X.propTypes={theme:l.a.oneOf([re,ae])},X.defaultProps={theme:ae},$),ie=n(118),se=(n(2033),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ce=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(e,t){y.default.trackEvent(r.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},le(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),se(t,[{key:"componentDidMount",value:function(){var e=this.props.btnInfo,t=e.btnText,n=e.link;ie.default.dispatch("vip/preloadVIPHybridPopup",{url:n}),y.default.trackCardShow(this.node,{id:4241,name:t},{link:{url:n,anchor:t}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,r=t.zaInfo,a=t.className,o=n.btnText,s=n.link;return i.a.createElement("div",{className:u()("PurchaseBtn",a)},i.a.createElement("div",{className:"PurchaseBtn-mask"}),i.a.createElement("a",{className:"PurchaseBtn-HybridLink",href:s,target:"_blank",onClick:function(){return e.handleClick(s,o)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},i.a.createElement("span",{className:"PurchaseBtn-text"},o)," ",i.a.createElement(ee.a,{className:"PurchaseBtn-ArrowRight"})))}}]),t}();n(2034);var ue,pe,fe=function(e){var t=e.introCard,n=e.RichTextComponent,r=e.className,a=e.zaInfo,s=t.description,l=t.contentName,c=t.authorDesc,p=Object(o.useCallback)(function(e,t){var n=e.target,r=e.target,a=r.text,o=r.href;"A"===r.tagName&&y.default.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:a},link:{url:o}})},[]);return i.a.createElement("section",{className:u()("IntroCard",r),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("p",{className:"IntroCard-description"},s),i.a.createElement("p",{onClick:function(e){return p(e,5326)},className:"IntroCard-contentName",dangerouslySetInnerHTML:{__html:l}}),n?i.a.createElement(n,{className:"IntroCard-authorDesc",html:c,onClick:function(e){return p(e,5325)}}):i.a.createElement("p",{onClick:function(e){return p(e,5325)},className:"IntroCard-authorDesc",dangerouslySetInnerHTML:{__html:c}}))},de=(n(2035),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());pe=ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),de(t,[{key:"render",value:function(){var e=this.props,t=e.videoPrompt,n=e.showLine;return Boolean(t)&&i.a.createElement("div",{className:u()("VideoPrompt",{"VideoPrompt--line":n})},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))}}]),t}(),ue.propTypes={videoPrompt:l.a.string,showLine:l.a.bool},ue.defaultProps={videoPrompt:"",showLine:!1};var me,he,ve=n(18),be=(n(2036),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function ye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var we="dark",ge="light",Ee=(he=me=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=ye(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(e,t){y.default.trackEvent(r.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},ye(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),be(t,[{key:"componentDidMount",value:function(){var e=this.props.goodsCard.body.link;y.default.trackCardShow(this.node,{id:4241,name:"课程"},{link:{url:e,anchor:"课程"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaInfo,a=t.goodsCard,o=t.className,s=n===we,l=a.header.title,c=a.body,p=c.title,f=c.cover,d=c.coverLabel,m=c.link,h=c.desc,v=c.label,b=c.vipNote;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:u()("GoodsCardV2",o)},i.a.createElement("h1",{className:"GoodsCardV2-header"},l),i.a.createElement("a",{href:m,target:"_blank",className:"GoodsCardV2-content",onClick:function(){return e.handleClick(m,p)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},i.a.createElement("div",{className:"GoodsCardV2-cover"},i.a.createElement("img",{className:u()("GoodsCardV2-cover-img",{"GoodsCardV2-cover-img--dark":s}),src:Object(Z.imgUrl)(f,{size:"200x0"})}),i.a.createElement("div",{className:"GoodsCardV2-cover-label"},d)),i.a.createElement("div",{className:"GoodsCardV2-detail"},i.a.createElement("div",null,i.a.createElement("h2",{className:"GoodsCardV2-detail-title"},p),h&&i.a.createElement("p",{className:"GoodsCardV2-detail-desc"},h),i.a.createElement("p",{className:"GoodsCardV2-detail-label"},v)),i.a.createElement("p",{className:"GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:b}})))))}}]),t}(),me.propTypes={theme:l.a.oneOf([we,ge])},me.defaultProps={theme:ge},he),Oe=n(472),Ce=n(11),ke=n(47),je=n(56),_e=n(6),Se=n(26),Pe=n(5),Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=Te({},Object(Pe.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),Re=function(e){return e===Ce.b?"answers":e===Ce.d?"pins":e===Ce.c?"articles":null},xe=n(14),Ie=n(236),Me=n(43),Le=n(199),De=n(16),qe=n(238),Be=n(51),ze=n(1949),Qe=n(478),Ue=n(1972),Ve=n(1960),Fe=n(161),He=n(1982),We=n(479),Ge=n(32),Ye=n(38),Ke=n(1983),Je=n.n(Ke),Xe=n(1999),$e=n.n(Xe),Ze=n(2e3),et=n.n(Ze),tt=n(2037),nt=n.n(tt),rt=(n(2038),{answerAdmireCouldOpen:{image:$e.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/profit/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:$e.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:nt.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/tools/custom_promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:nt.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/tools/custom_promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:et.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/tools/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:et.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}});var at,ot,it=function(e){var t=e.notification,n=void 0===t?{}:t,r=e.className,a=e.onRead,s=e.onUseAdmire,l=e.onUseRecommend,c=Object.keys(n).find(function(e){return n[e]}),p=rt[c]||{},f=p.title,d=p.image,m=p.content,h=p.buttonText,v=p.buttonLink,b=p.detailViewName,g=p.cardShowId,E=p.buttonClickId,O=p.readAlwaysId,C=p.readNextId;return Object(o.useEffect)(function(){c&&y.default.trackCardShow(null,{id:g,name:b})},[c,g,b]),i.a.createElement(Ge.b,{className:u()("CreatorRightsNotification",r),onClose:function(){a("next"),y.default.trackEvent(null,{id:C,name:b})}},c&&i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{className:"CreatorRightsNotification-background",src:Je.a,alt:"blue background"}),i.a.createElement("img",{className:"CreatorRightsNotification-liukanshan",src:d,alt:"liukanshan image"}),i.a.createElement("div",{className:"CreatorRightsNotification-title"},f),i.a.createElement("div",{className:"CreatorRightsNotification-content"},m),i.a.createElement(Ge.a,{className:"CreatorRightsNotification-buttonGroup"},v?i.a.createElement(Ye.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:v,target:"_blank",onClick:function(){a("current"),y.default.trackEvent(null,{id:E,name:b})}},h):i.a.createElement(w.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){a("current"),y.default.trackEvent(null,{id:E,name:b}),"answerAdmireCouldUse"===c&&s(),"recommendationCouldUse"===c&&l()}},h),i.a.createElement(w.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){a("always"),y.default.trackEvent(null,{id:O,name:b})}},"不再提醒"))))},st=n(1936),lt=n(2022),ct=n(1937),ut=n(233),pt=n(1920),ft=n(1987),dt=n(1923),mt=n(1924),ht=n(167),vt=n(2019),bt=n(465),yt=n(1961),wt=n(1927),gt=n(1926),Et=n(1976),Ot=(n(2061),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Ct,kt,jt=(ot=at=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),Ot(t,[{key:"render",value:function(){var e=this.props.activateReward;return i.a.createElement("div",{className:"Reward"},i.a.createElement("button",{className:"Reward-activateBtn",onClick:e},"开启赞赏"),i.a.createElement("div",{className:"Reward-activateHint"},"赞赏开启后，读者将可以付费支持你的创作。"))}}]),t}(),at.propTypes={activateReward:l.a.func},ot),_t=(n(2062),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var St,Pt,Tt=(kt=Ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),_t(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.activateReward,r=e.totalMoney,a=e.showRewarders;return i.a.createElement("div",null,i.a.createElement("div",{className:"Reward-tagline"},t||Ce.j,i.a.createElement("a",{className:"Reward-editButton",onClick:n},i.a.createElement(g.a,{left:!0,name:"modify"}),i.a.createElement("span",null,"编辑"))),Boolean(r)&&i.a.createElement("div",{className:"Reward-money"},i.a.createElement("span",{onClick:a},"￥ ",r.toFixed(2))))}}]),t}(),Ct.propTypes={activateReward:l.a.func,tagline:l.a.string,totalMoney:l.a.number,showRewarders:l.a.func},kt),Nt=n(1964),At=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Rt,xt,It,Mt=(Pt=St=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),At(t,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,a=e.voteupCount,o=e.isRewardList,s=e.onClose,l=e.notice;return i.a.createElement(_.b,{size:"fullPage",onClose:s},t&&i.a.createElement(Nt.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:a,onLoad:n,isRewardList:o,notice:l,type:"rewardPeople"}))}}]),t}(),St.propTypes={onLoad:l.a.func,modalShown:l.a.bool},Pt),Lt=n(46),Dt=(n(2063),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Bt,zt,Qt=Object(Fe.a)({module:"UserList",moduleName:"*** 人已赞赏"})((It=xt=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=qt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={hoverName:""},r.hoverUser=function(e){r.setState({hoverName:e.target.dataset.name})},qt(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),Dt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,a=t.rewardMemberCount,o=t.onUserClick,s=this.state.hoverName,l=n.slice(0,5);return i.a.createElement("div",{className:"Reward-count"},i.a.createElement("p",{className:"Reward-User-text",onClick:r},Object(Lt.formatNumber)(a)+" 人已赞赏"),i.a.createElement("div",null,l.map(function(t,n){return i.a.createElement(f.Link,{key:n,to:"//www.zhihu.com/"+t.userType+"/"+t.urlToken,className:"Reward-User-img","data-hover-title":s,target:"_blank",onClick:o},i.a.createElement("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"}))}),a>6&&i.a.createElement("span",{className:"Reward-MoreUser",onClick:r},i.a.createElement("i",null),i.a.createElement("i",null),i.a.createElement("i",null))))}}]),t}(),xt.propTypes={users:l.a.array,handleListShown:l.a.func,rewardMemberCount:l.a.number,onUserClick:l.a.func},xt.defaultProps={users:[]},Rt=It))||Rt,Ut=(n(2064),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Vt,Ft,Ht=(zt=Bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),Ut(t,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,a=e.users,o=e.onUserClick;return t?i.a.createElement(Qt,{users:a,onUserClick:o,handleListShown:n,rewardMemberCount:t}):i.a.createElement("div",{className:"Reward-countZero"},r?"还没有人赞赏。":"还没有人赞赏，快来当第一个赞赏的人吧！")}}]),t}(),Bt.propTypes={rewardMemberCount:l.a.number,handleListShown:l.a.func,isAuthor:l.a.bool,users:l.a.array,onUserClick:l.a.func},zt),Wt=(n(2065),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Gt,Yt,Kt,Jt=(Ft=Vt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),Wt(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return i.a.createElement("div",null,i.a.createElement("div",{className:"Reward-tagline"},t||Ce.j),i.a.createElement("button",{className:"Reward-rewardBtn",onClick:n},"赞赏"))}}]),t}(),Vt.propTypes={onClick:l.a.func,tagline:l.a.string},Ft),Xt=(n(2066),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function $t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Zt=function(){return n.e(4).then(n.bind(null,3085)).then(function(e){return e.TipjarDialog})},en=Object(p.connect)(null,{updateAnswerReward:ke.F,updateArticleReward:Ie.l,createArticleTipjar:Ie.b,getRewardUserDetails:Ie.i,getPagingArticleRewardUser:Ie.f,getPagingArticleRewardUserDetails:Ie.g,getArticleRewardUser:Ie.e,updateEntitiesUsers:Ie.m,getRewardUser:Ie.h,createTipjar:Ie.c,removeTradeNumber:Ie.k,onRewardSuccess:Ie.j,showNotification:xe.g},null,{withRef:!0})((Kt=Yt=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=$t(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={TipjarRender:!1,modalShown:!1,rewardModalShown:!1},r.onSubmitReward=function(e){k.a.set("isRewardable",!0),r.updateReward(e),r.unactivateReward()},r.onPaySuccess=function(){var e=r.props,t=e.reward,n=e.currentUser,a=e.id,o=e.type,i=t[o][a].users,s=[n];Array.isArray(i)&&(i.push(n),s=i),r.props.onRewardSuccess(s,a,o),r.colseTijarDialog(),r.props.showNotification("你已赞赏成功！")},r.onLoad=function(e){"article"===r.props.type?"normal"===e?r.onLoadArticleRewardUser():r.onLoadArticleRewardUserDetails():r.onLoadRewardUser()},r.onLoadArticleRewardUser=function(){var e=r.props.id;r.props.getArticleRewardUser(e)},r.onLoadArticleRewardUserDetails=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getPagingArticleRewardUserDetails(t):r.props.getPagingArticleRewardUser(t)},r.onLoadRewardUser=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getRewardUserDetails(r.props.id):r.props.getRewardUser(t).then(function(e){var t=e.payload.data;if(t.length>0){var n={};t.forEach(function(e){n[e.urlToken]=e}),r.props.updateEntitiesUsers(n)}})},r.handleListShown=function(e){var t=r.props.onRewardUserMoreClick;t&&t(e),r.setState({modalShown:!0})},r.handleListHide=function(){r.setState({modalShown:!1})},r.updateReward=function(e){var t=r.props,n=t.type,a=t.id,o=t.rewardInfo.canOpenReward;if("article"===n){var i=!!o||void 0;r.props.updateArticleReward(a,e,i)}else r.props.updateAnswerReward(a,e)},r.activateReward=function(){r.setState({rewardModalShown:!0})},r.unactivateReward=function(){r.setState({rewardModalShown:!1})},r.showRewarders=function(){r.setState({modalShown:!0})},r.addReward=r.context.authRequired(function(e,t){var n=r.props,a=n.id;"article"===n.type?r.props.createArticleTipjar(a,e):r.props.createTipjar(a,e,t)},void 0,xe.b),r.handleRewardButtonClick=function(e){var t=r.props.onRewardButtonClick;t&&t(e),r.setState({TipjarRender:!0})},r.colseTijarDialog=function(){r.setState({TipjarRender:!1})},r.removeTradeNumber=function(){var e=r.props,t=e.id,n=e.type;r.props.removeTradeNumber(t,n)},$t(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),Xt(t,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal")}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.isAuthor,a=t.isMobile,o=t.id,s=t.reward,l=t.author,c=t.type,u=t.ua,p=t.rewardInfo,f=p.canOpenReward,d=p.isRewardable,m=p.tagline,h=p.rewardTotalMoney,v=p.rewardMemberCount,b=t.onRewardUserClick;if(r&&n&&"organization"===n.userType)return null;var y=this.state,w=y.TipjarRender,g=y.modalShown,E=y.rewardModalShown,O=i.a.createElement(Et.a,{submitRewardText:function(t){return e.onSubmitReward(t)},onClose:this.unactivateReward,tagline:m,edit:!0});if(r&&f)return i.a.createElement("div",null,i.a.createElement(jt,{activateReward:this.activateReward}),E&&O);if(d){var C=s&&s[c][o]||{},k=C.tradeNumber,_=C.users,S=C.notice,P=i.a.createElement(Mt,{modalShown:g,items:_,voteupCount:v,onLoad:this.onLoad,isRewardList:r,notice:S,onClose:this.handleListHide}),T=i.a.createElement(Ht,{rewardMemberCount:v,handleListShown:this.handleListShown,onUserClick:b,users:_,isAuthor:r});if(!r)return i.a.createElement("div",{className:"Reward"},i.a.createElement(Jt,{tagline:m,onClick:this.handleRewardButtonClick}),T,E&&O,P,i.a.createElement(j.a,{getComponent:Zt,author:l,tagline:m,isMobile:a,ua:u,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:k,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:w,type:c}));var N=(Number(h)||0)/100;return i.a.createElement("div",{className:"Reward"},i.a.createElement(Tt,{tagline:m,activateReward:this.activateReward,totalMoney:N,showRewarders:this.showRewarders}),E&&O,P,T)}return null}}]),t}(),Yt.propTypes={reward:l.a.object,isAuthor:l.a.bool,author:l.a.object,id:l.a.number,rewardInfo:l.a.object,currentUser:l.a.object,ua:l.a.object,type:l.a.string,isMobile:l.a.bool,onRewardButtonClick:l.a.func,onRewardUserClick:l.a.func,onRewardUserMoreClick:l.a.func},Yt.contextTypes={authRequired:l.a.func},Yt.defaultProps={rewardInfo:{},type:"answer"},Gt=Kt))||Gt,tn=n(1951),nn=n(3),rn=function(e){return i.a.createElement(nn.a,e,i.a.createElement("path",{d:"M16.387 10.869l-3.188-4.27A1 1 0 1 1 14.8 5.401l4.92 6.59-4.883 7.491a1 1 0 1 1-1.676-1.092l3.6-5.522H7a3 3 0 0 1-3-3V7a1 1 0 1 1 2 0v2.869a1 1 0 0 0 1 1h9.387z"}))};rn.defaultProps={name:"Jump"};var an=rn;n(2067);var on=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,a=r.url,o=r.message;return i.a.createElement("a",{className:u()("CommercialQuestionTail",t),href:a},o,i.a.createElement(an,{className:"CommercialQuestionTail-Icon",center:!0,text:!0}))},sn=n(1934),ln=n(1954);function cn(e){var t=e.markInfo,n=Ce.y[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/"+t.roundtable.urlToken;return r?i.a.createElement("a",{href:r},n):i.a.createElement("span",null,n)}var un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.contentExpanded,r=t.unescapable,a=e.labelInfo,s=e.hermesLabel;return i.a.createElement(o.Fragment,null,!n&&!r&&i.a.createElement(sn.b,{labelInfo:a||s}))},pn=n(2176),fn=n(2202),dn=n(1957),mn=n(2086),hn=n.n(mn),vn=function(e){var t=e.answer,n=e.canCollapse,r=t.isNormal,a=void 0===r||r,o=t.collapsedBy,s=t.reviewInfo,l=(s=void 0===s?{}:s).isReviewing,c=s.tips,u=t.suggestEdit,p=(u=void 0===u?{}:u).title,f=u.unnormalDetails,d=(f=void 0===f?{}:f).reason,m=f.description,h=t.collapseReason;return l?i.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},c):a?"community"===o?i.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},i.a.createElement("div",{className:"AnswerItem-statusReason"},"该回答已被折叠 ",i.a.createElement("span",null,i.a.createElement("a",{target:"_blank",href:"/question/20120168","data-tooltip":"点击了解更多",className:"AnswerItem-complaintHelp"},i.a.createElement(pn.a,{className:"AnswerItem-complaintIcon",width:16})))),h&&i.a.createElement("div",{className:"AnswerItem-statusDescription"},"折叠原因：",h)):"org"!==o||n?null:i.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},"回答被提问机构移至隐藏区（",i.a.createElement("a",{href:"/org-intro#org-question",target:"_blank"},"为什么？"),"）"):i.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},i.a.createElement("div",{className:"AnswerItem-statusReason"},m,"：",d),i.a.createElement("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，回答会重新显示恢复正常 ",i.a.createElement("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},p)))},bn=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,a=t.relevantInfo,o=(a=void 0===a?{}:a).relevantType;return Object(ke.k)(t)||Object(ke.l)(t)||"org"===r&&!n?i.a.createElement("div",{className:"AnswerItem-meta",key:"commercial"},"brand_special"===o&&i.a.createElement("div",{className:"AnswerItem-commercialBadge AnswerItem-commercialBadge-brand"},i.a.createElement(fn.a,{size:16}),i.a.createElement("b",null,"品牌特邀："),"本文由品牌邀请撰写"),"brand_best"===o&&i.a.createElement("span",{className:"AnswerItem-sticky","data-tooltip":"本回答由品牌设为精选","data-tooltip-position":"bottom"},"品牌精选")):null},yn=function(e){var t=e.answer,n=t.annotationDetail,r=t.reviewInfo,a=(r=void 0===r?{}:r).isReviewing,o=t.isNormal,s=void 0===o||o,l=t.collapsedBy;return!a&&s&&"community"!==l&&n?i.a.createElement(dn.a,{key:"neutral",annotationDetail:n}):null},wn=function(e){var t=e.answer;return Object(ke.l)(t)?i.a.createElement("div",{className:"AnswerItem-commercialBadge",key:"positive"},i.a.createElement(hn.a,{style:{marginRight:"6px",verticalAlign:"text-bottom"},size:16}),i.a.createElement("b",null,"亲自答："),"此回答由问题相关方亲自撰写"):null},gn=n(2020),En=n(15),On=n(235),Cn=n(117);function kn(e){var t=e.id,n=e.logPaidAnswerRead,r=e.children,a=Object(o.useRef)(null);return Object(o.useEffect)(function(){var e=a.current;if(t&&e){var r=e instanceof Element?e:Object(ve.findDOMNode)(e);r&&Object(On.onViewedOnce)(r,function(){return n(t)})}},[t,n]),i.a.cloneElement(r,{ref:a})}kn.propTypes={id:l.a.oneOfType([l.a.number,l.a.string]).isRequired};var jn,_n,Sn,Pn,Tn,Nn=Object(En.compose)(Object(Cn.a)(null),Object(p.connect)(null,{logPaidAnswerRead:ke.w}))(kn),An=(n(2007),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),Rn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function In(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Mn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ln=function(e){return"plain"===e||"special-plain"===e},Dn=Ln,qn={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Bn=["zhi-hu-ri-bao-51-41"],zn=(jn=Object(Fe.a)(function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=void 0===a?{}:a;return xn({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},o.index&&{index:o.index},o.cardShow&&{view:{id:o.cardShow}},{trackCardShow:r})}),_n=Object(p.connect)(function(e,t){var n=e.entities,r=n.drafts,a=void 0===r?{}:r,o=n.questions,i=n.answers,s=e.question.draftStatus,l=e.reward,c=e.switches,u=e.video.shareVideoDetail,p=t.answer,f=t.relatedTo,d=t.location,m=d.pathname,h=d.query,v=null;Object(Me.i)(e).Wechat&&(v=h.hb_wx_block);var b=m.split("/"),y=!1;!b[1]||"org"!==b[1]&&"people"!==b[1]||(y=b[2]&&-1!==Bn.indexOf(b[2]));var w=i[p.id]?xn({},i[p.id]):p;o[w.question.id]&&(w.question=xn({},p.question,o[w.question.id]));var g=Object(De.c)(e),E=["question","answer"].includes(f),O=Object(Me.c)(e)&&E;return{draft:p&&a["question_"+p.question.id],draftStatus:s[p.question.id],answer:w,ua:Object(Me.i)(e),reward:l,switches:c,isHuman:O,shouldOia:Object(Me.f)(e)&&E&&!y,shouldSpecialOia:Object(Me.g)(e)&&!y,canOia:Object(Me.d)(e),isWechat:e.env.userAgent.Wechat,concernedUpvoters:Object(ke.e)(e,{id:p.id}),currentUser:g,shareVideoDetail:u,isBrandAnswer:Object(ke.j)(p),paidContent:Object(ke.x)(e,p.id),permission:Object(je.Q)(e),isOpposeReasonOpen:Object(qe.b)(e),wxBlock:v,ecommerce:Object(Oe.c)(e,{type:"answer",urlToken:String(p.id)})}},{updateAnswerVote:ke.J,updateAnswerUnhelpful:ke.I,updateAnswerReshipmentSettings:ke.E,updateAnswerCommentPermission:ke.D,updateAnswerCollapsed:ke.C,updateAnswerStick:ke.G,deleteAnswer:ke.g,restoreAnswer:ke.y,updateAnswer:ke.B,loadAnswerForSettings:ke.r,showNotification:xe.g,addAnnotation:function(e,t,n,r){return{API:{types:Ae.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(Se.getFormData)(Object(_e.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=Re(e);return r?Ne({},r,Ne({},t,n)):null}}}},cancelAnnotation:function(e,t,n,r){return{API:{types:Ae.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(Se.getFormData)(Object(_e.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=Re(e);return r?Ne({},r,Ne({},t,Te({},n,{annotationDetail:null}))):null}}}},addRewardTagline:Ie.a,updateAnswerReward:ke.F,getVoteDownReason:ke.i,selectVoteDownReason:ke.A,loadAnswerConcernedVoters:ke.o,loadCurrentUser:De.j,loadVideoDetails:Le.d,loadMarketAnswerPaidContent:ke.t,updateOpposeReasonPreSetting:qe.f,readContentRightsNotification:Be.O,postToolsRecommend:Be.N,checkEcommerce:Oe.a}),jn(Sn=Object(f.withRouter)(Sn=_n(Sn=Object(sn.d)((Tn=Pn=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=Mn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:r.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:r.props.expanded,hasFetchedLabels:!1},r.rewardContainerRef=i.a.createRef(),r.onCloseReward=function(){var e=r.props.answer.id;k.a.set("isRewardable",!1),r.props.updateAnswerReward(e,"")},r.openModal=function(e,t){r.setState(xn({},t))},r.openDeleteModal=function(){setTimeout(function(){r.setState({deleteModalShown:!0})})},r.closeModal=function(){r.setState({commentsShown:!1});var e=r.props.onCloseComment;"function"==typeof e&&e()},r.closeDeleteModal=function(){r.setState({deleteModalShown:!1})},r.disableAuth=function(){var e=r.props.router,t=(e=void 0===e?{}:e).location;(t=void 0===t?{}:t).pathname;return!1}(),r.loadAnswerConcernedVoters=function(){var e=r.props,t=e.concernedUpvoters,n=e.answer,a=e.loadAnswerConcernedVoters;!t&&r.context.currentUser&&a(n.id)},r.handleExpand=function(e){var t=r.props.onToggleExpand;e&&r.loadAnswerConcernedVoters(),t&&t(e),r.setState({contentExpanded:e})},r.handleVote=r.context.authRequired(function(e){var t=r.props,n=t.answer.id;(0,t.updateAnswerVote)(n,e)},Ce.N.vote),r.handleUpdateUnhelpful=r.context.authRequired(function(){var e=r.props,t=e.answer,n=t.id,a=t.relationship.isNothelp,o=e.updateAnswerUnhelpful,i=!a;y.default.trackEvent(r.contentItem,{action:i?"NoHelp":"UnNoHelp",element:"Button"}),o(n,i)},Ce.N.unhelpful),r.handleReshipmentSettings=function(e){var t=r.props,n=t.answer.id,a=t.updateAnswerReshipmentSettings,o=t.loadCurrentUser,i=t.currentUser;"need_payment"===e?(void 0===i.caEnabled?o("ca_enabled"):Promise.resolve()).then(function(){r.props.currentUser.caEnabled?a(n,e):window.open("/copyright/invite")}):a(n,e)},r.handleLoadAnswerForSettings=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerForSettings)(t)},r.handleDeleteAnswer=function(){var e=r.props,t=e.answer.id;(0,e.deleteAnswer)(t)},r.handlePositionStatusChange=function(e){r.setState({positionStatus:e})},r.handleCollapseModalShow=function(){r.setState({collapseModalShown:!0})},r.handleCollapseModalHide=function(){r.setState({collapseModalShown:!1})},r.handleUpdateAnswerCollapsed=function(){var e=r.props,t=e.answer,n=t.id,a=t.collapsedBy,o=e.updateAnswerCollapsed,i=e.showNotification;return"community"===a?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):o(n)},r.handleUpdateAnswerStick=function(){var e=r.props,t=e.answer.id;return(0,e.updateAnswerStick)(t)},r.handleRestoreAnswer=function(){var e=r.props,t=e.answer,n=t.id,a=t.question;(0,e.restoreAnswer)(a.id,n)},r.handleStartEditAnswer=function(){var e=r.props,t=e.draftStatus,n=e.hasPublishingDraft;t&&t.loading?O.a.alert("草稿正在加载中……"):n?O.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):r.setState({editing:!0},function(){r.answerForm.getWrappedInstance().focus()})},r.handleCancelEditAnswer=function(){r.setState({editing:!1});var e=r.props,t=e.onCloseEditing,n=e.onCloseComment;"function"==typeof n&&n(),"function"==typeof t&&t()},r.handleSubmitAnswer=function(e){var t=r.props,n=t.answer.id,a=t.updateAnswer;return r.handleCancelEditAnswer(),a(n,e).then(function(e){return y.default.trackEvent(r.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),e})},r.handleReportOpen=function(){var e=r.props.zaInfos.report;y.default.trackEvent(r.contentItem,xn({action:"Report",element:"Button",is_intent:!0},e&&{id:e})),r.context.authRequired(function(){return r.setState({reportModalShown:!0})},Ce.N.report)()},r.handleReportHide=function(){r.setState({reportModalShown:!1})},r.handleLoadVoteDownReason=function(){var e=r.props,t=e.answer,n=t.id,a=t.question.id;(0,e.getVoteDownReason)(n,a)},r.handleSelectVoteDownReason=function(e){var t=r.props,n=t.answer.id,a=t.selectVoteDownReason,o=t.showNotification;a(n,e.reasonId).then(function(e){o(e.payload.message)})},r.handleSetShowVoteDownReason=function(e){(0,r.props.updateOpposeReasonPreSetting)(e)},r.handleFavlistsShown=function(e){var t=r.props,n=t.shouldOia,a=t.zaInfos.favlists;y.default.trackEvent(r.favButtonRef,xn({action:"Collect",element:"Button",is_intent:!0},a&&{id:a})),n?r.createOpenInAppHandler("collect_answer")(e):r.disableAuth?r.handleToggleGuide():r.context.authRequired(function(){return r.setState({favlistsShown:!0})},Ce.N.favlists)()},r.handleFavlistHide=function(){r.setState({favlistsShown:!1})},r.handleLogMoreClick=function(){var e=r.props.zaInfos.options;y.default.trackEvent(r.contentItem,xn({action:"Click",element_name:"MoreAction"},e&&{id:e}))},r.handleShowAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!0})},r.handleCloseAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!1})},r.handleShowCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!0})},r.handleCloseCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!1})},r.handleToggleGuide=function(){r.setState({guideShown:!r.state.guideShown})},r.handleClickVideoMoreButton=function(){r.setState({shouldShowVideoDetails:!1})},r.startEditing=function(){var e=r.props,t=e.answer.relationship,n=(t=void 0===t?{}:t).isAuthor,a=e.editable;r.context.currentUser&&n&&a&&r.handleStartEditAnswer()},r.addRewardTagline=function(e){var t=r.props.answer.id;Object(Ie.a)(e,t)},r.createOpenInAppHandler=function(e){var t=r.props,n=t.answer,a=n.type,o=n.id,i=t.wxBlock;return function(t){t.preventDefault(),"1"===i&&y.default.trackEvent(r,{id:5550,action:"Click"},{button:{text:"openapp"}}),Object(G.b)(Object(Qe.a)({type:a,id:o}),xn({utm_content:e},"1"===i&&{yyb_ckey:"CK1430255776739"}))}},r.renderLabels=function(){var e=r.props,t=e.useNewLabels,n=e.answer,a=e.canCollapse,o=e.relatedTo,s=r.state.contentExpanded,l=vn({answer:n,canCollapse:a}),c=yn({answer:n}),u=bn({answer:n,canCollapse:a}),p=wn({answer:n});if(t){if(l)return{labels:[l],editingLabels:[]};var f=[i.a.createElement(sn.a,{key:"labels",item:n,commercialLabels:u,neutralLabels:c})];return s||o?{labels:f,editingLabels:f}:{labels:[],editingLabels:f}}var d=[c,u,p];return{labels:[l].concat(d),editingLabels:d}},r.renderPrefix=function(){var e=r.props,t=e.answer,n=e.relatedTo,a={contentExpanded:r.state.contentExpanded,unescapable:Boolean(n)};return un(t,a)},Mn(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["PureComponent"]),Rn(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,a=t.editing,o=t.loadVideoDetails,i=t.answer,s=i.id,l=i.content,c=t.loadMarketAnswerPaidContent,u=t.ecommerce,p=t.checkEcommerce,f=this.state.shareVideoQuery;f&&o(f).then(function(){e.setState({shouldShowVideoDetails:!0})}),n&&this.loadAnswerConcernedVoters(),r&&setTimeout(function(){return e.setState({commentsShown:Boolean(r)})}),a&&this.startEditing(),this.isPaidAnswer&&c(s),u||p({content:l,type:"answer",urlToken:String(s)})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,a=n.commentPermission,o=e.answer,i=o.reshipmentSettings,s=o.commentPermission,l=e.editing;!r&&i&&!a&&s&&setTimeout(function(){return t.settingsTogglerEl.click()}),l&&!this.props.editing&&this.startEditing()}},{key:"getShareVideoId",value:function(){this.props.location;return null}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(qn).map(function(n){var r=Object(Ue.a)(n,e);return i.a.createElement(E.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(Ue.b)(n,e)},r&&i.a.createElement(g.a,{className:"Button-icon",name:r}),qn[n])})}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=t.id,r=t.type,a=t.voteupCount,s=t.markInfos,l=t.isNormal,c=void 0===l||l,u=e.actor,p=e.action,f=(e.isHuman,e.concernedUpvoters),m=e.useNewLabels,h=s&&s.length>0&&!m;if(!h&&!a)return null;var v=u&&u.urlToken,b=h&&s.filter(function(e){return Ce.y[e.markType]}).map(function(e,t){return i.a.createElement(o.Fragment,{key:t},0!==t&&"、",i.a.createElement(cn,{markInfo:e}))});return c&&i.a.createElement("div",{className:"AnswerItem-extraInfo",key:"answerExtraInfo"},h&&b.length&&i.a.createElement(d.CJKSpace,null,"收录于",b),h&&Boolean(a)&&" · ",i.a.createElement(ft.a,{id:n,type:r,voteupCount:a,upvotedFollowees:(f||[]).filter(function(e){return v!==e.urlToken}),too:"voted"===p}))}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.answer,a=r.collapsedBy,o=r.relationship,s=(o=void 0===o?{}:o).isAuthor,l=r.reshipmentSettings,c=r.commentPermission,u=r.question.questionType,p=r.rewardInfo,f=(p=void 0===p?{}:p).isRewardable,d=void 0!==f&&f,h=r.relevantInfo,v=n.answer,b=n.canCollapse;return t&&s?l&&c?i.a.createElement(E.c,{key:"settings",toggler:i.a.createElement(w.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:m.a,label:"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(l),i.a.createElement(E.a,null),i.a.createElement(Ve.c,{target:v,onChange:this.props.updateAnswerCommentPermission,current:v.commentPermission}),i.a.createElement(E.a,null),d&&i.a.createElement(E.b,{onClick:this.onCloseReward},"关闭赞赏"),i.a.createElement(E.b,{onClick:this.openDeleteModal},"删除"),"commercial"===u&&b&&"nobody"===a&&(!h||"brand_special"!==h.relevantType)&&[i.a.createElement(E.a,{key:"MenuDivider"}),i.a.createElement(E.b,{key:"MenuItem",onClick:this.handleUpdateAnswerCollapsed},"隐藏")]):i.a.createElement(w.c,{key:"settings",preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:m.a,label:"设置"}):null}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?i.a.createElement(E.b,{onClick:function(){y.default.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer="+e,target:"_blank"},"申请授权"):"disallowed"===t?i.a.createElement(E.b,{tag:"a",target:"_blank",href:"/terms#sec-licence-6"},"禁止转载"):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser)return null;var t=this.props,n=t.answer,r=t.canCollapse,a=t.renderExtraOptions,o=t.permission.canBrandAdminEdit,s=n.id,l=n.reshipmentSettings,c=n.relationship,u=(c=void 0===c?{}:c).isAuthor,p=c.isNothelp,f=n.collapsedBy,d=n.question.questionType,m=n.annotationAction,v=void 0===m?[]:m,b=n.annotationDetail,y={toggler:i.a.createElement(w.c,{preset:"plain",className:"OptionsButton",icon:h.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},g="commercial"===d,O="nobody"!==f;return u?null:i.a.createElement(E.c,xn({},y,{key:"options"}),!1,r&&!g&&i.a.createElement(E.b,{onClick:O?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow},O?"取消隐藏":"隐藏"),o&&g&&!O&&i.a.createElement(E.b,{onClick:this.handleUpdateAnswerCollapsed},"隐藏"),v&&v.some(function(e){return Ce.a.add===e})&&!b&&i.a.createElement(E.b,{onClick:this.handleShowAddAnnotationModal},"标记内容"),v&&v.some(function(e){return Ce.a.cancel===e})&&b&&i.a.createElement(E.b,{onClick:this.handleShowCancelAnnotationModal},"撤销标记"),i.a.createElement(E.b,{onClick:this.handleUpdateUnhelpful},p?"撤销没有帮助":"没有帮助"),i.a.createElement(E.b,{onClick:this.handleReportOpen},"举报"),this.renderReshipment(s,l),a&&a({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,a=e.id,o=e.createdTime,i=e.updatedTime,s=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/"+r+"/answer/"+a,dateCreated:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:s}}(this.props.answer);return Object.keys(e).map(function(t){return i.a.createElement("meta",{key:t,itemProp:t,content:e[t]})})}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,r=(n=void 0===n?{}:n).winnersAnswerTokens,a=n.prizes;if(!n.status)return null;var o=["一","二","三"],s=null;return a&&r&&r.forEach(function(e,n){e.includes(t)&&null===s&&(s=a&&a[1]&&a[1].name?"得"+o[n]+"等奖":"奖")}),s&&i.a.createElement("div",{className:"AnswerItem-brandQuestionPrizeTip"},"该回答在有奖问答中获",s)}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,a=t.isBrandAnswer,o=n.question;return(r||e)&&(o&&"commercial"===o.questionType||a)?i.a.createElement(lt.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e=this.props,t=e.shouldOia,n=e.answer,r=n.id,a=n.createdTime,o=n.updatedTime,s="/question/"+n.question.id+"/answer/"+r,l=i.a.createElement(gt.a,xn({created:a,updated:o,href:s},t&&{onClick:this.createOpenInAppHandler("click_answer")}));return this.isPaidAnswer?i.a.createElement(Nn,{id:r},l):l}},{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.reward,a=t.answer,o=a.id,s=a.isNormal,l=void 0===s||s,c=a.isDelete,p=a.question,d=a.rewardInfo,m=a.question,h=m.title,y=m.id,E=m.questionType,C=m.isMuted,k=m.voteDownReason,j=m.commercial,_=a.author,S=a.excerpt,P=a.content,T=a.editableContent,N=a.voteupCount,A=a.commentCount,R=a.adminClosedComment,x=a.relationship,I=(x=void 0===x?{}:x).voting,M=x.isAuthor,L=x.isRecognized,D=a.collapsedBy,q=a.isSticky,z=a.thumbnail,Q=a.thumbnailExtraInfo,U=a.reviewInfo,V=(U=void 0===U?{}:U).isReviewing,F=U.editType,H=a.relevantInfo,G=(H=void 0===H?{}:H).relevantType,Y=a.annotationDetail,K=a.paidInfo,J=void 0===K?{}:K,X=a.creatorRightsNotification,$=t.relatedTo,Z=t.editable,ee=t.byComment,te=t.draft,ne=t.expanded,re=t.lastreadTouchable,ae=t.preset,ie=t.canCollapse,se=t.canStick,le=t.itemProp,ue=void 0===le?"answer":le,pe=t.addAnnotation,de=t.cancelAnnotation,me=t.showNotification,he=t.dataZaIndex,ve=t.blockReading,be=(t.isWechat,t.lessExcerpt),ye=(t.isHuman,t.ua),we=t.shouldSpecialOia,ge=t.shareVideoDetail,Oe=t.shouldOia,ke=t.formatContent,je=t.zaInfos,_e=je.expand,Se=je.title,Pe=je.voteUp,Te=je.thank,Ne=je.voteDown,Ae=je.toggleComment,Re=je.share,xe=je.getCommentAction,Ie=t.handleToggleSticky,Me=t.renderActionButtons,Le=t.paidContent,De=void 0===Le?{}:Le,qe=t.permission.canBrandAdminEdit,Be=t.isOpposeReasonOpen,Qe=t.readContentRightsNotification,Ue=t.wxBlock,Ve=t.ecommerce,Fe="function"==typeof Ie,He=this.context.currentUser,Ge="/question/"+y+"/answer/"+o,Ye=this.state,Ke=Ye.reportModalShown,Je=Ye.deleteModalShown,Xe=Ye.collapseModalShown,$e=Ye.favlistsShown,Ze=Ye.editing,et=Ye.commentsShown,tt=Ye.commentsAutoFocus,nt=Ye.commentPattern,rt=Ye.addAnnotationModalShown,at=Ye.cancelAnnotationModalShown,ot=Ye.positionStatus,lt=Ye.shareVideoQuery,ft=Ye.shouldShowVideoDetails,Et=Ye.contentExpanded,Ot=lt&&ft?{title:ge.title,thumbnail:ge.coverUrl,isLens:!0,id:lt,isPlayable:!0,url:"https://www.zhihu.com/video/"+lt}:null;if(c)return i.a.createElement("div",{className:"AnswerItem-deleted"},"你已经删除了该问题的回答，如果需要修改，请先  ",i.a.createElement("a",{onClick:this.handleRestoreAnswer},"撤销删除"));var Ct=!(V&&"create"===F),kt="commercial"===E,jt="nobody"!==D,_t=!function(e){return"special-plain"===e}(ae)&&i.a.createElement(bt.a,{className:u()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":$}),key:"authorInfo",preset:Dn(ae)?"plain":"default",author:_,relatedTo:$}),St=this.renderAnswerExtraInfo(),Pt=this.renderLabels(),Tt=Pt.labels,Nt=Pt.editingLabels,At=De.isNew,Rt=De.introCard,xt=De.goodsCard,It=De.btnInfo,Mt=De.zaInfo;if(Ze)return i.a.createElement("div",null,_t,Nt,St,i.a.createElement(vt.a,{className:"AnswerItem-form",bordered:!0,isReediting:!0,ref:function(t){e.answerForm=t},question:p,answer:n,defaultValue:T,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:d.isRewardable,addRewardTagline:this.addRewardTagline}));var Lt=Ln(ae)?[[_t].concat(In(Tt)),St]:[[_t].concat(In(Tt),[St]),null],Dt=An(Lt,2),qt=Dt[0],Bt=Dt[1],zt=we&&!("mainEntityOfPage"===ue||"acceptedAnswer"===ue)||"1"===Ue,Qt=!Ot&&this.renderEditTime(),Ut=J.content,Vt=J.hasPurchased,Ft=this.isPaidAnswer,Ht=Ft&&Boolean(xt),Wt=Ft&&!Vt&&Boolean(It),Gt=Ft&&Boolean(Rt),Yt=Ft?Ut:P;return i.a.createElement(ut.e,{onRef:function(t){return e.contentItem=t},className:"AnswerItem","data-za-index":he,"data-zop":JSON.stringify({authorName:_.name,itemId:o,title:h,type:"answer"}),data:n,link:Ge,meta:qt,title:!$&&i.a.createElement("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0},i.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com/question/"+y}),i.a.createElement("meta",{itemProp:"name",content:h}),Fe&&this.props.isSticky&&i.a.createElement(ln.a,null),i.a.createElement(f.Link,xn({to:Ge,target:"_blank","data-za-detail-view-element_name":"Title"},Se&&{"data-za-detail-view-id":Se}),h)),lastreadTouchable:re,name:o,itemProp:ue,itemType:"http://schema.org/Answer",itemScope:!0},Gt&&i.a.createElement(fe,{className:"AnswerItem-IntroCard",introCard:Rt,RichTextComponent:wt.a,zaInfo:Mt}),this.renderMeta(),kt&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),l||M?i.a.createElement(gt.b,xn({onToggleExpend:this.handleExpand},zt&&{expandText:"App 内查看"},"1"===Ue&&{expandText:"打开 App 查看更多"},{wxBlock:Ue},!1,{cover:z,hasVideo:Boolean(Q&&"video"===Q.type),videoData:Ot,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean($),expanded:ne,onPositionStatusChange:this.handlePositionStatusChange,before:Bt,excerpt:ke?ke(S,n):S,html:ke?ke(Yt||S,n):Yt||S,prefix:this.renderPrefix(),ecommerce:Ve,after:i.a.createElement("div",null,Wt&&i.a.createElement(ce,{btnInfo:It,zaInfo:Mt}),Ht&&(At?i.a.createElement(Ee,{className:"AnswerItem-GoodsCard",goodsCard:xt,zaInfo:Mt}):i.a.createElement(oe,{className:"AnswerItem-GoodsCard",goodsCard:xt,zaInfo:Mt})),i.a.createElement(on,{className:"AnswerItem-CommercialQuestionTail",commercial:j}),Qt,He&&M&&Z&&i.a.createElement("a",{className:"AnswerItem-editButton",onClick:this.handleStartEditAnswer},i.a.createElement(g.a,{left:!0,name:"modify"}),i.a.createElement("span",{className:"AnswerItem-editButtonText"},"修改",te&&te.editableContent&&"（有未发布的编辑草稿）")),He&&i.a.createElement(en,{ref:this.rewardContainerRef,reward:r,currentUser:He,rewardInfo:d,isAuthor:M,id:o,author:_,ua:ye})),data:n,onClick:zt?this.createOpenInAppHandler("expand_answer"+Ue):this.disableAuth&&ve&&this.handleToggleGuide},be?{limit:74}:{},{zaIds:{expand:_e}}),Ct&&qe&&kt&&jt&&i.a.createElement(w.c,{className:u()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===D}),onClick:this.handleUpdateAnswerCollapsed},"公开回答"),Ct&&se&&!jt&&"brand_special"!==G&&i.a.createElement(w.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick},q?"取消精选":"设为精选"),Me({componentList:[{name:"vote",component:Ct&&i.a.createElement(yt.a,xn({key:"vote",disabled:kt&&C,count:N},Oe&&{onClick:this.createOpenInAppHandler("vote_answer")},{onVote:this.handleVote,disableAuth:this.disableAuth,voting:I,isOwner:M,isRecognized:L,handleToggleGuide:this.handleToggleGuide,isShowVoteDownMenu:He&&Be,positionStatus:ot,voteDownReason:k,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason,zaIds:{voteUp:Pe,voteDown:Ne}}))},{name:"comment",component:Ct&&i.a.createElement(dt.a,xn({onInstance:function(t){return e.commentButton=t},key:"comment",onClick:this.openModal},!1,{commentsShown:et,commentClosed:R,count:A,positionStatus:ot,zaInfos:{toggleComment:Ae,getCommentAction:xe}}))},{name:"share",component:Ct&&i.a.createElement(pt.a,{key:"share",id:o,type:"answer",title:h,authorName:_&&_.name,href:Ge,positionStatus:ot,zaShareId:Re})},{name:"favlist",component:Ct&&(!He||!He.isOrg)&&i.a.createElement(st.a,{key:"favlist",onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"})},{name:"thank",component:Ct&&!M&&i.a.createElement(gn.a,{key:"thank",zaInfo:Te,answer:n})},{name:"sticky",component:Fe&&M&&Object(ze.a)(He)&&i.a.createElement(w.c,{key:"sticky",preset:"plain",onClick:Ie,icon:this.props.isSticky?v.a:b.a,label:this.props.isSticky?"取消置顶":"置顶"})},{name:"options",component:Ct&&this.renderOptions()},{name:"settings",component:this.renderSettings()},{name:"annotation",component:!Et&&i.a.createElement(ct.a,{key:"annotation",annotationDetail:Y})}]})):Qt,i.a.createElement(mt.a,{shown:et,parent:n,byComment:ee,commentPattern:nt,autoFocus:tt,onClose:this.closeModal}),i.a.createElement(ht.a,{type:"answer",urlToken:o,shown:Ke,onClose:this.handleReportHide,zaEnabled:!0}),i.a.createElement(B,{addAnnotation:pe,onClose:this.handleCloseAddAnnotationModal,shown:rt,type:Ce.b,urlToken:o,showNotification:me}),i.a.createElement(W,{cancelAnnotation:de,onClose:this.handleCloseCancelAnnotationModal,shown:at,type:Ce.b,urlToken:o,showNotification:me}),He&&M&&i.a.createElement(tn.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:Je,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),ie&&i.a.createElement(tn.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:Xe,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),i.a.createElement(We.a,{id:o,type:"answer",shown:$e,onClose:this.handleFavlistHide,zaEnabled:!0}),!1,i.a.createElement(it,{notification:X,onRead:function(e){Qe("answer",o,e)},onUseAdmire:function(){e.rewardContainerRef.current.getWrappedInstance().activateReward()},onUseRecommend:function(){var t=e.props.postToolsRecommend;O.a.confirm(i.a.createElement("div",{style:{textAlign:"center"}},"该推荐将使用本月的 1 次推荐次数。"),{title:"确定是否推荐？"}).then(function(){return t("answer",o)},function(){})}}))}},{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}}]),t}(),Pn.contextTypes=xn({currentUser:l.a.object,authRequired:l.a.func},!1),Pn.propTypes={relatedTo:l.a.oneOf(["question","answer"]),editable:l.a.bool,preset:l.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:l.a.bool,shareVideoDetail:l.a.object,formatContent:l.a.func,renderExtraOptions:l.a.func,zaInfos:He.a,onToggleExpand:l.a.func,useNewLabels:l.a.bool.isRequired,renderActionButtons:l.a.func},Pn.defaultProps={editable:!1,preset:"primary",zaInfos:{},renderActionButtons:gn.b},Sn=Tn))||Sn)||Sn)||Sn)||Sn);n.d(t,"a",function(){return zn})},1968:function(e,t,n){},1969:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o),s=n(2202),l=n(1952),c=n(117),u=(n(2068),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});var p={alpha:1,group:"GYL02A"},f={alpha:.08,group:"GYL02A"},d={brand_special:s.a},m=u({},l.b,{COMMERCIAL_ICONS:d});t.a=Object(c.a)(null)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,r=void 0===n?{}:n,o=e.className;if(!t)return null;var s,l,c,u=t.type,d=t.text,h=t.foregroundColor,v=t.backgroundColor,b=r.customIcon,y=r.customIconClassName,w=function(e){return"GBL07A"===(e||p).group?"commercial":"positive"}(h),g=function(e){return"GBL07A"===(e||f).group?"commercial":"positive"}(v),E=b||m[function(e){return"recognition"===e?"professional":e}(u)];return E?a.a.createElement("span",{className:i()("Label-icon","Label-iconColor--"+w,(s={},l="Label-iconColor--"+g+"Background",c=v,l in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s),o)},a.a.createElement(E,{center:!0,className:i()("Label-iconImg",y)}),d):null})},1971:function(e,t,n){"use strict";var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(44),u=n.n(c),p=n(18),f=n(8),d=n(496),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleViewed=function(){var e=r.props.extra;setTimeout(function(){f.default.trackCardShow(r,{},e)})},r.trackEvent=function(e,t,n){f.default.trackEvent(e,t,h({},r.props.extra,n))},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),m(t,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,r=e.isAd,a=e.moduleName,o=e.content,i=e.list,s=e.card,l=e.attachedInfoBytes;if(t){var c=Object(p.findDOMNode)(this);c&&f.default.setModule(c,{module:t,index:n,is_ad:r,module_name:a},function(e,t,n,r){return e?{card:{content:e}}:h({},t&&{card:t},n&&{list:n},r&&{attached_info_bytes:r})}(o,s,i,l))}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.trackCardShow,r=e.children,a="string"==typeof r.type?r:Object(s.cloneElement)(r,{trackEvent:this.trackEvent});return n?l.a.createElement(d.a,{id:t,onViewed:this.handleViewed},a):a}}]),t}(),r.propTypes={id:i.a.string,module:i.a.string,index:i.a.string,isAd:i.a.bool,content:i.a.object,extra:i.a.object,trackCardShow:i.a.bool,attachedInfoBytes:i.a.string},r.defaultProps={id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1},a);!function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}}();var y=n(162),w=n(90);n(1995);n.d(t,"a",function(){return S});var g,E,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var j={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},_={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},S=(E=g=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.jumpToOAuthUrl=function(e){var t=r.props.redirectUrl,n=void 0===t?location.href:t,a=Object(w.c)(n),o=a.utm_source,i=a.utm_medium,s=u()(navigator.userAgent).isZhihu;location.href="zhihu"!==e?"https://www.zhihu.com/oauth/redirect/login/"+_[e]+"?next=/oauth/account_callback&from="+encodeURIComponent(n)+"&utm_source="+o+"&ref_source="+i:s?"zhihu://signin?next="+n:"https://www.zhihu.com/signin?next="+n+(o?"?utm_source="+o:"")},r.renderSignButtons=function(){var e=r.props.buttons;return"string"==typeof e?r.renderSingleSignButton({name:e}):e.map(function(e){return"string"==typeof e?r.renderSingleSignButton({name:e}):"object"===(void 0===e?"undefined":O(e))?r.renderSingleSignButton(e):null})},r.renderSingleSignButton=function(e){var t=e.name,n=e.text,a=e.fill,o=e.color,i="#fff"===a||"#ffffff"===a;return-1===Object.keys(j).indexOf(t)?null:l.a.createElement("button",{className:"SignInModal-button-"+t,key:t,style:{backgroundColor:a,borderColor:i?"#0f88eb":a,color:i?"#0f88eb":o},onClick:function(){r.jumpToOAuthUrl(t)}},n||j[t])},k(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),C(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.urlScheme,r=this.props.title||(n?"打开 App 或":"")+"登录后继续操作";return l.a.createElement(y.b,{size:"small",className:"SignInModal",title:r,onClose:t},l.a.createElement(b,{module:"SignForm",moduleName:r,trackCardShow:!0},l.a.createElement("div",{className:"SignInModal-content"},n&&l.a.createElement(w.a,{className:"SignInModal-openInAppButton",href:n},"立即打开 App"),this.renderSignButtons())))}}]),t}(),g.propTypes={onClose:i.a.func.isRequired,urlScheme:i.a.string,redirectUrl:i.a.string,buttons:i.a.oneOfType([i.a.array,i.a.string])},g.defaultProps={buttons:["zhihu"]},E)},1972:function(e,t,n){"use strict";function r(e,t){return e===t?"check":null}function a(e,t){return e===t?"is-selected":null}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},1973:function(e,t,n){var r=n(2001)();e.exports=r},1974:function(e,t,n){var r=n(2047),a=n(1950),o=n(2048);e.exports=function(e){return a(e)?o(e):r(e)}},1975:function(e,t,n){},1976:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r,a,o=n(0),i=n.n(o),s=n(1),l=n.n(s),c=n(2),u=n.n(c),p=n(162),f=n(88),d=n(4),m=n(11),h=(n(2056),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var v=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChangeInputType=function(e){n.setState({checked:e.target.checked})},n.onChangeInputValue=function(e){n.setState({text:e.target.value})},n.submit=function(){var e=n.state.text;n.props.submitRewardText(e)};var r,a=e.tagline;return n.state={text:(r=a,r.replace(/^「/,"").replace(/」$/,"")||"予人玫瑰，手有余香"),checked:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),h(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,r=this.state,a=r.text,o=r.checked;return i.a.createElement(p.b,{onClose:t,className:"RewardForm-rewardModal"},i.a.createElement("p",{className:"RewardForm-rewardTitle"},n?"编辑赞赏描述":"开启赞赏"),i.a.createElement(f.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:a,onChange:this.onChangeInputValue}),i.a.createElement("div",{className:"RewardForm-remark"},!n&&i.a.createElement("div",{className:"RewardForm-Protocol"},i.a.createElement("input",{className:"RewardForm-rewardCheckbox",type:"checkbox",onChange:this.onChangeInputType,checked:o}),i.a.createElement("p",null,"我已同意",i.a.createElement("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar"},"《知乎赞赏功能使用协议》"))),i.a.createElement("p",{className:"RewardForm-prompting"},"还可以输入"+(20-a.length)+"个字")),i.a.createElement(d.c,{className:u()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!o}),onClick:this.submit,disabled:!o},"确定"))}}]),t}(),r.propTypes={onClose:l.a.func,submitRewardText:l.a.func,edit:l.a.bool,tagline:l.a.string},r.defaultProps={tagline:m.j},a)},1977:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o),s=n(4),l=n(29),c=(n(2158),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});var u=function(e){var t=e.onClick,n=e.text,r=e.className,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["onClick","text","className"]);return a.a.createElement(s.c,c({preset:"link",onClick:t,className:i()("ModifyButton",r)},o),a.a.createElement(l.a,{name:"modify",width:12,className:"ModifyButton-icon"}),n)};u.defaultProps={text:"修改"},t.a=u},1982:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),a=n.n(r),o=a.a.shape({cardShow:a.a.number,expand:a.a.number,title:a.a.number,voteUp:a.a.number,voteDown:a.a.number,share:a.a.number,favlists:a.a.number,thank:a.a.number,options:a.a.number,report:a.a.number,toggleComment:a.a.number,getCommentAction:a.a.func})},1983:function(e,t,n){e.exports=n.p+"assets/background_blue.94450cd0.svg"},1986:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o),s=n(1),l=n.n(s),c=n(818),u=n.n(c),p=n(48),f=n(3),d=function(e){return a.a.createElement(f.a,e,a.a.createElement("path",{d:"M17.782 16.78a.737.737 0 0 1-1.052 0l-4.512-4.249a.758.758 0 0 1 0-1.063L16.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L14 12l3.782 3.716c.29.294.29.77 0 1.063zm-5 0a.737.737 0 0 1-1.052 0L7.218 12.53a.758.758 0 0 1 0-1.063L11.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L9 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};d.defaultProps={name:"DoubleArrowLeft"};var m=d,h=n(1910),v=n(1884),b=function(e){return a.a.createElement(f.a,e,a.a.createElement("path",{d:"M6.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L7.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L10 12l-3.782 3.716a.758.758 0 0 0 0 1.063zm5 0a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L12.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L15 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))};b.defaultProps={name:"DoubleArrowRight"};var y,w,g=b,E=(n(2004),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=["日","一","二","三","四","五","六"],j=(w=y=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={calendarDate:r.props.defaultCalendarDate||(Array.isArray(r.props.value)?r.props.value[0]:r.props.value),hoveringDate:null,now:new Date},r.handlePrevYearClick=function(){var e=Object(p.addYears)(r.state.calendarDate,-1);r.setState({calendarDate:e}),r.props.onCalendarDateChange(e)},r.handlePrevMonthClick=function(){var e=Object(p.addMonths)(r.state.calendarDate,-1);r.setState({calendarDate:e}),r.props.onCalendarDateChange(e)},r.handleNextMonthClick=function(){var e=Object(p.addMonths)(r.state.calendarDate,1);r.setState({calendarDate:e}),r.props.onCalendarDateChange(e)},r.handleNextYearClick=function(){var e=Object(p.addYears)(r.state.calendarDate,1);r.setState({calendarDate:e}),r.props.onCalendarDateChange(e)},r.handleDayClick=function(e){r.setState({calendarDate:e}),r.props.onCalendarDateChange(e),r.props.onChange(e)},r.handleDayHover=function(e){r.setState({hoveringDate:e}),r.props.onHover(e)},C(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),E(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.weekStartsOn,o=t.value,s=t.disabledDate,l=t.showToday,c=t.showPrevMonth,f=t.showPrevYear,d=t.showNextMonth,b=t.showNextYear,y=this.state,w=y.calendarDate,E=y.hoveringDate,C=y.now,j=Object(p.startOfWeek)(Object(p.startOfMonth)(w),{weekStartsOn:r}),_=Object(p.lastDayOfWeek)(Object(p.endOfMonth)(w),{weekStartsOn:r}),S=[].concat(O(Array(Object(p.differenceInDays)(_,j)+1))).map(function(e,t){return Object(p.addDays)(j,t)}).reduce(function(e,t){var n=Object(p.differenceInCalendarWeeks)(t,j,{weekStartsOn:r});return e[n]=e[n]?[].concat(O(e[n]),[t]):[t],e},[]),P=S[0].map(p.getDay),T=Array.isArray(o),N=l;return a.a.createElement("div",{className:i()("Calendar",n,{"Calendar--hasBottomTool":N})},a.a.createElement("div",{className:"Calendar-topTool"},f&&a.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick},a.a.createElement(m,{size:20,center:!0})),c&&a.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick},a.a.createElement(h.a,{size:20,center:!0})),a.a.createElement("div",{className:"Calendar-topToolDate"},u()(w,"YYYY 年 M 月")),d&&a.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick},a.a.createElement(v.a,{size:20,center:!0})),b&&a.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick},a.a.createElement(g,{size:20,center:!0}))),a.a.createElement("table",{className:"Calendar-table",cellSpacing:0},a.a.createElement("thead",{className:"Calendar-thead"},a.a.createElement("tr",null,P.map(function(e){return a.a.createElement("th",{key:e,className:"Calendar-weekName"},k[e])}))),a.a.createElement("tbody",null,S.map(function(t,n){return a.a.createElement("tr",{key:n},t.map(function(t,n){var r=s(t),l=T?Object(p.isSameDay)(t,o[0])||Object(p.isSameDay)(t,o[1]):Object(p.isSameDay)(t,o),c=!1;if(T){var u=p.min.apply(void 0,O(o)),f=p.max.apply(void 0,O(o));c=Object(p.differenceInCalendarDays)(t,u)>0&&Object(p.differenceInCalendarDays)(f,t)>0}return a.a.createElement("td",{key:n,className:i()("Calendar-day",{"is-hovered":Object(p.isSameDay)(t,E),"is-today":Object(p.isSameDay)(t,C),"is-disabled":r,"is-not-this-month":!Object(p.isSameMonth)(t,w),"is-input-date":l,"is-in-range":c}),onClick:function(){r||e.handleDayClick(t)},onMouseEnter:function(){r||e.handleDayHover(t)},onMouseLeave:function(){r||e.handleDayHover(null)}},Object(p.getDate)(t))}))}))),N&&a.a.createElement("div",{className:"Calendar-bottomTool"},l&&a.a.createElement("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(C)},disabled:s(C)},"今天")))}}]),t}(),y.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},w);j.propTypes={defaultCalendarDate:l.a.instanceOf(Date),value:l.a.oneOfType([l.a.instanceOf(Date),l.a.arrayOf(l.a.instanceOf(Date))]),weekStartsOn:l.a.number,disabledDate:l.a.func,onChange:l.a.func,onHover:l.a.func,showToday:l.a.bool,showPrevMonth:l.a.bool,showPrevYear:l.a.bool,showNextMonth:l.a.bool,showNextYear:l.a.bool};t.a=j},1987:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(10),i=n(47),s=n(470),l=n(469),c=n(146),u=n(1),p=n.n(u),f=n(162),d=n(35),m=n(474),h=n(4),v=n(46),b=n(79),y=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,o=e.canClick,i=e.onClick;if(!n)return null;var s=t.length,l=s===n?"":Object(v.formatNumber)(n)+" 人";return a.a.createElement(m.CJKSpace,null,t.map(function(e,t){return a.a.createElement("span",{key:t},t>0&&"、",a.a.createElement(b.a,{key:t,noBadge:!0,user:e},e.name))}),s>0&&n-s>0&&"等",o?a.a.createElement(h.c,{preset:"plain",onClick:i},l,r):l+r)};y.propTypes={voteupCount:p.a.number.isRequired,upvotedFollowees:p.a.array.isRequired,actionText:p.a.string.isRequired,canClick:p.a.bool,onClick:p.a.func},y.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var w,g,E=y,O=n(1964),C=(n(2040),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var j,_,S,P=(g=w=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={modalShown:!1},r.handleListHide=function(){return r.setState({modalShown:!1})},r.handleListShown=function(){return r.setState({modalShown:!0})},k(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),C(t,[{key:"componentWillReceiveProps",value:function(){var e=this.props.modalShown;e&&!this.state.modalShown&&this.setState({modalShown:e})}},{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,o=e.type,i=e.too,s=e.isFetching,l=e.isDrained,c=e.items,u=e.onLoad;if(t<=0)return null;var p=this.state.modalShown,m=void 0;return m="pin"===o?"为该"+d.b[o]+"鼓掌":"column"===o?"关注":(i?"也":"")+"赞同了该"+d.b[o],a.a.createElement("span",{className:"Voters"},a.a.createElement(E,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:m}),a.a.createElement(f.b,{size:"fullPage",onClose:this.handleListHide},p&&a.a.createElement(O.a,{isFetching:s,isDrained:l,text:"column"===o?"关注了":"赞同了",items:c,voteupCount:t,onLoad:u})))}}]),t}(),w.propTypes={openable:p.a.bool,upvotedFollowees:p.a.array,id:p.a.oneOfType([p.a.number,p.a.string]),type:p.a.oneOf(["pin","answer","article","column"]).isRequired,modalShown:p.a.bool},w.defaultProps={openable:!0},g),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var x={answer:"answers",article:"articles",pin:"pins",column:"columns"};var I=Object(o.connect)(function(e,t){var n=t.id,r=t.type,a=e.entities.users,o=e[x[r]]||{},i=o.voters,s=void 0===i?{}:i,l=o.concernedUpvoters,c=void 0===l?{}:l,u=s[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},p=u.isFetching,f=u.isDrained,d=u.order,m=u.ids,h=(c[n]||{ids:[]}).ids;return{isFetching:p,isDrained:f,order:d,items:[].concat(R(h),R(m.filter(function(e){return!h.includes(e)}))).map(function(e){return a[e]})}},{loadAnswerVoters:i.s,loadArticleVoters:s.c,loadPinVoters:l.f,loadColumnsFollowers:c.c})((S=_=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=A(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleLoad=function(){var e=r.props,t=e.type,n=e.id,a=e.loadAnswerVoters,o=e.loadPinVoters,i=e.loadArticleVoters,s=e.loadColumnsFollowers;switch(t){case"answer":return a(n);case"pin":return o(n);case"article":return i(n);case"column":return s(n);default:return null}},A(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),N(t,[{key:"render",value:function(){return a.a.createElement(P,T({onLoad:this.handleLoad},this.props))}}]),t}(),_.propsTypes=T({},P.propsTypes),_.defaultProps=T({},P.defaultProps),j=S))||j;t.a=I},1988:function(e,t,n){},1989:function(e,t,n){},1990:function(e,t,n){},1991:function(e,t,n){"use strict";var r=n(1992),a="Copy to clipboard: #{key}, Enter";e.exports=function(e,t){var n,o,i,s,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(i=r(),s=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",document.body.appendChild(c),s.selectNode(c),l.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:a),window.prompt(o,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(s):l.removeAllRanges()),c&&document.body.removeChild(c),i()}return u}},1992:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},1993:function(e,t,n){},1994:function(e,t,n){},1995:function(e,t,n){},1996:function(e,t,n){},1997:function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},1998:function(e,t,n){},1999:function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},2000:function(e,t,n){e.exports=n.p+"assets/liukanshan_paper.d98ba9b2.svg"},2001:function(e,t,n){var r=n(2002),a=n(347),o=n(493);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&a(t,n,i)&&(n=i=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),i=void 0===i?t<n?1:-1:o(i),r(t,n,i,e)}}},2002:function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,a,o){for(var i=-1,s=r(n((t-e)/(a||1)),0),l=Array(s);s--;)l[o?s:++i]=e,e+=a;return l}},2003:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r,a,o=n(0),i=n.n(o),s=n(1),l=n.n(s),c=n(2),u=n.n(c),p=n(818),f=n.n(p),d=n(4),m=n(89),h=n(2173),v=n(1986),b=(n(2005),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={isFocused:!1},y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),b(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.value,a=t.onChange,o=t.isButtonActive,s=t.toggler,l=t.disabledDate,c=t.getContainer,p=this.state.isFocused;return i.a.createElement(m.a,{className:u()("DatePicker",n),toggler:s||i.a.createElement(d.c,{className:u()("DatePicker-Button",{"is-active":p||o})},i.a.createElement(h.a,{center:!0,size:20}),f()(r,"YYYY/MM/DD")),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:c},i.a.createElement(v.a,{value:r,onChange:function(t){e.popover.close(),a(t)},disabledDate:l}))}}]),t}(),r.propTypes={toggler:l.a.element,disabledDate:l.a.func},a)},2004:function(e,t,n){},2005:function(e,t,n){},2006:function(e,t,n){},2007:function(e,t,n){},2012:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(18),l=n(165),c=n(70),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var p=!1,f="pointer";function d(){f="pointer"}function m(){f="wheel"}var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.currentDirection=null,o.lastEmitDirection=null,o.startPosition=0,o.previousPosition=0,o.handleScroll=function(){var e=window.pageYOffset;if(!(e<0)){var t=e<o.previousPosition?"up":"down";t!==o.currentDirection&&(o.currentDirection=t,o.startPosition=o.previousPosition),o.previousPosition=e;var n=o.props,r=n.threshold,a=n.emitOnce,i=n.onScrollUp,s=n.onScrollDown;Math.abs(o.startPosition-e)>=r&&("wheel"!==f||a&&o.lastEmitDirection===t||("up"===t&&i&&i(),"down"===t&&s&&s()),o.lastEmitDirection=t,o.startPosition=e)}},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),u(t,[{key:"componentDidMount",value:function(){p||(window.addEventListener("click",d),window.addEventListener("wheel",m,{passive:!0}),window.addEventListener("mousewheel",m,{passive:!0}),window.addEventListener("touchmove",m,{passive:!0}),p=!0);var e=this.props,t=e.throttleRate,n=e.useRAF,r=window.pageYOffset;this.startPosition=r,this.previousPosition=r,this.subscription=Object(c.subscribe)("scroll",this.handleScroll,{throttleRate:t,useRAF:n})}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"render",value:function(){return this.props.children||null}}]),t}();h.propTypes={throttleRate:i.a.number,useRAF:i.a.bool,emitOnce:i.a.bool,threshold:i.a.number,onScrollUp:i.a.func,onScrollDown:i.a.func},h.defaultProps={threshold:100,useRAF:!0,emitOnce:!0};var v,b,y=h,w=n(136),g=n(11),E=(n(1988),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=(b=v=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={enabled:!1,shown:!1},r.handleScrollUp=function(){r.state.shown&&r.canToggle()&&r.setState({shown:!1})},r.handleScrollDown=function(){!r.state.shown&&r.canToggle()&&r.setState({shown:!0})},r.handlePositionStatusChange=function(e){r.canToggle()&&("normal"!==e?r.enable():r.disable())},O(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),E(t,[{key:"componentDidMount",value:function(){this.appHeader=document.querySelector(".AppHeader"),this.portal=document.createElement("div"),this.portal.classList.add("PageHeader"),this.appHeader.appendChild(this.portal),this.renderPortal()}},{key:"componentWillReceiveProps",value:function(e){this.renderPortal(e)}},{key:"componentDidUpdate",value:function(e,t){var n=t.shown,r=this.state.shown,a=this.props.onStatusChange;n!==r&&a&&a(r),!n&&r&&(this.appHeader.classList.add("is-hidden"),this.portal.classList.add("is-shown")),n&&!r&&(this.appHeader.classList.remove("is-hidden"),this.portal.classList.remove("is-shown"))}},{key:"componentWillUnmount",value:function(){this.appHeader.classList.remove("is-hidden"),Object(s.unmountComponentAtNode)(this.portal),this.appHeader.removeChild(this.portal)}},{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"renderPortal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;Object(s.unstable_renderSubtreeIntoContainer)(this,e.children,this.portal)}},{key:"render",value:function(){var e=this,t=this.props.offset,n=this.state.enabled;return a.a.createElement("div",null,a.a.createElement(w.a,{keyMap:{FOCUS_SEARCH:"/"},handlers:{FOCUS_SEARCH:function(){return e.setState({shown:!1})}}}),a.a.createElement(l.a,{offset:t,onPositionStatusChange:this.handlePositionStatusChange},a.a.createElement("div",null)),n&&a.a.createElement(y,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}))}}]),t}(),v.propTypes={prevent:i.a.bool,offset:i.a.number,onStatusChange:i.a.func},v.defaultProps={prevent:!1,offset:g.f},b);n.d(t,"a",function(){return _});var k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=j(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={show:!1},j(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),k(t,[{key:"componentDidMount",value:function(){this.appHeader=document.querySelector(".AppHeader"),this.setState({show:Boolean(this.appHeader)})}},{key:"render",value:function(){return this.state.show?a.a.createElement(C,this.props):null}}]),t}()},2013:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(2115)),o=l(n(0)),i=l(n(1955)),s=(l(n(2116)),n(2117));function l(e){return e&&e.__esModule?e:{default:e}}i.default.any,i.default.func,i.default.node;var c=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState(function(t){var n=r({},t.children);return delete n[e],{children:n}})},o.childRefs=Object.create(null),o.state={children:(0,s.getChildMapping)(n.children)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var a=n&&n.hasOwnProperty(r);!t[r]||a||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var o in n){var i=t&&t.hasOwnProperty(o);!n[o]||i||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var i="string"!=typeof r.ref,s=e.props.childFactory(r),l=function(t){e.childRefs[n]=t};s===r&&i&&(l=(0,a.default)(r.ref,l)),t.push(o.default.cloneElement(s,{key:n,ref:l}))}};for(var i in this.state.children)n(i);var s=r({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,o.default.createElement(this.props.component,s,t)},t}(o.default.Component);c.displayName="TransitionGroup",c.propTypes={},c.defaultProps={component:"span",childFactory:function(e){return e}},t.default=c,e.exports=t.default},2014:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};a(n(0));var r=a(n(1955));function a(e){return e&&e.__esModule?e:{default:e}}t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},2015:function(e,t,n){e.exports=n.p+"assets/logo.f6eef033.png"},2016:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(29),i=function(e,t){return t>=e+1?"rating":t>=e+.5?"ratingHalf":"ratingNone"};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return a.a.createElement("div",{className:"Rating"},Array.from({length:5}).map(function(e,t){return a.a.createElement(o.a,{style:{marginLeft:0},key:t,width:15,height:15,name:i(t,n)})}))}},2019:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(0),i=n.n(o),s=n(10),l=n(2),c=n.n(l),u=n(819),p=n.n(u),f=n(48),d=n(1900),m=n(2174),h=n(2175),v=n(3),b=function(e){return i.a.createElement(v.a,e,i.a.createElement("path",{d:"M12 2C6.478 2 2 6.498 2 12.013 2 17.527 6.478 22 12 22s10-4.473 10-9.987C22.025 6.498 17.547 2 12 2zm3.575 14.693s-3.677-2.45-4.135-2.8c-.458-.349-.458-.813-.458-.813l.005-5.66c0-.56.458-1.017 1.018-1.017s1.017.457 1.017 1.017l-.004 5.152 3.727 2.495c.458.305.62.99.27 1.44-.35.45-1.004.487-1.44.186z",fillRule:"evenodd"}))};b.defaultProps={name:"Time"};var y=b,w=function(e){return i.a.createElement(v.a,e,i.a.createElement("path",{d:"M12.9 11.433v-5.1a.9.9 0 1 0-1.8 0v6a.9.9 0 0 0 .9.9h4.8a.9.9 0 1 0 0-1.8h-3.9zM2.652 8.246a3.3 3.3 0 0 1 4.43-4.851 10.241 10.241 0 0 0-4.43 4.851zm14.266-4.851a3.3 3.3 0 0 1 4.43 4.851 10.241 10.241 0 0 0-4.43-4.851zM12 21.333a9 9 0 1 1 0-18 9 9 0 0 1 0 18z",fillRule:"evenodd"}))};w.defaultProps={name:"Clock"};var g=w,E=n(4),O=n(29),C=n(40),k=n(244),j=n(165),_=n(104),S=n(80),P=n(163),T=n(21),N=n.n(T),A=n(2041),R=n(169),x=n(8),I=n(1973),M=n.n(I),L=n(2043),D=n.n(L),q=n(2052),B=n.n(q),z=n(103),Q=n(2003),U=(n(2053),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var F=M()(0,24).map(function(e){return D()(e,2,"0")}),H=M()(0,60).map(function(e){return D()(e,2,"0")}),W=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=V(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={value:f.setSeconds(r.props.value,0)},V(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),U(t,[{key:"handleChange",value:function(e,t){var n=this.props.onChange;this.setState({value:e}),n(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.min,a=t.max,o=t.onRef,s=this.state.value;return i.a.createElement("div",{className:c()("DateTimePicker",n),ref:o},i.a.createElement(Q.a,{value:s,disabledDate:function(e){return!(!r||!f.isBefore(e,r.toDateString()))||!(!a||!f.isAfter(e,a.toDateString()))},onChange:function(t){e.handleChange(B()(function(e){return f.setYear(e,t.getFullYear())},function(e){return f.setMonth(e,t.getMonth())},function(e){return f.setDate(e,t.getDate())})(s),{date:t})}}),i.a.createElement(z.b,{value:f.format(s,"HH"),onChange:function(t){return e.handleChange(f.setHours(s,t),{hours:t})}},F.map(function(e){return i.a.createElement(z.a,{key:e,value:e})})),i.a.createElement("span",{className:"DateTimePicker-label"},"时"),i.a.createElement(z.b,{value:f.format(s,"mm"),onChange:function(t){return e.handleChange(f.setMinutes(s,t),{minutes:t})}},H.map(function(e){return i.a.createElement(z.a,{key:e,value:e})})),i.a.createElement("span",{className:"DateTimePicker-label"},"分"))}}]),t}(),G=n(462),Y=n(162),K=(n(1975),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function J(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var X="AnswerOrg::know",$=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=J(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleHide=function(){N.a.set(X,!0),r.props.onClose()},J(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),K(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return i.a.createElement(Y.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n},t&&i.a.createElement("div",null,i.a.createElement("ul",{className:"AnswerModal-list"},i.a.createElement("li",null,"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"),i.a.createElement("li",null,"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"),i.a.createElement("li",null,"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。")),i.a.createElement("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank"},"了解更多"),i.a.createElement(Y.a,{direction:"horizontal"},i.a.createElement(E.c,{onClick:this.handleHide},"不再显示"),i.a.createElement(E.c,{color:"blue",preset:"primary",onClick:n},"知道了"))))}}],[{key:"getKnown",value:function(){return N.a.get(X)}}]),t}(),Z=n(32),ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ne="AnswerBrand::know",re=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=te(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleHide=function(){N.a.set(ne,!0),r.props.onClose()},te(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),ee(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return i.a.createElement(Z.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n},t&&i.a.createElement("div",null,i.a.createElement("p",null,"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"),i.a.createElement("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank"},"了解品牌提问"),i.a.createElement(Z.a,{direction:"horizontal"},i.a.createElement(E.c,{onClick:this.handleHide},"知道了，继续回答"),i.a.createElement(E.c,{color:"blue",preset:"primary",onClick:n},"取消"))))}}],[{key:"getKnown",value:function(){return N.a.get(ne)}}]),t}(),ae=n(2099),oe=(n(2054),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function ie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var se="什么是创作声明？",le="创作声明是对其他知友的善意提醒，也是一种创作态度。知乎鼓励您使用「创作声明」功能，为回答添加阅读前的须知，使知友获得更好的阅读体验。该功能当前只针对部分问题开放。",ce=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){(0,r.props.onChange)(e.target.checked),x.default.trackEvent(null,{id:5603,action:"Click"})},r.handleHelpClick=function(){S.a.alert(le,{title:se,text:{ok:"我知道了"}}),x.default.trackEvent(null,{id:5604,action:"Click"})},ie(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),oe(t,[{key:"componentDidMount",value:function(){x.default.trackCardShow(null,{id:5602})}},{key:"render",value:function(){var e=this.props,t=e.disclaimers,n=e.checked;return i.a.createElement("div",{className:"DisclaimerEntry"},i.a.createElement("label",{className:"DisclaimerEntry-label"},i.a.createElement("input",{className:"DisclaimerEntry-input",type:"checkbox",checked:n,onChange:this.handleChange}),i.a.createElement("span",{className:"DisclaimerEntry-type"},"创作声明：",t[0].description)),i.a.createElement("span",{className:"DisclaimerEntry-help",onClick:this.handleHelpClick},i.a.createElement(ae.a,{className:"DisclaimerEntry-helpIcon",text:!0,center:!0})))}}]),t}(),ue=n(91),pe=(n(2055),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var de,me,he=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=fe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=r.props.handleChange,n=e.target.checked;x.default.trackEvent(r.circle,{id:4063,action:n?"Open":"Close"}),Promise.resolve(n||Object(ue.a)("取消收录到圈内说",{content:"回答被收录到圈内说将会得到更多的曝光，确定要取消收录吗？"})).then(function(){return t(n)})},fe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),pe(t,[{key:"componentDidMount",value:function(){x.default.trackCardShow(this,{id:4062})}},{key:"render",value:function(){var e=this,t=this.props.isChecked;return i.a.createElement("label",{className:"CircleEntry-openCircleLabel",ref:function(t){e.circle=t},htmlFor:"CircleEntry-openCircleInput"},i.a.createElement("input",{type:"checkbox",id:"CircleEntry-openCircleInput",checked:t,onChange:this.handleChange}),"收录到圈内说")}}]),t}(),ve=n(504),be=n(1951),ye=n(485),we=n(1976),ge=n(510),Ee=n(66),Oe=n(1927),Ce=n(2057),ke=n.n(Ce),je=(n(2058),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function _e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Se,Pe,Te={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},Ne=(me=de=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=_e(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.formatDate=function(e){return Object(f.format)("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"YYYY-MM-DD HH:mm")},r.handleDraftClick=function(e){e.preventDefault()},_e(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),je(t,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,r=t.isFetching,a=t.data;return i.a.createElement("div",{className:"DraftHistory-main"},r&&i.a.createElement(_.a,{className:"DraftHistory-loading"}),!r&&a&&i.a.createElement(i.a.Fragment,null,a.draft.title&&i.a.createElement("div",{className:"DraftHistory-draftTitle"},a.draft.title),i.a.createElement(Oe.a,{className:"DraftHistory-draft",html:a.draft.content,onClick:this.handleDraftClick}),i.a.createElement("div",{className:"DraftHistory-actions"},i.a.createElement("div",{className:"DraftHistory-meta"},this.formatDate(a)," ",Te[a.versionType]),i.a.createElement(E.c,{className:"DraftHistory-revert",disabled:"current"===a.versionType,onClick:function(){return n(a)}},"恢复此版本"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.currentVersion,a=t.currentDraft,o=t.getHistory,s=t.onSelect;return n?n.isFetching&&!n.items?i.a.createElement("div",{className:"DraftHistory"},i.a.createElement(_.a,{className:"DraftHistory-loading"})):i.a.createElement("div",{className:"DraftHistory"},i.a.createElement("div",{className:"DraftHistory-side"},i.a.createElement("div",{className:"DraftHistory-title"},"历史版本"),i.a.createElement(Ee.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:o},i.a.createElement("div",null,n.items&&n.items.map(function(t,n){return i.a.createElement("a",{key:n,href:"javascript:;",className:c()("DraftHistory-version",{"DraftHistory-version--selected":r&&t.versionType===r.versionType&&t.id===r.id}),onClick:function(){return s(t)}},i.a.createElement("div",{className:"DraftHistory-versionDate"},e.formatDate(t)),i.a.createElement("div",{className:"DraftHistory-versionType"},Te[t.versionType]))})))),n.items&&!n.items.length&&i.a.createElement("div",{className:"DraftHistory-main"},i.a.createElement("div",{className:"DraftHistory-empty"},i.a.createElement(ke.a,{className:"DraftHistory-emptyIcon"}),i.a.createElement("div",{className:"DraftHistory-emptyText"},"还没有历史版本"))),a&&this.renderCurrentDraft()):null}}]),t}(),de.propTypes={history:a.a.object,currentVersion:a.a.object,currentDraft:a.a.object,onSelect:a.a.func,onRevert:a.a.func},me),Ae=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var xe,Ie,Me=(Pe=Se=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Re(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={currentVersion:null},r.getHistory=function(){var e=r.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)},r.handleSelect=function(e){r.setState({currentVersion:e})},r.handleRevert=function(e){var t=r.props,n=t.revert,a=t.onReverted;n(e.versionType,e.id).then(function(){a&&a(e)})},Re(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),Ae(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.drafts,a=n.getDraft,o=this.state.currentVersion,i=t.currentVersion;!o||i&&i.versionType===o.versionType&&i.id===o.id||r[o.versionType+"_"+o.id]||a(o.versionType,o.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,r=this.state.currentVersion;return i.a.createElement(Ne,{history:t,currentVersion:r,currentDraft:r?n[r.versionType+"_"+r.id]:null,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),t}(),Se.propTypes={type:a.a.string.isRequired,id:a.a.number.isRequired,onReverted:a.a.func},Pe),Le=Object(s.connect)(function(e,t){var n=t.type,r=t.id;return{history:e.draftHistory.history[n+"_"+r],drafts:e.draftHistory.drafts}},{getHistory:ge.c,getDraft:ge.b,revert:ge.e,reset:ge.d})(Me),De=(n(2059),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function qe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Be,ze,Qe,Ue,Ve,Fe,He=(Ie=xe=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=qe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleReverted=function(e){var t=r.props,n=t.onClose,a=t.onReverted;a&&a(e),n&&n(),x.default.trackEvent(null,{id:5016,action:"Click"})},r.handleClose=function(){var e=r.props.onClose;e&&e(),x.default.trackEvent(null,{id:5015,action:"Click"})},qe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),De(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,r=e.id;return i.a.createElement(Z.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose},t&&i.a.createElement(Le,{type:n,id:r,onReverted:this.handleReverted}))}}]),t}(),xe.propTypes={shown:a.a.bool.isRequired,onClose:a.a.func,type:a.a.string.isRequired,id:a.a.number.isRequired,onReverted:a.a.func},xe.defaultProps={shown:!0},Ie),We=n(1960),Ge=n(56),Ye=n(47),Ke=n(466),Je=n(236),Xe=n(14),$e=n(16),Ze=n(489),et=n(1972),tt=n(2015),nt=n.n(tt),rt=n(11),at=(n(2060),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),it=(Ve=["草稿保存于",""],Fe=["草稿保存于",""],Object.freeze(Object.defineProperties(Ve,{raw:{value:Object.freeze(Fe)}})));var st={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},lt=function(e){return Boolean(e&&e.disclaimerInfo&&e.disclaimerInfo[0]&&"open"===e.disclaimerInfo[0].status)},ct=Object(s.connect)(function(e,t){var n=e.entities,r=n.questions,a=n.drafts,o=void 0===a?{}:a,i=n.answers,s=e.switches,l=e.question,c=Object($e.c)(e),u=Object.values(i).filter(function(e){return e.author&&e.author.urlToken===(c&&c.urlToken)})[0]||{},p=u.rewardInfo&&u.rewardInfo.tagline;return{question:r[t.question.id]||t.question,draft:o["question_"+t.question.id],switches:s,rewardTagline:p,currentUser:c,isPuQuestion:Boolean(l&&l.brand&&l.brand.isPuQuestion),disclaimers:l.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null}},{addDraft:Ge.b,updateDraft:Ge.X,deleteDraft:Ge.i,showNotification:Xe.g,updateQuestionRewardinfo:Je.n,fillCurrentUserIfNeeded:$e.e,loadDisclaimers:Ge.E,loadSettings:Ye.v,updateSettingsDisclaimer:Ye.K,loadLabel:Ke.e},null,{withRef:!0})((Qe=ze=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));Ue.call(r);var a=r.props,o=a.defaultValue,i=a.draft,s=a.settings,l=i?i.editableContent:o,c=i?i.updatedTime:0;return r.state={draft:l,content:{toHTML:function(){return""}},isEmpty:!l,isTyping:!1,isChecked:n.isCheckedCircle,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:c,rewardTagline:e.rewardTagline,draftHistoryModalShown:!1,isDisclaimerChecked:lt(s),initialScheduledPublishAt:void 0,scheduledPublishAt:void 0},r.hasEdited=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),ot(t,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting;return t&&t.autoSendingCreations&&!n}}]),ot(t,[{key:"componentDidMount",value:function(){var e=this;this.shouldAnswerOrgQuestionModalShow=!$.getKnown(),this.onFocusAuthChecked=!1;var t=(0,this.props.fillCurrentUserIfNeeded)(["lastCommentPermission","caEnabled","autoSendingCreations"]);Promise.resolve(t).then(function(){ve.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then(function(t){var n=at(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),ve.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&x.default.trackCardShow(e,{id:5738}))}),x.default.trackCardShow(e,{id:5729,name:"回答"})}),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.isPending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval(function(){return e.setState({dateNow:Date.now()})},6e4);var n=this.props,r=n.question,a=n.answer,o=n.disclaimers,i=n.loadDisclaimers,s=n.settings,l=n.loadSettings;o||i(r.id),a&&!s&&l(a.id)}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.state,r=e.currentUser,a={};if(n.reshipmentSettings||void 0===r.caEnabled||(a.reshipmentSettings=r.caEnabled?"need_payment":"allowed"),t.isCheckedCircle!==n.isChecked&&this.setState({isChecked:t.isCheckedCircle}),n.commentPermission||void 0===r.lastCommentPermission||(a.commentPermission=r.lastCommentPermission),Object.keys(a).length&&this.setState(a),!this.draftLoaded){if(!this.state.draft&&!this.props.draft&&e.draft){var o=e.draft.editableContent;o&&(this.setState({draft:o,isEmpty:!o}),this.editable&&!this.editable.toHTML()&&this.editable.resetWithValue(o)),this.draftLoaded=!0}e.settings&&!this.props.settings&&this.setState({isDisclaimerChecked:lt(e.settings)})}}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.focusing;if(this.props.tagline){var n=N.a.get("rewardNotication");t&&!n&&(this.setState({rewardNotication:!1}),N.a.set("rewardNotication",!0),this.timeout=setTimeout(function(){e.setState({rewardNotication:!0})},2e3))}}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer)}},{key:"setUseScheduledPublish",value:function(e,t){var n=this;if(e)if(t)this.setState({scheduledPublishAt:t});else{var r=f.addMinutes(new Date,30);this.setState({initialScheduledPublishAt:r,scheduledPublishAt:r})}else S.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then(function(){n.setState({scheduledPublishAt:void 0}),x.default.trackEvent(n,{action:"Click",id:5737,name:"回答"})}).catch(function(){x.default.trackEvent(n,{action:"Click",id:5736,name:"回答"})}),x.default.trackCardShow(this,{id:5735,name:"回答"})}},{key:"getCloneContent",value:function(){return this.editable.state.editorState.getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;n&&r(t.id)}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(st).map(function(n){var r=Object(et.a)(n,e);return i.a.createElement(C.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(et.b)(n,e)},r&&i.a.createElement(O.a,{className:"Button-icon",name:r}),st[n])})}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,r=t.isReediting,a=t.switches,o=t.rewardTagline,s=t.question,l=s.commercial,u=s.relationship.isAnonymous,f=s.circleInfo,d=(f=void 0===f?{}:f).canWriteCircle,m=t.answer,h=t.disclaimers,v=t.settings,b=this.state,y=b.checked,w=b.commentPermission,g=b.focusing,k=b.isEmpty,S=b.isTyping,T=b.isChecked,N=b.isFullscreen,A=b.loadingShown,R=b.reshipmentSettings,x=b.rewardNotication,I=b.rewardModalShown,M=b.rewardTagline,L=b.selectedText,D=b.dateNow,q=b.isDisclaimerChecked,B=b.scheduledPublishAt,z=null;if(A)z=i.a.createElement(_.a,{count:3});else if(L)z=L.length+" 个字";else if(n){var Q=null;Q=n.updating||S?"草稿保存中…":n.updated&&D<1e3*n.updatedTime+6e4?"草稿已保存":n.updateFailed?i.a.createElement("span",{className:"AnswerForm-draftStatus--failed"},"草稿保存失败"):p()(it,Object(P.toRelativeString)(n.updatedTime)),z=i.a.createElement("div",null,i.a.createElement(E.c,{preset:"plain",className:"AnswerForm-delete","aria-label":"删除草稿","data-tooltip":"删除草稿",onClick:this.onDeleteDraftModalShow},i.a.createElement(O.a,{name:"delete"})),Q)}else l&&l.tip&&l.tip.message&&(z=l.tip.message);var U=i.a.createElement("div",{className:c()("AnswerForm-footer",{"AnswerForm-footer--hidden":!N&&!g&&k})},i.a.createElement("div",{className:"AnswerForm-footerContent AnswerForm-container"},i.a.createElement("div",{className:"AnswerForm-status"},z),i.a.createElement("div",{className:"AnswerForm-footerRight"},r?i.a.createElement("a",{className:"AnswerForm-cancel",onClick:this.onCancel},n?"保存草稿并离开":"取消"):i.a.createElement(C.c,{toggler:i.a.createElement(E.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t}},i.a.createElement(O.a,{left:!0,name:"setting"}),"设置"),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(R),i.a.createElement(C.a,null),i.a.createElement(We.c,{onChange:this.handleChangeCommentPermission,current:w})),i.a.createElement(E.c,{className:"AnswerForm-submit",preset:"primary",color:"blue",onClick:this.handleSubmit},r?"提交修改":B?"定时发送":"提交回答"))),i.a.createElement("div",{className:"AnswerForm-footerContent AnswerForm-container"},h&&Boolean(h.length)&&(!m||v)&&i.a.createElement(ce,{disclaimers:h,checked:q,onChange:this.onChangeDisclaimerSettings}),!u&&d&&i.a.createElement(he,{isChecked:T,handleChange:this.onChangecircleSettings}),a.isAnswerRewardable&&i.a.createElement("div",{className:"AnswerForm-openRewardButton"},i.a.createElement("label",{className:"AnswerForm-openRewardLabel",ref:function(t){e.label=t},htmlFor:"AnswerForm-openRewardInput"},i.a.createElement("input",{type:"checkbox",id:"AnswerForm-openRewardInput",checked:y,onChange:this.onChangerewardSettings}),"开启赞赏"),I&&i.a.createElement(we.a,{submitRewardText:this.onSubmitReward,onClose:this.unactivateReward,tagline:M||o,edit:!1}),!x&&i.a.createElement("span",{className:"AnswerForm-Notication"},"你的回答可以开启赞赏了"))));return!N?i.a.createElement(j.a,{bottom:!0,container:function(){return e.form}},U):U}},{key:"render",value:function(){var e=this,t=this.props,n=t.bordered,r=t.className,a=t.defaultValue,o=t.draft,s=t.isReediting,l=t.question,u=t.currentUser,p=t.isPuQuestion,h=this.state,v=h.deleteDraftModalShown,b=h.isFullscreen,y=h.isToolbarSticky,w=h.isLeaveActive,g=h.toolbarMenuAttention,O=h.draftHistoryModalShown,C=h.initialScheduledPublishAt,j=h.scheduledPublishAt,_=(s?"修改":"写")+"回答...";if("commercial"===l.questionType){var S=p?"大咖提问":"品牌提问";_="这是一个「"+S+"」，请在回答前了解：「"+S+"」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"}var P=i.a.createElement(ye.a,{className:c()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:y}),onRef:function(t){e.editable=t},large:!0,spread:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:!0,allowUploadDocument:!0,allowVideoTitleChange:!0,allowReference:!0,allowHeaderThree:!1,allowToolbarSticky:!b,toolbarStickyOffset:rt.f,getToolbarPlugins:this.getToolbarPlugins,getToolbarMenuPlugins:this.getToolbarMenuPlugins,toolbarMenuAttention:g,toolbarProps:{menuCallout:j&&C&&i.a.createElement(k.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){e.setUseScheduledPublish(!1),x.default.trackEvent(e,{action:"Click",id:5734,name:"回答"})}},"发布时间：",i.a.createElement(W,{onRef:function(t){return e.dateTimePicker_=t},value:C,min:C,max:f.addDays(C,7),onChange:function(t,n){e.setUseScheduledPublish(!0,t),x.default.setModule(e.dateTimePicker_,{module:"Unknown",module_name:n.date?"日期":n.hours?"小时":n.minutes?"分钟":void 0}),x.default.trackEvent(e.dateTimePicker_,{action:"Click",id:5731,name:"文章"})}}),i.a.createElement("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"}},i.a.createElement(d.a,{text:!0,center:!0})," 管理待发布内容"))},minRows:3,placeholder:_,defaultValue:o?o.editableContent:a,onChange:this.onChangeContent,onAfterChange:this.onAfterChangeContent,onFocus:this.onFocusWithAuth,onSelectText:this.onSelectText,onSubmit:this.handleSubmit,onError:this.handleError,onLoadStart:this.onLoadStart,onLoadEnd:this.onLoadEnd,onUploadStart:this.handleUploadStart,onUploadEnd:this.handleUploadEnd,onUploadError:this.handleUploadError,onBeforeVideoUpload:this.handleBeforeVideoUpload,logo:nt.a,location:l.title,editingContentType:"answer"});return i.a.createElement(G.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(l.id),author_member_hash_id:u.id}},i.a.createElement("form",{ref:function(t){e.form=t},className:c()("AnswerForm",r,{"AnswerForm--bordered":n}),onSubmit:function(e){return e.preventDefault()},noValidate:!0},b&&i.a.createElement("div",{className:c()("AnswerForm-fullscreenBackdrop",{isLeaveActive:w})}),i.a.createElement("div",{className:c()({"AnswerForm-fullscreenContent":b,isLeaveActive:w}),ref:function(t){return e.fullscreenContent=t}},i.a.createElement("div",{className:c()({"AnswerForm-fullscreenScroller":b}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll},b&&i.a.createElement("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef},i.a.createElement("div",{className:"AnswerForm-title"},l.title)),b&&i.a.createElement(E.c,{className:"AnswerForm-exitFullscreenButton",onClick:this.exitFullscreen,onMouseDown:function(e){return e.preventDefault()}},i.a.createElement(m.a,{text:!0,center:!0})," 退出全屏模式"),P),this.renderFooter()),b&&i.a.cloneElement(P,{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,toolbarMenuAttention:null,onRef:function(t){return e.cloneEditor=t}}),"org"===l.questionType&&i.a.createElement($,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===l.questionType&&i.a.createElement(re,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),i.a.createElement(be.a,{title:"清除草稿",subtitle:s?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:v,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),i.a.createElement(He,{shown:O,onClose:this.hideDraftHistoryModal,type:"question",id:l.id,onReverted:this.handleReverted})))}}]),t}(),ze.propTypes={question:a.a.object,bordered:a.a.bool,isReediting:a.a.bool,defaultValue:a.a.string},ze.defaultProps={bordered:!1,isReediting:!1},ze.contextTypes={authRequired:a.a.func,isCheckedCircle:a.a.bool,onChangecircleSettings:a.a.func},Ue=function(){var e=this;this.onCompositionStart=function(){e.composition=!0,e.syncDraft.cancel()},this.onCompositionEnd=function(){e.composition=!1,e.prevValue&&e.syncDraft(e.prevValue),e.prevValue=null},this.onChangeContent=function(t){e.loggingDeltaTime||(e.loggingDeltaTime=!0,e.startCompositionTime=Math.floor((new Date).getTime()/1e3)),e.hasEdited=!0,e.setState({content:t,isEmpty:t.isEmpty,isTyping:!0}),e.composition?e.prevValue=t:e.syncDraft(t)},this.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var r=n.getRangeAt(0).cloneRange();r.collapse(t);var a=r.getBoundingClientRect();if(0===a.height){var o=r.commonAncestorContainer;1===o.nodeType&&(a=o.getBoundingClientRect())}if(0!==a.height){var i=a.bottom-(window.innerHeight-117);i>0&&window.scrollBy(0,i)}}},this.onChangeReshipmentSettings=function(t){"need_payment"!==t||e.props.currentUser.caEnabled?e.setState({reshipmentSettings:t}):window.open("/copyright/invite")},this.onChangerewardSettings=function(t){var n=t.target.checked,r=e.props,a=r.question,o=a.relationship.isAnonymous,i=a.id,s=r.showNotification,l=e.state.rewardTagline;if(!o)return!n||l?(e.setState({rewardTagline:"",checked:!1}),void e.props.updateQuestionRewardinfo(i,!1)):void e.activateReward();s("匿名回答无法开启赞赏，请先取消匿名","red")},this.onSubmitReward=function(t){e.setState({rewardTagline:t,checked:!0});var n=e.props.question.id;Promise.resolve(e.props.updateQuestionRewardinfo(n,!0)).then(function(){return e.unactivateReward()})},this.onChangeDisclaimerSettings=function(t){e.setState({isDisclaimerChecked:t})},this.onDeleteDraftModalShow=function(){e.setState({deleteDraftModalShown:!0})},this.onDeleteDraft=function(){e.props.isReediting||(e.editable.reset(),e.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),e.deleteDraft();var t=e.props.onDeleteDraft;t&&t()},this.onDeleteDraftModalHide=function(){e.setState({deleteDraftModalShown:!1})},this.handleSubmit=this.context.authRequired(function(t){var n=e.state,r=n.reshipmentSettings,a=n.commentPermission,o=n.rewardTagline,s=n.isChecked,l=n.isDisclaimerChecked,c=n.scheduledPublishAt;if(e.editable){var u=e.editable.toHTML();if(u){var p=e.props,d=p.answer,m=p.disclaimers,h=p.settings,v=p.isReediting,b=p.onSubmit,y=p.showNotification,w=p.question,g=w.id,E=w.questionType,O=w.circleInfo,C=(O=void 0===O?{}:O).canWriteCircle,k=p.currentUser,j=p.updateSettingsDisclaimer,_=p.loadLabel;if(e.editable.hasVideo("upload"))e.handleError("video-uploading");else if(e.editable.hasImage("upload"))e.handleError("image-uploading");else{if(e.editable.hasImage("error")||e.editable.hasVideo("error")&&!e.editable.hasVideo("error-review"))return t.persist(),void S.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"});if(e.editable.hasVideo("error-review")||e.editable.hasVideo("censor"))return t.persist(),void S.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"});var P={content:u};if(v||(P.reshipmentSettings=r||"allowed",P.commentPermission=a||"all"),P.rewardSetting={canReward:Boolean(o),tagline:o},m&&m.length&&(!d||h)&&(P.disclaimerStatus=l?"open":"close",P.disclaimerType=m[0].type),C&&(P.isCircle=s),c){if(x.default.trackEvent(e,{action:"Click",id:5733,name:"回答"}),f.isBefore(c,f.addMinutes(new Date,30)))return void S.a.alert(i.a.createElement("div",{style:{textAlign:"center"}},"只能设置 30 分钟后的定时时间"),{title:"定时发布"});P.publishAt=Math.floor(c/1e3)+0}Promise.resolve(b(P)).then(function(){d&&P.disclaimerStatus&&j(d.id,P.disclaimerStatus,P.disclaimerType),d&&_("answer",d.id),v||x.default.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(g),author_member_hash_id:k.id}]}}],status:{result:"Success",event:{action:"Submit"}}}),"commercial"===E&&y("已发布！由品牌筛选后进入推荐区。")}).catch(function(){v||x.default.trackEvent(e,{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})});var T=v?"Edit":"Answer";"Answer"===T&&x.default.trackEvent(e,{id:4930}),x.default.trackEvent(e,{action:T,is_intent:!1})}}}else e.props.onCancel()}),this.onCancel=function(){var t=e.props.onCancel;e.editable.hasVideo("upload")?e.handleError("video-uploading-draft"):e.editable.hasImage("upload")?e.handleError("image-uploading-draft"):(e.hasEdited&&e.syncDraftImmediately(),t&&t())},this.onFocus=function(){"org"===e.props.question.questionType&&e.shouldAnswerOrgQuestionModalShow&&e.handleAnswerOrgQuestionModalShow(),e.setState({focusing:!0})},this.onFocusWithAuth=function(){return e.onFocusAuthChecked?e.onFocus():(e.onFocusAuthChecked=!0,e.context.authRequired(e.onFocus)())},this.onSelectText=function(t){e.setState({selectedText:t.replace(/\s/g,"")})},this.onLoadStart=function(){e.setState({loadingShown:!0})},this.onLoadEnd=function(){e.setState({loadingShown:!1})},this.getToolbarPlugins=function(){var t=e.state,n=t.isFullscreen,r=t.isLeaveActive;return(!n||r)&&i.a.createElement(k.a,{key:"enterFullscreen",icon:i.a.createElement(h.a,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:e.toggleFullscreen},"全屏模式")},this.getToolbarMenuPlugins=function(){var t=e.state.scheduledPublishAt;return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.c,{onClick:e.showDraftHistoryModal},i.a.createElement(y,{text:!0}),"历史版本"),e.canUseScheduledPublish&&i.a.createElement(k.c,{onClick:function(){e.setUseScheduledPublish(!t),x.default.trackEvent(e,{action:"Click",id:5730,name:"回答"})}},i.a.createElement(g,{text:!0}),t?"取消定时发布":"定时发布"))},this.toggleFullscreen=function(){var t=e.state.isFullscreen,n=function(){var t=e.scroller.querySelector(".Editable");return t?t.offsetTop:0};e.scrollTop=t?e.scroller.scrollTop-n():Math.max(-e.scroller.getBoundingClientRect().top,0),e.setState({isFullscreen:!t},function(){e.state.isFullscreen?e.scrollTop>0&&(e.scroller.scrollTop=e.scrollTop+n()):window.scrollTo(0,e.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+e.scrollTop)})},this.exitFullscreen=function(){e.cloneEditor.resetWithValue(e.getCloneContent());e.fullscreenContent.addEventListener("animationend",function t(){e.fullscreenContent.removeEventListener("animationend",t),e.setState({isLeaveActive:!1}),e.toggleFullscreen()}),e.setState({isLeaveActive:!0})},this.handleFullscreenRef=function(t){t?R.hide():(R.show(),e.setState({isToolbarSticky:!1}))},this.handleScroll=function(){e.isHandleScrollPending||(e.isHandleScrollPending=!0,requestAnimationFrame(function(){var t=e.state,n=t.isFullscreen,r=t.isToolbarSticky,a=!1;if(n&&e.scroller){var o=e.scroller.querySelector(".Editable-toolbar");a=!!o&&e.scroller.scrollTop===o.offsetTop}a!==r&&e.setState({isToolbarSticky:a}),e.isHandleScrollPending=!1}))},this.showDraftHistoryModal=function(){e.syncDraft.flush(),e.setState({draftHistoryModalShown:!0}),x.default.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},this.hideDraftHistoryModal=function(){e.setState({draftHistoryModalShown:!1})},this.closeRewardModal=function(){e.label.click()},this.handleUploadStart=function(){e.setState({isUploading:!0})},this.handleUploadEnd=function(){e.setState({isUploading:!1})},this.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},this.handleAnswerOrgQuestionModalShow=function(){e.setState({answerModalShown:!0}),e.shouldAnswerOrgQuestionModalShow=!1},this.handleAnswerModalHide=function(){e.setState({answerModalShown:!1})},this.syncDraftImmediately=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.content).toHTML(),n=e.state.lastUpdatedTime,r=Math.floor((new Date).getTime()/1e3),a=void 0;a=!n||e.startCompositionTime-n>180?r-e.startCompositionTime:r-n,e.setState({isTyping:!1}),t?e.updateDraft(t,a).then(function(t){t.payload&&t.payload.updatedTime&&e.setState({lastUpdatedTime:t.payload.updatedTime}),e.loggingDeltaTime=!1,delete e.startCompositionTime,x.default.trackEvent(e,{action:"AutoSave"})}):e.deleteDraft()},this.syncDraft=Object(A.debounce)(this.syncDraftImmediately,2e3),this.updateDraft=function(t,n){var r=e.props,a=r.question.id,o=r.draft,i=r.addDraft,s=r.updateDraft;return o?s(a,t,n):i(a,t,n)},this.focus=function(){e.editable&&e.editable.focus()},this.hasVideo=function(){return!!e.editable&&e.editable.hasVideo()},this.handleChangeCommentPermission=function(t,n){var r=void 0===n?t:n;e.setState({commentPermission:r})},this.handleReshipmentSettings=function(t){"need_payment"!==t||e.props.currentUser.caEnabled||window.open("/copyright/invite"),e.setState({reshipmentSettings:t})},this.handleError=function(t,n){Object(Ze.b)(t,n,e.props.showNotification)},this.handleBeforeVideoUpload=function(){var t=e.props.question;return!t.relationship||!t.relationship.isAnonymous},this.handleReverted=function(t){e.editable.resetWithValue(t.draft.content)},this.unactivateReward=function(){e.setState({rewardModalShown:!1})},this.activateReward=function(){e.setState({rewardModalShown:!0})},this.onChangecircleSettings=function(t){var n=t,r=e.context.onChangecircleSettings;e.setState({isChecked:n}),r(n)}},Be=Qe))||Be;t.a=ct},2020:function(e,t,n){"use strict";var r,a,o,i=function(e){return e.componentList.filter(function(e){var t=e.component;return Boolean(t)}).map(function(e){return e.component})},s=n(0),l=n.n(s),c=n(1),u=n.n(c),p=n(10),f=n(28),d=n.n(f),m=n(8),h=n(1898),v=n(4),b=(n(40),n(47)),y=n(117),w=n(136),g=n(11),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k={answer:u.a.object.isRequired,renderThankButtonText:u.a.func,zaInfo:u.a.number},j=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(k)),["updateAnswerThank"]),_=Object(y.a)(null)((o=a=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.buttonRef=l.a.createRef(),r.handleUpdateThanked=r.context.authRequired(function(){var e=r.props,t=e.answer,n=t.id,a=t.relationship.isThanked,o=e.updateAnswerThank,i=e.zaInfo,s=!a;m.default.trackEvent(r.buttonRef.current,E({action:s?"Thank":"UnThank",element:"Button"},i&&{id:i})),o(n,s)},g.N.thank),C(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.a.Component),O(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.renderThankButtonText,a=d()(this.props,j),o=r(n);return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.c,{keyMap:{THANK:"t"},handlers:{THANK:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),l.a.createElement(v.c,E({onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:h.a,label:o},a)))}}]),t}(),a.contextTypes={authRequired:u.a.func},a.propTypes=k,a.defaultProps={renderThankButtonText:function(e){var t=e.relationship;return(t=void 0===t?{}:t).isThanked?"取消感谢":"感谢"}},r=o))||r,S=Object(p.connect)(null,{updateAnswerThank:b.H})(_);n.d(t,"b",function(){return i}),n.d(t,"a",function(){return S})},2022:function(e,t,n){"use strict";var r,a=n(0),o=n.n(a),i=n(10),s=n(508),l=n.n(s),c=n(820),u=n.n(c),p=n(138),f=n(506),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=Object(i.connect)(function(e){return{ua:e.env.userAgent}},{loadBrandEntityTrackUrl:f.b})(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={urls:null,logged:!1},r.handleObserve=function(e){e&&r.log()},r.log=function(){r.state.logged||Promise.resolve(r.state.urls||r.load().then(function(e){return e?(e=r.normalize(e),r.setState({urls:e}),e):[]})).then(function(e){return e.forEach(function(e){return e&&Object(p.c)(e)})}).then(function(){return r.setState({logged:!0})})},r.load=function(){var e=r.props,t=e.type,n=e.id;return(0,e.loadBrandEntityTrackUrl)({type:t,id:n}).then(function(e){return e&&e.payload&&e.payload.data})},r.normalize=function(e){var t=u()(),n=r.props,a=n.ua,o=n.id,i=n.type,s=encodeURIComponent("其他");a.Android?s="android":a.iOS&&(s="ios");var l={os:s,id:o,sessionId:t,type:i};return e.map(function(e){return function(e,t){var n=t.os,r=t.id,a=t.sessionId,o=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",a).replace("__SESSIONID__",a).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",o)}(e,l)})},m(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),d(t,[{key:"render",value:function(){return!this.state.logged&&o.a.createElement(l.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),t}())||r;n.d(t,"a",function(){return h})},2023:function(e,t,n){},2024:function(e,t,n){},2025:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M18.453 7.992l-1.833-1.65.964-.978a1.223 1.223 0 0 1 1.73-.012l.005.006a1.24 1.24 0 0 1 .007 1.748l-.873.886zm-1.178 1.194l-5.578 5.66-1.935.697a.393.393 0 0 1-.504-.504l.697-1.935 5.488-5.567 1.832 1.65zM7.58 5.848l5.654.006-1.539 1.991-3.666.012A1.02 1.02 0 0 0 7 8.868v7.993c0 .558.46 1.01 1.029 1.01l7.941-.01c.568 0 1.03-.453 1.03-1.012v-4.061l2-1.442v6.002c0 1.397-1.2 2.501-2.62 2.501H7.574C6.153 19.85 5 18.717 5 17.32V8.35c0-1.397 1.16-2.502 2.58-2.502z"}))};i.defaultProps={name:"EditSurround"},t.a=i},2026:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M6 3.956v16.088C6 21.124 6.517 22 7.9 22c.326 0 .533-.087.896-.236L22 13.784c.571-.355 1.143-.87 1.143-1.784S22.57 10.571 22 10.216L8.796 2.236C8.433 2.087 8.226 2 7.9 2 6.514 2 6 2.876 6 3.956z"}))};i.defaultProps={name:"Play"},t.a=i},2028:function(e,t,n){},2029:function(e,t,n){},2030:function(e,t,n){},2031:function(e,t,n){},2032:function(e,t,n){},2033:function(e,t,n){},2034:function(e,t,n){},2035:function(e,t,n){},2036:function(e,t,n){},2037:function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},2038:function(e,t,n){},2039:function(e,t,n){},2040:function(e,t,n){},2041:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2042);t.debounce=r.debounce},2042:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(137));t.debounce=function(e,t,n){var r=!1,o=a.default(function(){r=!1,e.apply(void 0,arguments)},t,n);return Object.assign(function(){r=!0,o.apply(void 0,arguments)},{cancel:o.cancel,flush:o.flush,isPending:function(){return r}})}},2043:function(e,t,n){var r=n(2044),a=n(1974),o=n(492),i=n(499);e.exports=function(e,t,n){e=i(e);var s=(t=o(t))?a(e):0;return t&&s<t?r(t-s,n)+e:e}},2044:function(e,t,n){var r=n(2045),a=n(826),o=n(2046),i=n(1950),s=n(1974),l=n(2049),c=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":a(t)).length;if(n<2)return n?r(t,e):t;var u=r(t,c(e/s(t)));return i(t)?o(l(u),0,e).join(""):u.slice(0,e)}},2045:function(e,t){var n=9007199254740991,r=Math.floor;e.exports=function(e,t){var a="";if(!e||t<1||t>n)return a;do{t%2&&(a+=e),(t=r(t/2))&&(e+=e)}while(t);return a}},2046:function(e,t,n){var r=n(500);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},2047:function(e,t,n){var r=n(827)("length");e.exports=r},2048:function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[o,i,s].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[o+r+"?",r,i,s,n].join("|")+")",p=RegExp(a+"(?="+a+")|"+u+c,"g");e.exports=function(e){for(var t=p.lastIndex=0;p.test(e);)++t;return t}},2049:function(e,t,n){var r=n(2050),a=n(1950),o=n(2051);e.exports=function(e){return a(e)?o(e):r(e)}},2050:function(e,t){e.exports=function(e){return e.split("")}},2051:function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[o,i,s].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[o+r+"?",r,i,s,n].join("|")+")",p=RegExp(a+"(?="+a+")|"+u+c,"g");e.exports=function(e){return e.match(p)||[]}},2052:function(e,t,n){var r=n(828)();e.exports=r},2053:function(e,t,n){},2054:function(e,t,n){},2055:function(e,t,n){},2056:function(e,t,n){},2057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),a=o(n(74));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return r.default.createElement(a.default,Object.assign({width:"150",height:"120",viewBox:"0 0 150 120"},e),r.default.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0 0 98.998 28H50.002A2.996 2.996 0 0 0 47 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0 1 44 93V30.997A5.996 5.996 0 0 1 50.002 25h48.996A5.996 5.996 0 0 1 105 30.998V93a2 2 0 0 1-.396 1.2l-4.112-2.66z"}),r.default.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 0 1-.999.999H56a.993.993 0 0 1-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 1 1 0 3h-35.99A1.499 1.499 0 0 1 55 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 1 1 0 3h-24.99A1.499 1.499 0 0 1 55 75.5z"}))};t.default=i},2058:function(e,t,n){},2059:function(e,t,n){},2060:function(e,t,n){},2061:function(e,t,n){},2062:function(e,t,n){},2063:function(e,t,n){},2064:function(e,t,n){},2065:function(e,t,n){},2066:function(e,t,n){},2067:function(e,t,n){},2068:function(e,t,n){},2069:function(e,t,n){},2070:function(e,t,n){var r=n(2071);e.exports=function(e){return r(2,e)}},2071:function(e,t,n){var r=n(2072),a="Expected a function";e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError(a);return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},2072:function(e,t,n){var r=n(2073);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},2073:function(e,t,n){var r=n(2074),a=1/0,o=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===a||e===-a?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},2074:function(e,t,n){var r=n(200),a=n(354),o=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?o:+e}},2075:function(e,t,n){},2076:function(e,t,n){},2077:function(e,t,n){},2078:function(e,t,n){},2079:function(e,t,n){},2080:function(e,t,n){},2081:function(e,t,n){},2082:function(e,t,n){},2083:function(e,t,n){},2084:function(e,t,n){},2085:function(e,t,n){},2086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),a=o(n(74));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return r.default.createElement(a.default,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("path",{fill:"#C2A469",d:"M12.17 2.18l2.077.372c.613.11 1.092.588 1.201 1.2l.372 2.079c.038.211.12.412.243.588L17.27 8.15c.356.51.356 1.188 0 1.698l-1.207 1.732a1.485 1.485 0 0 0-.243.588l-.372 2.078a1.485 1.485 0 0 1-1.2 1.201l-2.079.372c-.211.038-.412.12-.588.243L9.85 17.27a1.485 1.485 0 0 1-1.698 0l-1.732-1.207a1.485 1.485 0 0 0-.588-.243l-2.078-.372a1.485 1.485 0 0 1-1.201-1.2l-.372-2.079a1.485 1.485 0 0 0-.243-.588L.73 9.85a1.485 1.485 0 0 1 0-1.698l1.207-1.732c.122-.176.205-.377.243-.588l.372-2.078a1.485 1.485 0 0 1 1.2-1.201l2.079-.372c.211-.038.412-.12.588-.243L8.15.73a1.485 1.485 0 0 1 1.698 0l1.732 1.207.588.243z"}),r.default.createElement("path",{fill:"#FFF",d:"M9 11c-.481 0-.893-.19-1.236-.571a1.982 1.982 0 0 1-.514-1.373V5.945c0-.535.171-.993.514-1.374C8.107 4.191 8.52 4 9 4s.893.19 1.236.571c.343.381.514.839.514 1.374v3.11c0 .535-.171.993-.514 1.374-.343.38-.755.571-1.236.571zm3.143-2.889a.367.367 0 0 1 .107.264v.75c0 .863-.278 1.614-.832 2.253-.555.639-1.24 1.005-2.057 1.098v1.774c.002.2-.119.301-.361.301s-.363-.1-.361-.301v-1.774c-.816-.093-1.502-.46-2.057-1.098a3.326 3.326 0 0 1-.832-2.253v-.75c0-.102.036-.19.107-.264A.34.34 0 0 1 6.111 8a.34.34 0 0 1 .254.111.367.367 0 0 1 .107.264v.75c0 .723.248 1.341.742 1.854.495.514 1.09.771 1.786.771s1.291-.257 1.786-.77a2.578 2.578 0 0 0 .742-1.855v-.75c0-.102.035-.19.107-.264A.341.341 0 0 1 11.889 8c.098 0 .182.037.254.111z"})))};t.default=i},2088:function(e,t,n){"use strict";var r,a,o,i=n(1),s=n.n(i),l=n(0),c=n.n(l),u=n(163),p=n(46),f=n(29),d=n(233),m=n(1923),h=n(1924),v=n(102),b=n(1920),y=n(79),w=n(161),g=(n(2134),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=Object(w.a)(function(e){var t=e.favlist,n=e.trackCardShow,r=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:r}})((o=a=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},r.handleCommentsShown=function(e,t){r.setState(t)},r.handleCommentsHide=function(){r.setState({commentsShown:!1})},O(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["Component"]),E(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.favlist,a=t.favlist,o=a.id,i=a.type,s=a.title,l=a.updatedTime,w=a.answerCount,E=a.followerCount,O=a.isFollowing,C=a.isPublic,k=a.creator,j=void 0===k?{}:k,_=a.commentCount,S=t.status,P=t.action,T=t.lastreadTouchable,N=t.zaInfos,A=N.follow,R=N.options,x=t.renderOptions,I=this.state,M=I.commentsShown,L=I.commentsAutoFocus,D=I.commentPattern,q="/collection/"+o,B=c.a.createElement("a",{href:q,target:"_blank"},s);if(n===d.c.plain)return c.a.createElement(d.e,{data:r,link:q,title:B});var z={id:o,type:i};return n===d.c.default?c.a.createElement(d.e,{data:r,link:q,title:c.a.createElement("div",{className:"FavlistItem-title"},B,!C&&c.a.createElement(f.a,{grey:!0,className:"FavlistItem-lockIcon",name:"lock"})),meta:S||c.a.createElement(d.d,null,Object(u.toDateString)(l)+" 更新",Object(p.formatNumber)(w)+" 条内容",Object(p.formatNumber)(E)+" 人关注"),extra:P}):c.a.createElement(d.e,{data:r,link:q,onRef:function(t){e.contentItem=t},title:B,lastreadTouchable:T},c.a.createElement(d.b,{key:"favlist-item-cells"},c.a.createElement("div",null,c.a.createElement("span",null,"关注数："),Object(p.formatNumber)(E)),c.a.createElement("div",null,c.a.createElement("span",null,"最后更新于："),Object(u.toDateString)(l)),c.a.createElement("div",null,c.a.createElement("span",null,"作者："),c.a.createElement(y.a,{user:j}))),c.a.createElement(d.a,{key:"favlist-item-actions"},c.a.createElement(v.a,g({},z,{isFollowing:O,zaId:A})),c.a.createElement(m.a,{onClick:this.handleCommentsShown,commentsShown:M,count:_}),c.a.createElement(b.a,g({},z,{title:s,authorName:j&&j.name})),x&&x(function(){return e.contentItem},R)),c.a.createElement(h.a,{parent:r,commentPattern:D,shown:M,autoFocus:L,onClose:this.handleCommentsHide}))}}]),t}(),a.propTypes={preset:s.a.oneOf(Object.values(d.c)),zaInfos:s.a.shape({follow:s.a.number,options:s.a.number}),renderOptions:s.a.func},a.defaultProps={preset:d.c.default,zaInfos:{}},r=o))||r;t.a=C},2097:function(e,t,n){"use strict";var r=o(n(2112)),a=o(n(2013));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:a.default,CSSTransitionGroup:r.default}},2099:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-3.681a1.17 1.17 0 0 1-.846-.344 1.143 1.143 0 0 1-.354-.856c0-.328.118-.61.354-.847.236-.235.518-.353.846-.353.328 0 .61.115.846.344.236.23.354.515.354.856 0 .342-.118.626-.354.856-.236.229-.518.344-.846.344zm2.761-7.398c-.228.232-.637.621-1.227 1.17-.163.154-.295.29-.393.407a1.643 1.643 0 0 0-.22.32 1.614 1.614 0 0 0-.111.293c-.026.097-.066.267-.119.512-.09.518-.377.777-.857.777a.86.86 0 0 1-.63-.254c-.17-.17-.255-.421-.255-.755 0-.419.062-.78.187-1.087.125-.307.29-.576.497-.808.206-.231.485-.506.835-.825.307-.28.53-.49.666-.632.137-.142.252-.3.346-.474.093-.175.14-.364.14-.568 0-.399-.143-.735-.428-1.01-.286-.273-.655-.41-1.106-.41-.528 0-.917.138-1.166.414-.25.277-.46.684-.634 1.222-.163.563-.472.845-.928.845a.896.896 0 0 1-.68-.295c-.185-.197-.278-.41-.278-.64 0-.473.147-.952.44-1.438.292-.486.72-.888 1.28-1.207C10.683 6.16 11.339 6 12.087 6c.696 0 1.31.133 1.844.4a3.02 3.02 0 0 1 1.234 1.087c.291.459.436.957.436 1.495 0 .423-.083.794-.248 1.113a3.413 3.413 0 0 1-.59.826z",fillRule:"evenodd"}))};i.defaultProps={name:"Help"},t.a=i},2104:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(2),u=n.n(c),p=n(1893),f=n(1892),d=n(1894),m=n(483),h=(n(507),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var b=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),v(t,[{key:"render",value:function(){var e=this.props,t=e.isOrg,n=e.badge,r=e.noLink,a=e.className,o=e.iconClassName,i=Object(m.a)(n)||{},s=i.identityInfo,c=i.bestAnswererInfo,v="https://www.zhihu.com/question/48509984",b=void 0,y=void 0;if(s?(b=p.a,y=void 0===t?"已认证的帐号":t?"已认证的官方帐号":"已认证的个人",c?(b=f.a,y=c+" · "+y):v="https://www.zhihu.com/question/48510028"):c&&(b=d.a,y=c),!b)return null;var w={className:u()("UserLink-badge",a),"data-tooltip":y,children:l.a.createElement(b,{center:!0,size:18,className:o})};return r?l.a.createElement("span",w):l.a.createElement("a",h({},w,{href:v,target:"_blank"}))}}]),t}(),r.propTypes={badge:i.a.array,isOrg:i.a.bool,noLink:i.a.bool,className:i.a.string,iconClassName:i.a.string},a)},2109:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o),s=n(4),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.handleClick=function(){var e=o.props;(0,e.onSelect)(e.page)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),l(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,r=e.className;return a.a.createElement(s.c,{preset:s.b.Plain,className:i()("PaginationButton",{"PaginationButton--current":n},r),onClick:this.handleClick,disabled:n},t)}}]),t}(),u=(n(2142),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},function(t,n){return n+e})},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),u(t,[{key:"render",value:function(){var e,t=this.props,n=t.onSelect,r=t.className,o=t.clickCallback,s=this.props.current,l=this.props.total,u=o&&(e=o,function(){e.apply(void 0,arguments)})||n,d=function(e,t){var n="...";return t<=5?f(1,t):e>t-3?[1,n].concat(p(f(t-3,3)),[t]):e<=3?[1].concat(p(f(2,3)),[n,t]):[1,n].concat(p(f(e-Math.floor(1.5),3)),[n,t])}(s,l);return a.a.createElement("div",{className:i()("Pagination",r)},s>1&&s<=l&&a.a.createElement(c,{className:"PaginationButton-prev",onSelect:u,text:"上一页",page:s-1}),d.map(function(e,t){return"number"==typeof e?a.a.createElement(c,{onSelect:u,text:e,page:e,key:t,isCurrent:s===e}):a.a.createElement("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)}),s>0&&s<l&&a.a.createElement(c,{className:"PaginationButton-next",onSelect:u,text:"下一页",page:s+1}))}}]),t}();d.defaultProps={current:1,total:1,onSelect:function(){}},n.d(t,"a",function(){return d})},2111:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o),s=(n(2275),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),l(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.alt,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","alt"]);return a.a.createElement("img",s({className:i()("ImageAlias",t),alt:n},r))}}]),t}();t.a=c},2112:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=c(n(0)),o=c(n(1955)),i=c(n(2013)),s=c(n(2118)),l=n(2014);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,l.transitionTimeout)("Appear"),(0,l.transitionTimeout)("Enter"),(0,l.transitionTimeout)("Leave");var p=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=r=u(this,e.call.apply(e,[this].concat(i))),r._wrapChild=function(e){return a.default.createElement(s.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return a.default.createElement(i.default,r({},this.props,{childFactory:this._wrapChild}))},t}(a.default.Component);p.displayName="CSSTransitionGroup",p.propTypes={},p.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=p,e.exports=t.default},2113:function(e,t,n){"use strict";var r=n(348),a=n(343),o=n(2114);e.exports=function(){function e(e,t,n,r,i,s){s!==o&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},2114:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2115:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter(function(e){return null!=e})).length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},2116:function(e,t,n){e.exports=n(34)(21)},2117:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},a=[];for(var o in e)t.hasOwnProperty(o)?a.length&&(r[o]=a,a=[]):a.push(o);var i=void 0,s={};for(var l in t){if(r.hasOwnProperty(l))for(i=0;i<r[l].length;i++){var c=r[l][i];s[r[l][i]]=n(c)}s[l]=n(l)}for(i=0;i<a.length;i++)s[a[i]]=n(a[i]);return s};var r=n(0)},2118:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=f(n(2119)),o=f(n(2121)),i=f(n(830)),s=n(2122),l=f(n(0)),c=f(n(1955)),u=n(18),p=n(2014);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=[];s.transitionEnd&&m.push(s.transitionEnd),s.animationEnd&&m.push(s.animationEnd);c.default.node,p.nameShape.isRequired,c.default.bool,c.default.bool,c.default.bool,c.default.number,c.default.number,c.default.number;var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=d(this,e.call.apply(e,[this].concat(o))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,u.findDOMNode)(this);if(r){var i=this.props.name[e]||this.props.name+"-"+e,l=this.props.name[e+"Active"]||i+"-active",c=null,p=void 0;(0,a.default)(r,i),this.queueClassAndNode(l,r);var f=function(e){e&&e.target!==r||(clearTimeout(c),p&&p(),(0,o.default)(r,i),(0,o.default)(r,l),p&&p(),t&&t())};n?(c=setTimeout(f,n),this.transitionTimeouts.push(c)):s.transitionEnd&&(p=function(e,t){return m.length?m.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){m.length&&m.forEach(function(n){return e.removeEventListener(n,t,!1)})}}(r,f))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,i.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,a.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=r({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,l.default.cloneElement(l.default.Children.only(this.props.children),e)},t}(l.default.Component);h.displayName="CSSTransitionGroupChild",h.propTypes={},t.default=h,e.exports=t.default},2119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r,a=n(2120),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},2120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},2121:function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},2122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,a=n(356);var o="transform",i=void 0,s=void 0,l=void 0,c=void 0,u=void 0,p=void 0,f=void 0,d=void 0,m=void 0,h=void 0,v=void 0;if(((r=a)&&r.__esModule?r:{default:r}).default){var b=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),r=void 0,a=void 0,o="",i=0;i<n.length;i++){var s=n[i];if(s+"TransitionProperty"in e){o="-"+s.toLowerCase(),r=t[s]("TransitionEnd"),a=t[s]("AnimationEnd");break}}!r&&"transitionProperty"in e&&(r="transitionend");!a&&"animationName"in e&&(a="animationend");return e=null,{animationEnd:a,transitionEnd:r,prefix:o}}();i=b.prefix,t.transitionEnd=s=b.transitionEnd,t.animationEnd=l=b.animationEnd,t.transform=o=i+"-"+o,t.transitionProperty=c=i+"-transition-property",t.transitionDuration=u=i+"-transition-duration",t.transitionDelay=f=i+"-transition-delay",t.transitionTiming=p=i+"-transition-timing-function",t.animationName=d=i+"-animation-name",t.animationDuration=m=i+"-animation-duration",t.animationTiming=h=i+"-animation-delay",t.animationDelay=v=i+"-animation-timing-function"}t.transform=o,t.transitionProperty=c,t.transitionTiming=p,t.transitionDelay=f,t.transitionDuration=u,t.transitionEnd=s,t.animationName=d,t.animationDuration=m,t.animationTiming=h,t.animationDelay=v,t.animationEnd=l,t.default={transform:o,end:s,property:c,timing:p,delay:f,duration:u}},2126:function(e,t,n){"use strict";function r(e){return/^[a-z0-9]{32}$/.test(e)}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=/#comment-(\d+)/;function o(e){var t=e.match(a);return t&&t[1]}},2127:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};i.defaultProps={name:"Weibo"},t.a=i},2128:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};i.defaultProps={name:"WeChat"},t.a=i},2129:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M10.229 17.516c-.318.327-.75.484-1.199.484-.453 0-.884-.16-1.202-.488l-4.335-4.47a1.77 1.77 0 0 1 .007-2.459 1.663 1.663 0 0 1 2.397.01l3.137 3.246 9.072-9.329a1.662 1.662 0 0 1 2.397 0c.663.681.663 1.786 0 2.466L10.23 17.516z",fillRule:"evenodd"}))};i.defaultProps={name:"Check"},t.a=i},2130:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleUp"},t.a=i},2131:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleDown"},t.a=i},2134:function(e,t,n){},2142:function(e,t,n){},2158:function(e,t,n){},2161:function(e,t,n){},2171:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(1956),a=n(46),o=function(e){return{name:"description",property:"og:description",content:e}},i=function(e,t){if(e&&e.detail){var n=Object(r.b)(e.detail,100);if(n)return[o(n)]}else if(t&&t.content)return s(t);return[]},s=function(e){if(e&&e.content){var t=Object(r.b)(e.content,100);if(t)return[o(t)]}return[]},l=function(e){if(e){var t=e.headline,n=void 0===t?"":t,r=e.answerCount,i=void 0===r?0:r,s=e.voteupCount,l=void 0===s?0:s,c=n+" 回答数 "+Object(a.formatNumber)(i)+"，获得 "+Object(a.formatNumber)(l)+" 次赞同";return[o(c)]}return[]}},2172:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z",fillRule:"evenodd"}))};i.defaultProps={name:"Comment"},t.a=i},2173:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M13.8 4.903h-3.6v.943c0 .314-.082.609-.228.864H13.8V4.903zm3.6 0h2.85c.414 0 .75.333.75.735v.337a.742.742 0 0 1-.75.735H17.4V4.903zm-10.8 0H3.75a.742.742 0 0 0-.75.735v.337c0 .404.336.735.75.735h3.082a1.721 1.721 0 0 1-.232-.864v-.943zM3 9.252c0-.407.335-.735.75-.735h16.5c.414 0 .75.33.75.737v10.274a.742.742 0 0 1-.75.736H3.75A.74.74 0 0 1 3 19.53V9.252zm4.5 1.975v1.807h1.8v-1.807H7.5zm0 4.516v1.807h1.8v-1.807H7.5zm3.6 0v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zm-3.6-4.516v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zM7.5 4.893c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893zm7.2 0c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893z"}))};i.defaultProps={name:"Calendar"},t.a=i},2174:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M19.472 3.373c.975-.982 2.136.177 1.158 1.157 0 0-3.148 3.165-4.581 4.584h2.928c.495 0 .77.412.773.8.004.462-.338.804-.773.802H14.06a.778.778 0 0 1-.773-.773v-4.9c.062-.432.404-.774.801-.771.453.002.798.347.801.771v2.913c1.14-1.134 3.793-3.789 4.583-4.583zm-9.53 9.913c.424.002.77.347.771.771v4.9c-.062.432-.404.774-.801.771-.453-.002-.798-.347-.801-.771v-2.913c-1.14 1.134-3.793 3.788-4.583 4.583-.975.982-2.136-.177-1.158-1.156 0 0 3.148-3.165 4.581-4.583H5.023c-.497 0-.772-.413-.774-.801-.003-.462.339-.804.774-.801h4.919z",fillRule:"evenodd"}))};i.defaultProps={name:"FullscreenExit"},t.a=i},2175:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M20.227 3a.777.777 0 0 1 .773.773V8.67c-.062.432-.404.774-.801.772-.453-.003-.799-.347-.801-.772V5.758a2194.05 2194.05 0 0 0-4.584 4.583c-.975.983-2.136-.177-1.158-1.155 0 0 3.148-3.166 4.582-4.584h-2.93c-.496 0-.77-.413-.773-.801-.003-.462.339-.804.774-.801h4.918zM9.187 13.659c.974-.983 2.135.177 1.155 1.155 0 0-3.147 3.166-4.581 4.584h2.93c.494 0 .77.413.772.801.004.462-.338.804-.773.801H3.772A.776.776 0 0 1 3 20.229v-4.9c.062-.432.404-.774.801-.772.453.003.799.347.801.772v2.913c1.14-1.134 3.794-3.789 4.584-4.583z",fillRule:"evenodd"}))};i.defaultProps={name:"FullscreenEnter"},t.a=i},2176:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-1.25a8.75 8.75 0 1 0 0-17.5 8.75 8.75 0 0 0 0 17.5zm0-2.431a1.17 1.17 0 0 1-.846-.344 1.143 1.143 0 0 1-.354-.856c0-.328.118-.61.354-.847.236-.235.518-.353.846-.353.328 0 .61.115.846.344.236.23.354.515.354.856 0 .342-.118.626-.354.856-.236.229-.518.344-.846.344zm1.534-6.228c-.163.154-.755.587-.843 1.532-.09.518-.377.777-.857.777a.86.86 0 0 1-.63-.254c-.17-.17-.255-.421-.255-.755 0-.419 0-1.055.684-1.895.206-.231.485-.506.835-.825.307-.28 1.158-.941 1.152-1.674a1.357 1.357 0 0 0-.428-1.01c-.286-.273-.655-.41-1.106-.41-.528 0-.917.138-1.166.414-.25.277-.46.684-.634 1.222-.163.563-.472.845-.928.845a.896.896 0 0 1-.68-.295c-.185-.197-.278-.41-.278-.64 0-.473.147-.952.44-1.438.292-.486.72-.888 1.28-1.207C10.683 6.16 11.339 6 12.087 6c.696 0 2.318.166 3.078 1.487.291.459.436.957.436 1.495 0 .423-.134 1.218-.839 1.94-.228.23-.637.62-1.227 1.169z",fillRule:"evenodd"}))};i.defaultProps={name:"HelpOutline"},t.a=i},2177:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r,a,o=n(1),i=n.n(o),s=n(0),l=n.n(s),c=n(2109),u=n(9),p=n(5),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),f(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.page,r=e.prePage,a=e.onLoad,o=e.isNextLoaded;t||a(Object(p.c)(n),r),o||a(Object(p.c)(n+1),r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,a=e.page,o=e.prePage,i=e.onLoad,s=e.total;n||t||i(Object(p.c)(a),o),!r&&a<s&&a!==this.props.page&&i(Object(p.c)(a+1),o)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.total,r=e.page,a=e.onPaginationClick,o=e.isFetching,i=e.placeholder;return l.a.createElement("div",null,t,o&&i,n>1&&l.a.createElement(c.a,{current:r,total:n,clickCallback:a}))}}]),t}(),r.propTypes={isFetching:i.a.bool.isRequired,isDrained:i.a.bool.isRequired,onLoad:i.a.func.isRequired,total:i.a.number,page:i.a.number,prePage:i.a.number,placeholder:i.a.node,onPaginationClick:i.a.func.isRequired,isNextLoaded:i.a.bool},r.defaultProps={prePage:u.b,page:1},a)},2184:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t},e.exports=t.default},2194:function(e,t,n){"use strict";var r,a,o=n(0),i=n.n(o),s=n(2),l=n.n(s),c=n(29),u=n(4),p=n(471),f=n(480),d=n(25),m=n(1958),h=n(1),v=n.n(h),b=(n(2261),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var y=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["PureComponent"]),b(t,[{key:"render",value:function(){var e=this.props.tips;return i.a.createElement("div",{className:"QuestionReviewInfo"},i.a.createElement("p",null,e))}}]),t}(),r.propsTypes={tips:v.a.string},a),w=n(1927),g=n(1956),E=(n(2262),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={previewImage:null,truncated:null},r.handleClick=function(e){var t=r.props,n=t.collapsed,a=t.onExpand;r.state.truncated.isTruncated&&n&&"function"==typeof a&&a(e),r.handlePreviewImage(e)},r.handlePreviewImage=function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&r.setState({previewImage:t})},r.handlePreviewImageClose=function(){r.setState({previewImage:null})},O(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),E(t,[{key:"componentWillMount",value:function(){if(Object(d.isBrowser)()){var e=this.truncateHTML(this.props);this.setState({truncated:e,hasVideo:e&&e.thumbnailInfo.id&&"video"===e.thumbnailInfo.type,thumbnail:e&&e.thumbnailInfo.url})}}},{key:"componentWillReceiveProps",value:function(e){var t=e.html;this.props.html!==t&&this.setState({truncated:this.truncateHTML(e)})}},{key:"truncateHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return Object(f.truncateHTML)(Object(m.a)(e.html),75,{placeholders:{img:" [图片] "}})}},{key:"render",value:function(){var e=this.props,t=e.html,n=e.collapsed,r=e.editable,a=e.onEdit,o=e.excerpt,s=e.reviewInfo,f=this.state,d=f.previewImage,m=f.truncated,h=f.hasVideo,v=f.thumbnail,b=m||{isTruncated:o.length<=t.length,content:o},E=b.isTruncated,O=b.content,C=s.tips,k=E&&n;return i.a.createElement("div",null,C&&h&&i.a.createElement(y,{tips:C}),i.a.createElement("div",{className:"QuestionHeader-detail"},i.a.createElement("div",{className:l()("QuestionRichText",{"QuestionRichText--expandable":E,"QuestionRichText--collapsed":n,"QuestionRichText--video":h&&n}),onClick:this.handleClick},h&&n&&i.a.createElement("div",{className:"QuestionRichText--wrapImgae"},i.a.createElement("img",{src:v,alt:"video",className:"QuestionRichText--image"})),i.a.createElement("div",null,n&&!O?i.a.createElement("span",null,Object(g.a)(o,75)):i.a.createElement(w.a,{itemProp:"text",tag:"span",html:k?O:t}),k&&i.a.createElement(u.c,{preset:"plain",className:"QuestionRichText-more"},"显示全部",i.a.createElement(c.a,{name:"arrow",className:"QuestionRichText-more-icon"}))),r&&!k&&i.a.createElement(u.c,{preset:"plain",className:"QuestionHeader-edit",onClick:a},i.a.createElement(c.a,{name:"modify",left:!0}),"修改"),d&&i.a.createElement(p.a,{img:d,onClose:this.handlePreviewImageClose}))))}}]),t}();t.a=C},2202:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 0 0 .255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 0 0 0-.385l-1.524-1.524a.273.273 0 0 0-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 0 0-1.111 0l-.882.88a.262.262 0 0 0 0 .371l1.465 1.465a.262.262 0 0 0 .37 0l.881-.881a.786.786 0 0 0 0-1.112z",fillRule:"evenodd"}))};i.defaultProps={name:"BadgeWrite"},t.a=i},2203:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M11.674 20.55a9.334 9.334 0 1 1 9.66-9.286c-.02 5.939-4.29 10.752-9.89 11.98-.837.185-1.808-.075-1.148-.84.502-.583.963-1.202 1.378-1.854zM12 17.444A6.222 6.222 0 1 0 12 5a6.222 6.222 0 0 0 0 12.444zm0-3.11a3.111 3.111 0 1 1 0-6.223 3.111 3.111 0 0 1 0 6.222z"}))};i.defaultProps={name:"Realm"},t.a=i},2204:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M4.125 21h15.75c.621 0 1.125-.593 1.125-1.324 0-.73-.504-1.323-1.125-1.323H4.125c-.621 0-1.125.593-1.125 1.323C3 20.407 3.504 21 4.125 21z"}),a.a.createElement("path",{d:"M15.69 3.826c0-.457-.418-.826-.92-.826H9.23c-.508 0-.92.37-.92.827V9.64H5.538c-1.015 0-1.255.526-.533 1.175l6.344 5.709a1 1 0 0 0 1.302 0l6.344-5.71c.722-.648.483-1.175-.535-1.175h-2.77V3.826z",fillRule:"nonzero"})))};i.defaultProps={name:"StickyUnset"},t.a=i},2205:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M4.125 3h15.75C20.496 3 21 3.593 21 4.324c0 .73-.504 1.323-1.125 1.323H4.125C3.504 5.647 3 5.054 3 4.324 3 3.593 3.504 3 4.125 3z"}),a.a.createElement("path",{d:"M15.69 20.174c0 .457-.418.826-.92.826H9.23c-.508 0-.92-.37-.92-.827V14.36H5.538c-1.015 0-1.255-.526-.533-1.175l6.344-5.709a1 1 0 0 1 1.302 0l6.344 5.71c.722.648.483 1.175-.535 1.175h-2.77v5.813z",fillRule:"nonzero"})))};i.defaultProps={name:"StickySet"},t.a=i},2261:function(e,t,n){},2262:function(e,t,n){},2263:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 11l-3.716 3.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l4.249-4.512a.758.758 0 0 1 1.064 0l4.246 4.512a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063 0L12.002 11z",fillRule:"evenodd"}))};i.defaultProps={name:"ArrowUp"},t.a=i},2275:function(e,t,n){},2276:function(e,t,n){},2277:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z",fillRule:"evenodd"}))};i.defaultProps={name:"Like"},t.a=i},2278:function(e,t,n){},2279:function(e,t,n){},2280:function(e,t,n){},2281:function(e,t,n){"use strict";var r=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormatedAdItem=d,t.getNormalizedInfo=m,t.default=void 0;var a=r(n(201)),o=r(n(351)),i=n(6),s=n(203),l=n(833),c=n(2282);function u(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题"};function d(e){var t=e.ad,n=(t.partyId,t.creatives),r=t.downloadSilent,a=void 0!==r&&r,i=t.isNewWebview,l=void 0!==i&&i,c=t.isSpeeding,u=t.cdnMap,d=t.displayAdvertisingTag,m=t.adVerb,h=t.loadTracks,v=t.closeTrack,b=(0,o.default)(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag","adVerb","loadTracks","closeTrack"]),y=(0,s.get)(t,"creatives[0].impressionTracks",[]),w=(0,s.get)(t,"creatives[0].clickTracks",[]),g={displayAdvertisingTag:d,downloadSilent:a,isNewWebview:l,isCdnSpeeding:c,cdnMap:u},E=f[m],O=n.map(function(e){return function(e,t){var n=(0,s.get)(e,"target",{}),r=n.voteupCount,a=n.commentCount,i=n.followerCount,l=n.answerCount,c=(0,o.default)(n,["voteupCount","commentCount","followerCount","answerCount"]),u=e.landingUrl,f=e.appPromotionUrl,d=e.deepUrl,m=e.packageName,h=e.title,v=e.nativeUrl,b=void 0===v?"":v,y=e.window,w=e.imageRatioExtra,g=e.brand,E=void 0===g?{}:g,O=e.thumbnailExtraInfo,C=e.cta,k=(C=void 0===C?{}:C).value,j=void 0===k?"":k,_=e.button,S=e.description,P=(e.protoInfo,e.image),T=e.gallery,N=void 0===T?[]:T,A=e.thirdSdkInfo,R=(e.showNum,e.recommend),x=e.contentType,I=(0,o.default)(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","button","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend","contentType"]),M=E.name,L=E.logo,D=(0,s.get)(N,"length")>=2?N.map(function(e){return e.url}):[P],q=N&&N.map(function(e){return{image:e.url,desc:e.description}});return{asset:p({landingUrl:u,appPromotionUrl:f,deepUrl:d,packageName:m,title:h,nativeUrl:b,window:y,imageRatioExtra:w,desc:S,cta:_||j,imgs:D,brandName:M,brandLogo:L,recommend:R,gallery:N,galleries:q,icon:t},I),protoInfo:p({voteupNum:r,commentNum:a,contentType:x,answerNum:l,followNum:i,target:JSON.stringify(n)},c),videoInfo:O,thirdSdkInfo:A}}(e,E)});return p({viewTracks:y,impressionTracks:h,closeTracks:[v],clickTracks:w,creatives:O,expand:g},b)}function m(e){if(!e||!e.ad&&!e.adjson)return null;var t=(0,i.camelizeKeys)(e),n=(0,s.get)(e,"adjson"),r=(0,i.camelizeKeys)((0,s.str2Json)(n)),a=(0,l.getExperimentInfo)({oldData:t,adjson:r});return{data:t,adjson:Boolean(n)?function(e,t){if(!e.ads)return null;var n=e.ads;return{ads:(void 0===n?[]:n).map(function(e){return p({adjsonStr:t},(0,c.standardizeAdjson)(e))})}}(r,n):function(e,t){return{ads:[{ad:e.ad}].map(function(e){var n=e.ad;return p({adjsonStr:t},d({ad:n}))})}}(t,n),experimentInfo:a}}var h={getNormalizedInfo:m,getFormatedAdItem:d};t.default=h},2282:function(e,t,n){"use strict";function r(e){var t=e.id,n=e.adZoneId,r=e.template,a=void 0===r?"":r,o=e.style,i=void 0===o?"":o,s=e.impressionTracks,l=e.viewTracks,c=e.clickTracks,u=e.closeTracks,p=e.effectTracks,f=void 0===p?[]:p,d=e.debugTracks,m=void 0===d?[]:d,h=e.conversionTracks,v=e.videoTracks,b=void 0===v?[]:v,y=e.extraConversionTracks,w=void 0===y?[]:y,g=e.conversionTrackJs,E=void 0===g?[]:g,O=e.zaAdInfo,C=e.zaAdInfoJson,k=void 0===C?"":C,j=e.creatives,_=e.prefetch,S=void 0===_?{}:_,P=e.expand,T=void 0===P?{}:P,N=e.canvas,A=void 0===N?{}:N,R=e.experimentInfo,x=void 0===R?"":R;return{id:t,adZoneId:n,template:a,style:i,impressionTracks:s,viewTracks:l,clickTracks:c,closeTracks:u,effectTracks:f,debugTracks:m,conversionTracks:h,videoTracks:b,extraConversionTracks:w,conversionTrackJs:E,zaAdInfo:O,zaAdInfoJson:k,creatives:function(e){return e.map(function(e){return function(e){var t=e.id,n=void 0===t?"":t,r=e.asset,a=e.videoInfo,o=void 0===a?{playlis:{hd:{},ld:{},sd:{}}}:a,i=e.protoInfo,s=void 0===i?{}:i,l=e.thirdSdkInfo,c=void 0===l?"":l,u=e.videoWatchNum,p=void 0===u?"":u;return{id:n,asset:function(e){var t=e.brandName,n=e.brandLogo,r=e.title,a=e.desc,o=void 0===a?"":a,i=e.imgs,s=void 0===i?[]:i,l=e.gif,c=void 0===l?"":l,u=e.landingUrl,p=e.nativeUrl,f=void 0===p?"":p,d=e.appPromotionUrl,m=void 0===d?"":d,h=e.deepUrl,v=void 0===h?"":h,b=e.imgSize,y=e.recommends,w=void 0===y?[{}]:y,g=e.footer,E=e.cta,O=e.resource,C=void 0===O?{}:O,k=e.activity,j=void 0===k?{}:k,_=e.sponsor,S=void 0===_?{}:_,P=e.window,T=void 0===P?{}:P,N=e.appInfo,A=void 0===N?{}:N,R=e.recommend,x=void 0===R?{}:R,I=e.videoSpec,M=void 0===I?{}:I,L=e.imageRatioExtra,D=void 0===L?{}:L,q=e.packageName,B=e.icon,z=e.galleries;return{brandName:t,brandLogo:n,title:r,desc:o,imgs:s,gif:c,landingUrl:u,nativeUrl:f,appPromotionUrl:m,deepUrl:v,imgSize:b,recommends:w,footer:g,cta:E,resource:C,activity:j,sponsor:S,window:T,appInfo:A,recommend:x,videoSpec:M,imageRatioExtra:D,packageName:q,icon:B,galleries:void 0===z?[{}]:z}}(r),videoInfo:o,protoInfo:s,thirdSdkInfo:c,videoWatchNum:p}}(e)})}(j),prefetch:S,expand:T,canvas:A,experimentInfo:x}}Object.defineProperty(t,"__esModule",{value:!0}),t.standardizeAdjson=r,t.default=void 0;var a={standardizeAdjson:r};t.default=a},2283:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t},e.exports=t.default},2284:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,a,o,i,s){var l=n+(-o*(t-a)+-i*n)*e,c=t+l*e;if(Math.abs(l)<s&&Math.abs(c-a)<s)return r[0]=a,r[1]=0,r;return r[0]=c,r[1]=l,r};var r=[0,0];e.exports=t.default},2285:function(e,t,n){(function(t){(function(){var n,r,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},r=t.hrtime,a=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-a},a=Date.now()):(e.exports=function(){return(new Date).getTime()-a},a=(new Date).getTime())}).call(this)}).call(this,n(45))},2286:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var a="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==a)return!1}return!0},e.exports=t.default},2287:function(e,t,n){e.exports=n(34)(7)},2300:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(2),l=n.n(s),c=n(2277),u="TopicVoteCheckbox",p=(n(2276),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=[0,1,2,3,4,5,6,7].map(function(e){return a.a.createElement("div",{className:u+"-Sparkle",key:e})}),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,i=e.tooltipPosition;return a.a.createElement("div",p({className:l()(u,u+"--recommend",t),"data-tooltip":"推荐"},i&&{"data-tooltip-position":i}),a.a.createElement("input",{id:"topic-recommend",type:"checkbox",checked:r,onChange:n,onClick:o}),a.a.createElement("label",{htmlFor:"topic-recommend"},a.a.createElement(c.a,{size:19}),d))}}]),t}(),h=(n(2278),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var b,y,w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),v(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,i=e.tooltipPosition;return a.a.createElement("div",h({className:l()(u,u+"--against",t),"data-tooltip":"不推荐"},i&&{"data-tooltip-position":i}),a.a.createElement("input",{id:"topic-against",type:"checkbox",checked:r,onChange:n,onClick:o}),a.a.createElement("label",{htmlFor:"topic-against"},a.a.createElement(c.a,{size:19})))}}]),t}(),g=(n(2279),{Recommend:m,Against:w}),E=(n(2280),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var O,C,k=function(e){return e.stopPropagation()},j=(y=b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),E(t,[{key:"render",value:function(){var e=this.props,t=e.noAnimation,n=e.status,r=e.onVoteChange,o=e.tooltipPosition;return a.a.createElement("span",{className:"VotableTopicCard",onClick:k},a.a.createElement("span",{className:l()("VotableTopicCard-RecommendStatus",{"VotableTopicCard-VoteActions--noAnimation":t})},a.a.createElement(g.Recommend,{className:"VotableTopicCard-VoteCheckbox",checked:"like"===n,onChange:function(e){r(e,"recommend")},tooltipPosition:o}),a.a.createElement(g.Against,{className:"VotableTopicCard-VoteCheckbox",checked:"dislike"===n,onChange:function(e){r(e,"unrecommend")},tooltipPosition:o})))}}]),t}(),b.propTypes={noAnimation:i.a.bool.isRequired,status:i.a.oneOf(["like","dislike","none"]).isRequired,noBorder:i.a.bool.isRequired,onVoteChange:i.a.func.isRequired,tooltipPosition:i.a.string},y),_=n(8),S=n(46),P=n(11),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var A={Upvote:"Upvote",UnUpvote:"UnUpvote",Downvote:"Downvote",UnDownvote:"UnDownvote"},R=(C=O=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=N(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={noAnimation:!!r.props.metaInfo.vote&&"none"!==r.props.metaInfo.vote.status},r.handleVoteChange=r.context.authRequired(function(e,t){var n=r.props,a=n.metaInfo.vote.status,o=n.onUpdateVoteTopic;r.state.noAnimation&&r.setState({noAnimation:!1});var i={actionType:"",voteFor:"",method:""};"recommend"===t?"like"===a?(i.actionType=A.UnUpvote,i.voteFor="like",i.method="DELETE"):(i.actionType=A.Upvote,i.voteFor="like",i.method="POST"):"dislike"===a?(i.actionType=A.UnDownvote,i.voteFor="dislike",i.method="DELETE"):(i.actionType=A.Downvote,i.voteFor="dislike",i.method="POST"),i.actionType&&(_.default.trackEvent(e.target,{action:i.actionType,id:4176}),o(i))},P.N.vote),N(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),T(t,[{key:"renderVotableTopicCard",value:function(){var e=this.state.noAnimation,t=this.props,n=t.tooltipPosition,r=t.metaInfo,o=(r=void 0===r?{}:r).vote,i=(o=void 0===o?{}:o).status;return a.a.createElement(j,{noBorder:!0,status:i,noAnimation:e,onVoteChange:this.handleVoteChange,tooltipPosition:n})}},{key:"renderReviewCardExtraInfo",value:function(){var e=this.props,t=e.metaInfo,n=t.vote,r=t.meta.title,o=e.ReviewCardExtraInfoComponent,i=e.reviewerCountFormatter;if(!o)return null;var s=n.totalVotes,l=n.ratio,c=n.ratioStatus,u=n.status,p=(100*l).toFixed(0),f=i(s),d=void 0;return d="none"===u?"你推荐么？":"like"===u?"已推荐":"不推荐",a.a.createElement(o,{reviewerCount:f,insufficientText:d,percent:p,ratioStatus:c,title:r})}},{key:"render",value:function(){return a.a.createElement(r.Fragment,null,this.renderReviewCardExtraInfo(),this.props.children,this.renderVotableTopicCard())}}]),t}(),O.propTypes={onUpdateVoteTopic:i.a.func.isRequired,metaInfo:i.a.shape({meta:i.a.object.isRequired,vote:i.a.shape({status:i.a.oneOf(["none","dislike","like"]).isRequired})}),ReviewCardExtraInfoComponent:i.a.oneOfType([i.a.func,i.a.string,i.a.object]).isRequired,reviewerCountFormatter:i.a.func.isRequired,tooltipPosition:i.a.string},O.defaultProps={reviewerCountFormatter:function(e){return e>1e4?Object(S.niceNumber)(e):Object(S.formatNumber)(e)}},O.contextTypes={authRequired:i.a.func},C);n.d(t,"a",function(){return R})},2308:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};i.defaultProps={name:"EyeSlash"},t.a=i},2321:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-2.762-5.37c.243.246.452.37.78.37.33 0 .576-.203.827-.443.25-.24 7.052-7.054 7.052-7.054a.988.988 0 0 0-.311-1.354.973.973 0 0 0-1.345.315l-6.222 6.077-2.31-2.418a.971.971 0 0 0-1.368-.19.988.988 0 0 0-.188 1.377s2.841 3.074 3.085 3.32z",fillRule:"evenodd"}))};i.defaultProps={name:"CheckCircle"},t.a=i},2323:function(e,t,n){},2324:function(e,t,n){},2325:function(e,t,n){},2326:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var r,a=n(0),o=n.n(a),i=n(10),s=n(2672),l=n(56),c=n(138),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=Object(i.connect)(function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}},{loadBrandQuestionAdvancedStyle:l.y})(r=function(t){function n(){var t,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=a=p(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(i))),a.getTrackUrls=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.props,o=r.pageType,i=r.advancedStyle,s=i.viewTracks,l=i.clickTracks,c="view"===t?s:l,u=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===o?1:2,rt:1},n),p=Object.keys(u).map(function(e){return"&"+e+"="+u[e]}).join("");return c.map(function(e){return""+e+p})},a.handleViewTrack=function(e){a.getTrackUrls("view",e).forEach(c.c)},a.handleClickTrack=function(e){a.getTrackUrls("click",e).forEach(c.c)},p(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["Component"]),u(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(t=void 0===t?{}:t).cardType,r=this.props,a=r.advancedStyle,o=(a=void 0===a?{}:a).cardType,i=r.onLoad;!n&&o&&"function"==typeof i&&i()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?o.a.createElement(s.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),n}())||r}).call(this,n(31))},2327:function(e,t,n){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},2328:function(e,t,n){},2628:function(e,t,n){},2629:function(e,t,n){e.exports=n.p+"assets/liukanshan_desert.547bd049.svg"},2630:function(e,t,n){},2631:function(e,t,n){},2632:function(e,t,n){},2633:function(e,t,n){},2634:function(e,t,n){},2635:function(e,t,n){},2636:function(e,t,n){},2637:function(e,t,n){},2638:function(e,t,n){},2639:function(e,t,n){},2640:function(e,t,n){},2641:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z",fillRule:"evenodd"}))};i.defaultProps={name:"Report"},t.a=i},2642:function(e,t,n){},2643:function(e,t,n){},2644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),a=o(n(74));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return r.default.createElement(a.default,Object.assign({viewBox:"0 0 72 18"},e),r.default.createElement("g",{fillRule:"evenodd"},r.default.createElement("rect",{width:"72",height:"18",rx:"2"}),r.default.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},r.default.createElement("tspan",{x:"19",y:"13"},"有奖问答")),r.default.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 0 1-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 1 1 0-1.5H10zm.8 0h4.3a.8.8 0 0 1 0 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 0 0-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))};t.default=i},2645:function(e,t,n){},2646:function(e,t,n){},2647:function(e,t,n){},2648:function(e,t,n){},2649:function(e,t,n){},2650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),a=o(n(74));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return r.default.createElement(a.default,Object.assign({viewBox:"0 0 24 24"},e),r.default.createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 0 1-.657-.446.731.731 0 0 1 .154-.787l2.812-3.045a2.395 2.395 0 0 1 2.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0 1 17.248 6.5zm-.114-3.357a.798.798 0 0 0-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 0 0-.808-.821zM11.286 7.61v2.857H3.429a1.429 1.429 0 0 1 0-2.857h7.857zm1.428 0h7.857a1.429 1.429 0 0 1 0 2.857h-7.857V7.611zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 0 1-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897zM6.752 6.5a2.431 2.431 0 0 1-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 0 1 2.926.392l2.812 3.045a.731.731 0 0 1 .153.787.711.711 0 0 1-.656.446H6.752zm.686-3.117a.798.798 0 0 0-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 0 0 .78.608h1.951L7.438 3.383z"}))};t.default=i},2651:function(e,t,n){},2652:function(e,t,n){},2653:function(e,t,n){},2654:function(e,t,n){},2655:function(e,t,n){},2656:function(e,t,n){},2657:function(e,t,n){},2658:function(e,t,n){e.exports=n.p+"assets/empty.2df52de0.png"},2659:function(e,t,n){},2660:function(e,t,n){},2661:function(e,t,n){},2662:function(e,t,n){"use strict";var r=n(825),a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,v.getNormalizedInfo)(e.data);if(!t||!t.adjson)return null;return f.default.createElement(m.default,null,f.default.createElement(w,(0,o.default)({},e,t)))};var o=a(n(202)),i=a(n(351)),s=a(n(120)),l=a(n(121)),c=a(n(239)),u=a(n(240)),p=a(n(241)),f=r(n(0)),d=a(n(1)),m=a(n(834)),h=n(832),v=n(2281),b=n(518),y=a(n(2663));n(2325);var w=function(e){function t(){var e,n;(0,s.default)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=(0,c.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(a)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=(0,h.getNormalizedAd)(n.props).ad.clickTracks,r=e.target.closest("a");(0,b.clickTrack)(t).finally(function(){var e=r.href;window.open(e)})},n.handleClose=function(){var e=(0,h.getNormalizedAd)(n.props).ad.closeTracks;(0,b.closeTrack)(e).then(function(){n.setState(function(e){return{display:!e.display}}),n.props.onClose&&n.props.onClose()})},n.handleRef=function(e){n.root=e},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=(0,h.getNormalizedAd)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,r={impressionTracks:t,viewTracks:e.viewTracks,debugTracks:n};(0,b.initCmTrack)(this.root,r),(0,b.dataOriginTrack)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=(0,h.getNormalizedAd)(this.props),t=e.ad,n=e.creative,r=t.expand.displayAdvertisingTag,a=n.asset,o=a.title,i=a.desc,s=a.cta,l=a.landingUrl,c=a.brandName,u=a.brandLogo;return f.default.createElement("div",{className:"Pc-word",ref:this.handleRef},f.default.createElement("div",{className:"Pc-word-card"},f.default.createElement(g,{href:l,onClick:this.handleClick},f.default.createElement(E,{data:{name:c,logo:u}})),r&&f.default.createElement(y.default,{onClose:this.handleClose}),f.default.createElement(g,{href:l,onClick:this.handleClick},f.default.createElement("h2",{className:"Pc-word-card-title"},o),f.default.createElement("div",{className:"Pc-word-card-content  "},i&&f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,i),f.default.createElement("span",{className:"Pc-word-card-content-cta  "},s))))))}}]),t}(f.Component);function g(e){var t=e.children,n=(0,i.default)(e,["children"]);return f.default.createElement("a",(0,o.default)({target:"_blank"},n),t)}function E(e){var t=e.data,n=t.name,r=t.logo;return f.default.createElement("div",{className:"Pc-word-card-brand"},f.default.createElement("div",{className:"Pc-word-card-brand-wrapper"},f.default.createElement("img",{width:"20",height:"20",src:r,alt:"logo"}),f.default.createElement("span",null,n)))}w.propTypes={data:d.default.object.isRequired,onClose:d.default.func}},2663:function(e,t,n){"use strict";var r=n(825),a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(120)),i=a(n(121)),s=a(n(239)),l=a(n(240)),c=a(n(241)),u=r(n(0)),p=a(n(1)),f=a(n(822));n(2325);var d=function(e){function t(){var e,n;(0,o.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,s.default)(this,(e=(0,l.default)(t)).call.apply(e,[this].concat(a)))).state={display:!1},n.handleCloseByDocument=function(e){"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState(function(e){return{display:!e.display}});var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,r=e.top,a=e.width,o=e.height+15,i=Math.floor(a/2);n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(r+o,"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-i,"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return u.default.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},u.default.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",u.default.createElement(f.default,{name:"triangle",className:"Pc-word-card-sign-svg"})),u.default.createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},u.default.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),u.default.createElement("div",{className:"Pc-word-card-sign-popup-menu"},u.default.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),u.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(u.Component);t.default=d,d.propTypes={onClose:p.default.func}},2664:function(e,t,n){},2665:function(e,t,n){},2666:function(e,t,n){},2667:function(e,t,n){},2668:function(e,t,n){},2669:function(e,t,n){},2670:function(e,t,n){},2671:function(e,t,n){},2672:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),a=n.n(r),o=n(2),i=n.n(o),s=n(496),l=n(58),c=n(38),u=n(2673),p=(n(2682),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),f="https://pic1.zhimg.com/da8e974dc.jpg",d={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},m=function(e){var t=e.src,n=e.style;return a.a.createElement("div",{className:"AdvancedViewer-imgField",style:p({},n,t?{backgroundImage:"url("+t+")",backgroundSize:"cover",backgroundPosition:"center"}:{})})};function h(e){var t=e.isMobileView,n=e.advancedStyle,r=(n=void 0===n?{}:n).cardType,o=n.url,i=n.material,l=void 0===i?[]:i,c=e.handleViewTrack,h=e.handleClickTrack;if(!l)return null;var v=function(e){return"function"==typeof h?{onClick:function(){h(e)}}:{}},b=function(e,t){return a.a.createElement("a",p({key:"AdvancedViewer-commodity-"+t,className:"AdvancedViewer-commodityItem",target:"_blank",href:o},v({etu:o,pi:t+1})),a.a.createElement("img",{src:e.image,role:"presentation"}),e.mainTitle&&a.a.createElement("div",{className:"AdvancedViewer-commodityIntro"},a.a.createElement("span",{className:"AdvancedViewer-mainTitle"},e.mainTitle),a.a.createElement("span",{className:"AdvancedViewer-subTitle"},e.subTitle)))};if("image"===r)return a.a.createElement("a",p({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",href:o},v({etu:o})),a.a.createElement(m,{src:l[0].image,style:t?{width:375,height:156.25}:{}}));if("image_text"===r)return a.a.createElement("a",p({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",href:o},v({etu:o})),t&&a.a.createElement("div",{className:"AdvancedViewer-intro"},l[0].intro),a.a.createElement(m,{src:l[0].image}),!t&&a.a.createElement("div",{className:"AdvancedViewer-intro"},l[0].intro));if("commodity"===r)return l.length&&a.a.createElement("div",{className:"AdvancedViewer-material AdvancedViewer-commodity"},t?l.map(b):a.a.createElement(u.a,{items:l,renderItem:b}));if("recommended"===r){var y=function(e,t){return a.a.createElement("a",p({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank"},v({etu:e.url,pi:t+1})),a.a.createElement("div",{className:"AdvancedViewer-summary"},a.a.createElement("div",{className:"AdvancedViewer-wrap"},a.a.createElement("div",{className:"AdvancedViewer-title"},e.title),e.intro&&a.a.createElement("div",{className:"AdvancedViewer-desc"},e.intro.replace(/<[\s\S]*?>/g,""))),a.a.createElement("span",{className:"AdvancedViewer-data"},d[e.type]," · ",e.statisticText)),a.a.createElement(m,{src:e.image||f}))};return a.a.createElement("div",{className:"AdvancedViewer-material AdvancedViewer-recommended"},l.map(function(e,t){return c?a.a.createElement(s.a,p({key:"AdvancedViewer-recommendedItem-"+t},(n={pi:t+1},"function"==typeof c?{onViewed:function(){c(n)}}:{})),y(e,t)):y(e,t);var n}))}return null}function v(e){var t,n=e.isMobileView,r=e.brand,o=r.name,u=r.logo,f=e.advancedStyle,d=(f=void 0===f?{}:f).brandRecommendText,m=f.buttonText,v=f.url,b=f.cardType,y=e.handleViewTrack,w=e.handleClickTrack,g=function(e){return"function"==typeof w?{onClick:function(){w(e)}}:{}},E=o&&o.charCodeAt(o.length-1),O=n&&"recommended"!==b,C=d||(E>=0&&E<=128?o+" ":o)+"的品牌推荐",k=a.a.createElement(l.d,{className:i()("AdvancedViewer",{"is-mobile":n})},!O&&a.a.createElement(l.b,{className:"AdvancedViewer-header"},a.a.createElement("span",{className:"AdvancedViewer-headerText"},C)),a.a.createElement("div",{className:"AdvancedViewer-content"},a.a.createElement(h,e)),!n&&b&&"recommended"!==b&&a.a.createElement("div",{className:"AdvancedViewer-footer"},a.a.createElement(c.a,p({className:"AdvancedViewer-button",target:"_blank",to:v},g({etu:v})),m||"了解更多")),O&&a.a.createElement("div",{className:"AdvancedViewer-footer"},a.a.createElement("div",{className:"AdvancedViewer-brand"},a.a.createElement("img",{className:"AdvancedViewer-logo",src:u,role:"presentation"}),a.a.createElement("span",{className:"AdvancedViewer-brandName"},C)),a.a.createElement(c.a,p({className:"AdvancedViewer-button",target:"_blank",to:v},g({etu:v})),m||"查看详情")));return y?a.a.createElement(s.a,"function"==typeof y?{onViewed:function(){y(t)}}:{},k):k}},2673:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var r,a,o=n(0),i=n.n(o),s=n(2674),l=n(2),c=n.n(l),u=n(29),p=(n(2681),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=30,h="ontouchstart"in e,v=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},b=function(e,t,n){return Math.min(Math.max(e,t),n)},y=function(e,t){return{transform:"translate3d("+e+", "+t+", 0)",WebkitTransform:"translate3d("+e+", "+t+", 0)"}},w=function(e){return function(t){t.stopPropagation(),e()}},g=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={offset:r.props.defaultIndex-(r.props.loop?r.props.visibles:0),touchMoveOffset:0,showLeftArrow:!1,showRightArrow:!1},r.handleHotkeys=function(e){var t=r.isVertical?38===e.keyCode:37===e.keyCode,n=r.isVertical?40===e.keyCode:39===e.keyCode;t?r.prev():n&&r.next()},r.play=function(){r.timer_=setTimeout(function(){r.next(r.play)},r.props.interval)},r.pause=function(){r.isPlaying_&&(r.isPaused_=!0,r.stop())},r.resume=function(){r.isPaused_&&r.start()},r.prev=function(e){var t=r.state.offset;return t-=1,r.setOffset(t,e)},r.next=function(e){var t=r.state.offset;return t+=1,r.setOffset(t,e)},r.handleTouchStart=function(e){r.pause(),r.touchStartPosition_=v(e)},r.handleTouchMove=function(e){e.preventDefault();var t=v(e);if(r.isVertical){var n=t.y-r.touchStartPosition_.y;r.setState({touchMoveOffset:b(n/r.el.offsetHeight,-1,1)})}else{var a=t.x-r.touchStartPosition_.x;r.setState({touchMoveOffset:b(a/r.el.offsetWidth,-1,1)})}},r.handleTouchEnd=function(e){var t=v(e),n=t.x-r.touchStartPosition_.x,a=t.y-r.touchStartPosition_.y,o=r.isVertical?a>m:n>m,i=r.isVertical?a<-m:n<-m,s=!1;o?s=r.prev(r.resume):i&&(s=r.next(r.resume)),s||r.setState({touchMoveOffset:0})},r.handleTouchCancel=function(){r.resume()},r.handleMouseEnter=function(){r.pause()},r.handleMouseMove=function(){r.props.enableArrows&&r.setState({showLeftArrow:!0,showRightArrow:!0})},r.handleMouseLeave=function(){r.resume(),r.setState({showLeftArrow:!1,showRightArrow:!1})},r.timer_=null,r.isPlaying_=!1,d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),f(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoplay,n=e.enableHotkeys;t&&this.canPlay&&this.start(),n&&window.addEventListener("keydown",this.handleHotkeys)}},{key:"componentWillReceiveProps",value:function(e){var t=e.items,n=this.props.items;t.length!==n.length&&t.length>1&&this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),window.removeEventListener("keydown",this.handleHotkeys)}},{key:"start",value:function(){this.isPlaying_||(this.isPlaying_=!0,this.play())}},{key:"stop",value:function(){this.isPlaying_=!1,clearTimeout(this.timer_)}},{key:"calcIndex",value:function(e){var t=this.props,n=t.loop,r=t.items;return n?function(e,t){var n=(t+1)%e;return n<0?n+e:n}(r.length,e):e}},{key:"isValidIndex",value:function(e){var t=this.props.items;return e>=0&&e<=t.length-1}},{key:"setOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.calcIndex(e);return!!this.isValidIndex(n)&&(this.props.onSlide({index:n}),this.setState({offset:e,touchMoveOffset:0},t),!0)}},{key:"slideTo",value:function(e,t){var n=this.props.items,r=this.state.offset,a=n.length,o=this.currentIndex;e!==o&&(r+=o<e?e-o:a+e-o,this.setOffset(r,t))}},{key:"getTranslateStyle",value:function(e){return this.isVertical?y(0,100*e+"%"):y(100*e+"%",0)}},{key:"renderArrows",value:function(){var e=this.props.enableArrows,t=this.state,n=t.showLeftArrow,r=t.showRightArrow;return!e||this.isVertical?null:i.a.createElement("span",null,n&&i.a.createElement("button",{className:"Carousel-leftArrow","aria-label":"上一个",onClick:w(this.prev)},i.a.createElement(u.a,{name:"arrow"})),r&&i.a.createElement("button",{className:"Carousel-rightArrow","aria-label":"下一个",onClick:w(this.next)},i.a.createElement(u.a,{name:"arrow"})))}},{key:"renderBullets",value:function(){var e=this,t=this.props,n=t.items;return t.enableBullets?i.a.createElement("div",{className:"Carousel-bullets"},n.map(function(t,n){return i.a.createElement("span",{key:n,className:c()("Carousel-bullet",{"is-active":e.currentIndex===n}),onClick:function(){return e.slideTo(n)}})})):null}},{key:"renderItems",value:function(){var e=this.props,t=e.loop,n=e.items,r=e.renderItem,a=e.visibles;if(!t)return n.map(function(e,t){return Object(o.cloneElement)(r(e,t),{key:t})});var i=this.currentIndex,s=i+3*a;return[n[n.length-1]].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[n[0]]).map(function(e,t){var n=t>=i&&t<s;return Object(o.cloneElement)(r(e,t),{key:t,hidden:!n})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loop,r=t.visibles,a=t.items,o=t.className,l=t.defaultIndex,u=this.state,f=u.offset,d=u.touchMoveOffset;if(!a.length)return null;var m=this.canPlay?{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave}:null,h=n?r:0;return i.a.createElement(s.Motion,{defaultStyle:{offset:-l},style:{offset:Object(s.spring)(-(f+h-d))}},function(t){return i.a.createElement("div",p({ref:function(t){return e.el=t},className:c()("Carousel",o,{"is-vertical":e.isVertical})},m),i.a.createElement("div",{className:"Carousel-scroller",style:e.getTranslateStyle(t.offset)},i.a.createElement("div",{className:"Carousel-window",style:n?e.getTranslateStyle(f):null},e.renderItems())),e.canPlay&&e.renderArrows(),e.canPlay&&e.renderBullets())})}},{key:"canPlay",get:function(){return this.props.items.length>1}},{key:"isVertical",get:function(){return"vertical"===this.props.direction}},{key:"currentIndex",get:function(){return this.calcIndex(this.state.offset)}}]),t}(),r.defaultProps={id:"",items:[],defaultIndex:0,visibles:1,interval:3e3,loop:!0,enableArrows:!h,enableBullets:!0,enableHotkeys:!1,autoplay:!0,direction:"horizontal",onSlide:function(){}},a)}).call(this,n(31))},2674:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var a=n(2675);t.Motion=r(a);var o=n(2676);t.StaggeredMotion=r(o);var i=n(2677);t.TransitionMotion=r(i);var s=n(2679);t.spring=r(s);var l=n(2327);t.presets=r(l);var c=n(2184);t.stripStyle=r(c);var u=n(2680);t.reorderKeys=r(u)},2675:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(2283)),i=a(n(2184)),s=a(n(2284)),l=a(n(2285)),c=a(n(349)),u=a(n(2286)),p=a(n(0)),f=a(n(1)),d=a(n(2287)),m=d.default({propTypes:{defaultStyle:f.default.objectOf(f.default.number),style:f.default.objectOf(f.default.oneOfType([f.default.number,f.default.object])).isRequired,children:f.default.func.isRequired,onRest:f.default.func},getInitialState:function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||i.default(n),a=o.default(r);return{currentStyle:r,currentVelocity:a,lastIdealStyle:r,lastIdealVelocity:a}},wasAnimating:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyle:null,clearUnreadPropStyle:function(e){var t=!1,n=this.state,a=n.currentStyle,o=n.currentVelocity,i=n.lastIdealStyle,s=n.lastIdealVelocity;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var c=e[l];"number"==typeof c&&(t||(t=!0,a=r({},a),o=r({},o),i=r({},i),s=r({},s)),a[l]=c,o[l]=0,i[l]=c,s[l]=0)}t&&this.setState({currentStyle:a,currentVelocity:o,lastIdealStyle:i,lastIdealVelocity:s})},startAnimationIfNecessary:function(){var e=this;this.animationID=c.default(function(t){var n=e.props.style;if(u.default(e.state.currentStyle,n,e.state.currentVelocity))return e.wasAnimating&&e.props.onRest&&e.props.onRest(),e.animationID=null,e.wasAnimating=!1,void(e.accumulatedTime=0);e.wasAnimating=!0;var r=t||l.default(),a=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+a,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();var o=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),i=Math.floor(e.accumulatedTime/(1e3/60)),c={},p={},f={},d={};for(var m in n)if(Object.prototype.hasOwnProperty.call(n,m)){var h=n[m];if("number"==typeof h)f[m]=h,d[m]=0,c[m]=h,p[m]=0;else{for(var v=e.state.lastIdealStyle[m],b=e.state.lastIdealVelocity[m],y=0;y<i;y++){var w=s.default(1e3/60/1e3,v,b,h.val,h.stiffness,h.damping,h.precision);v=w[0],b=w[1]}var g=s.default(1e3/60/1e3,v,b,h.val,h.stiffness,h.damping,h.precision),E=g[0],O=g[1];f[m]=v+(E-v)*o,d[m]=b+(O-b)*o,c[m]=v,p[m]=b}}e.animationID=null,e.accumulatedTime-=i*(1e3/60),e.setState({currentStyle:f,currentVelocity:d,lastIdealStyle:c,lastIdealVelocity:p}),e.unreadPropStyle=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=l.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=l.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(c.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyle);return e&&p.default.Children.only(e)}});t.default=m,e.exports=t.default},2676:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(2283)),i=a(n(2184)),s=a(n(2284)),l=a(n(2285)),c=a(n(349)),u=a(n(2286)),p=a(n(0)),f=a(n(1)),d=a(n(2287));var m=d.default({propTypes:{defaultStyles:f.default.arrayOf(f.default.objectOf(f.default.number)),styles:f.default.func.isRequired,children:f.default.func.isRequired},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(i.default),a=r.map(function(e){return o.default(e)});return{currentStyles:r,currentVelocities:a,lastIdealStyles:r,lastIdealVelocities:a}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=this.state,n=t.currentStyles,a=t.currentVelocities,o=t.lastIdealStyles,i=t.lastIdealVelocities,s=!1,l=0;l<e.length;l++){var c=e[l],u=!1;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var f=c[p];"number"==typeof f&&(u||(u=!0,s=!0,n[l]=r({},n[l]),a[l]=r({},a[l]),o[l]=r({},o[l]),i[l]=r({},i[l])),n[l][p]=f,a[l][p]=0,o[l][p]=f,i[l][p]=0)}}s&&this.setState({currentStyles:n,currentVelocities:a,lastIdealStyles:o,lastIdealVelocities:i})},startAnimationIfNecessary:function(){var e=this;this.animationID=c.default(function(t){var n=e.props.styles(e.state.lastIdealStyles);if(function(e,t,n){for(var r=0;r<e.length;r++)if(!u.default(e[r],t[r],n[r]))return!1;return!0}(e.state.currentStyles,n,e.state.currentVelocities))return e.animationID=null,void(e.accumulatedTime=0);var r=t||l.default(),a=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+a,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var o=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),i=Math.floor(e.accumulatedTime/(1e3/60)),c=[],p=[],f=[],d=[],m=0;m<n.length;m++){var h=n[m],v={},b={},y={},w={};for(var g in h)if(Object.prototype.hasOwnProperty.call(h,g)){var E=h[g];if("number"==typeof E)v[g]=E,b[g]=0,y[g]=E,w[g]=0;else{for(var O=e.state.lastIdealStyles[m][g],C=e.state.lastIdealVelocities[m][g],k=0;k<i;k++){var j=s.default(1e3/60/1e3,O,C,E.val,E.stiffness,E.damping,E.precision);O=j[0],C=j[1]}var _=s.default(1e3/60/1e3,O,C,E.val,E.stiffness,E.damping,E.precision),S=_[0],P=_[1];v[g]=O+(S-O)*o,b[g]=C+(P-C)*o,y[g]=O,w[g]=C}}f[m]=v,d[m]=b,c[m]=y,p[m]=w}e.animationID=null,e.accumulatedTime-=i*(1e3/60),e.setState({currentStyles:f,currentVelocities:d,lastIdealStyles:c,lastIdealVelocities:p}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=l.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=l.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(c.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyles);return e&&p.default.Children.only(e)}});t.default=m,e.exports=t.default},2677:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(2283)),i=a(n(2184)),s=a(n(2284)),l=a(n(2678)),c=a(n(2285)),u=a(n(349)),p=a(n(2286)),f=a(n(0)),d=a(n(1)),m=a(n(2287));function h(e,t,n){var r=t;return null==r?e.map(function(e,t){return{key:e.key,data:e.data,style:n[t]}}):e.map(function(e,t){for(var a=0;a<r.length;a++)if(r[a].key===e.key)return{key:r[a].key,data:r[a].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}})}function v(e,t,n,r,a,i,s,c,u){for(var f=l.default(r,a,function(e,r){var a=t(r);return null==a?(n({key:r.key,data:r.data}),null):p.default(i[e],a,s[e])?(n({key:r.key,data:r.data}),null):{key:r.key,data:r.data,style:a}}),d=[],m=[],h=[],v=[],b=0;b<f.length;b++){for(var y=f[b],w=null,g=0;g<r.length;g++)if(r[g].key===y.key){w=g;break}if(null==w){var E=e(y);d[b]=E,h[b]=E;var O=o.default(y.style);m[b]=O,v[b]=O}else d[b]=i[w],h[b]=c[w],m[b]=s[w],v[b]=u[w]}return[f,d,m,h,v]}var b=m.default({propTypes:{defaultStyles:d.default.arrayOf(d.default.shape({key:d.default.string.isRequired,data:d.default.any,style:d.default.objectOf(d.default.number).isRequired})),styles:d.default.oneOfType([d.default.func,d.default.arrayOf(d.default.shape({key:d.default.string.isRequired,data:d.default.any,style:d.default.objectOf(d.default.oneOfType([d.default.number,d.default.object])).isRequired}))]).isRequired,children:d.default.func.isRequired,willEnter:d.default.func,willLeave:d.default.func,didLeave:d.default.func},getDefaultProps:function(){return{willEnter:function(e){return i.default(e.style)},willLeave:function(){return null},didLeave:function(){}}},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=e.willEnter,a=e.willLeave,s=e.didLeave,l="function"==typeof n?n(t):n,c=void 0;c=null==t?l:t.map(function(e){for(var t=0;t<l.length;t++)if(l[t].key===e.key)return l[t];return e});var u=null==t?l.map(function(e){return i.default(e.style)}):t.map(function(e){return i.default(e.style)}),p=null==t?l.map(function(e){return o.default(e.style)}):t.map(function(e){return o.default(e.style)}),f=v(r,a,s,c,l,u,p,u,p),d=f[0];return{currentStyles:f[1],currentVelocities:f[2],lastIdealStyles:f[3],lastIdealVelocities:f[4],mergedPropsStyles:d}},unmounting:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=v(this.props.willEnter,this.props.willLeave,this.props.didLeave,this.state.mergedPropsStyles,e,this.state.currentStyles,this.state.currentVelocities,this.state.lastIdealStyles,this.state.lastIdealVelocities),n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],l=0;l<e.length;l++){var c=e[l].style,u=!1;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var f=c[p];"number"==typeof f&&(u||(u=!0,a[l]=r({},a[l]),o[l]=r({},o[l]),i[l]=r({},i[l]),s[l]=r({},s[l]),n[l]={key:n[l].key,data:n[l].data,style:r({},n[l].style)}),a[l][p]=f,o[l][p]=0,i[l][p]=f,s[l][p]=0,n[l].style[p]=f)}}this.setState({currentStyles:a,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:i,lastIdealVelocities:s})},startAnimationIfNecessary:function(){var e=this;this.unmounting||(this.animationID=u.default(function(t){if(!e.unmounting){var n=e.props.styles,r="function"==typeof n?n(h(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):n;if(function(e,t,n,r){if(r.length!==t.length)return!1;for(var a=0;a<r.length;a++)if(r[a].key!==t[a].key)return!1;for(a=0;a<r.length;a++)if(!p.default(e[a],t[a].style,n[a]))return!1;return!0}(e.state.currentStyles,r,e.state.currentVelocities,e.state.mergedPropsStyles))return e.animationID=null,void(e.accumulatedTime=0);var a=t||c.default(),o=a-e.prevTime;if(e.prevTime=a,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var i=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),l=Math.floor(e.accumulatedTime/(1e3/60)),u=v(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,r,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),f=u[0],d=u[1],m=u[2],b=u[3],y=u[4],w=0;w<f.length;w++){var g=f[w].style,E={},O={},C={},k={};for(var j in g)if(Object.prototype.hasOwnProperty.call(g,j)){var _=g[j];if("number"==typeof _)E[j]=_,O[j]=0,C[j]=_,k[j]=0;else{for(var S=b[w][j],P=y[w][j],T=0;T<l;T++){var N=s.default(1e3/60/1e3,S,P,_.val,_.stiffness,_.damping,_.precision);S=N[0],P=N[1]}var A=s.default(1e3/60/1e3,S,P,_.val,_.stiffness,_.damping,_.precision),R=A[0],x=A[1];E[j]=S+(R-S)*i,O[j]=P+(x-P)*i,C[j]=S,k[j]=P}}b[w]=C,y[w]=k,d[w]=E,m[w]=O}e.animationID=null,e.accumulatedTime-=l*(1e3/60),e.setState({currentStyles:d,currentVelocities:m,lastIdealStyles:b,lastIdealVelocities:y,mergedPropsStyles:f}),e.unreadPropStyles=null,e.startAnimationIfNecessary()}}))},componentDidMount:function(){this.prevTime=c.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(h(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=c.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){this.unmounting=!0,null!=this.animationID&&(u.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=h(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&f.default.Children.only(t)}});t.default=b,e.exports=t.default},2678:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){for(var r={},a=0;a<e.length;a++)r[e[a].key]=a;for(var o={},a=0;a<t.length;a++)o[t[a].key]=a;for(var i=[],a=0;a<t.length;a++)i[a]=t[a];for(var a=0;a<e.length;a++)if(!Object.prototype.hasOwnProperty.call(o,e[a].key)){var s=n(a,e[a]);null!=s&&i.push(s)}return i.sort(function(e,n){var a=o[e.key],i=o[n.key],s=r[e.key],l=r[n.key];if(null!=a&&null!=i)return o[e.key]-o[n.key];if(null!=s&&null!=l)return r[e.key]-r[n.key];if(null!=a){for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(r,u)){if(a<o[u]&&l>r[u])return-1;if(a>o[u]&&l<r[u])return 1}}return 1}for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(r,u)){if(i<o[u]&&s>r[u])return 1;if(i>o[u]&&s<r[u])return-1}}return-1})},e.exports=t.default},2679:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return r({},s,t,{val:e})};var a,o=n(2327),i=(a=o)&&a.__esModule?a:{default:a},s=r({},i.default.noWobble,{precision:.01});e.exports=t.default},2680:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){0};e.exports=t.default},2681:function(e,t,n){},2682:function(e,t,n){},2683:function(e,t,n){},2684:function(e,t,n){},2685:function(e,t,n){},2686:function(e,t,n){},2687:function(e,t,n){},2688:function(e,t,n){},2689:function(e,t,n){},2690:function(e,t,n){},3073:function(e,t,n){"use strict";n.r(t);var r,a,o,i=n(0),s=n.n(i),l=n(17),c=n(1),u=n.n(c),p=n(10),f=n(73),d=n.n(f),m=n(173),h=n.n(m),v=n(163),b=n(4),y=n(162),w=n(56),g=(n(2628),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O,C,k=Object(p.connect)(null,{updateQuestionAnonymous:w.bb})((o=a=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleToggleAnonymousConfirm=function(){var e=r.props,t=e.question.id,n=e.updateQuestionAnonymous;(0,e.onClose)(),n(t).then(function(){var e=r.props,t=e.isCheckedCircle,n=e.onChangecircleSettings;t&&n(!1)})},E(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),g(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,r=e.shown,a=e.showCircle,o=n.relationship.isAnonymous;return s.a.createElement(y.b,{title:o?"确认取消匿名身份？":"确认使用匿名身份？",onClose:t,size:"default"},r&&s.a.createElement("div",null,o?s.a.createElement("div",{className:"Anonymous-confirm"},s.a.createElement("p",null,"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。")):s.a.createElement("div",{className:"Anonymous-confirm"},s.a.createElement("p",null,"使用匿名身份后"),s.a.createElement("ul",null,s.a.createElement("li",null,"提问、回答、赞同、关注会显示为匿名"),s.a.createElement("li",null,"除提问者本人，不能匿名编辑问题"),s.a.createElement("li",null,"不能邀请别人回答问题"),s.a.createElement("li",null,"不能使用视频功能"),a&&s.a.createElement("li",null,"回答无法被圈内说收录"))),s.a.createElement(y.a,{direction:"horizontal"},s.a.createElement(b.c,{onClick:t,color:"grey"},"取消"),s.a.createElement(b.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm},"确认"))))}}]),t}(),a.propTypes={question:u.a.object.isRequired},r=o))||r,j=n(190),_=n(2629),S=n.n(_),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N,A,R=(C=O=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={time:r.props.seconds},r.handleClearInterval=function(){r.interval&&clearInterval(r.interval)},T(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),P(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){e.setState({time:e.state.time-1},function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/"+t}})},1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,r=this.state.time;return s.a.createElement(j.b,{title:t,subtitle:r+" 秒后自动跳转至"+n,errorImage:S.a})}}]),t}(),O.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"},C),x=n(819),I=n.n(x),M=n(29),L=n(165),D=n(1957),q=n(254),B=n(462),z=n(14),Q=n(353),U=n(2012),V=n(81),F=n(2022),H=n(2),W=n.n(H),G=n(72),Y=n(483),K=n(1892),J=n(1894),X=n(1893),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Z,ee,te=(A=N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),$(t,[{key:"render",value:function(){var e=this.props,t=e.badgeClassName,n=e.size,r=e.center,a=e.badge,o=Object(Y.a)(a)||{},i=o.identityInfo,l=o.bestAnswererInfo;return l&&i?s.a.createElement(K.a,{className:t,size:n,center:r}):l?s.a.createElement(J.a,{className:t,size:n,center:r}):i?s.a.createElement(X.a,{className:t,size:n,center:r}):null}}]),t}(),N.propTypes={badge:u.a.array,size:u.a.number,center:u.a.bool,badgeClassName:u.a.string},N.defaultProps={size:16,center:!0,badgeClassName:""},A),ne=(n(2630),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var re,ae="SpecialQuestionAuthor",oe=(ee=Z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),ne(t,[{key:"render",value:function(){var e,t,n,r=this.props,a=r.author,o=r.className,i=r.isMobile,c=a.avatarUrl,u=a.name,p=a.badge;return s.a.createElement("div",{className:W()(ae+"-Wrapper",o)},s.a.createElement(l.Link,{className:W()(""+ae,(e={},t="ROOT_CLASS--mobile",n=i,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),to:"/"+(a.isOrg?"org":"people")+"/"+(a.urlToken||a.id)},s.a.createElement(G.a,{size:i?22:28,url:c,alt:u,round:!0}),s.a.createElement("span",{className:ae+"-Author"},a.name),s.a.createElement(te,{badge:p,size:i?16:18,center:!0,badgeClassName:ae+"-Badge"}),s.a.createElement("span",{className:ae+"-Suffix"},"的提问")))}}]),t}(),Z.propTypes={author:u.a.object.isRequired,isMobile:u.a.bool},ee),ie=n(511),se=n(161),le=n(1935),ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ue,pe,fe,de=Object(se.a)(function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}})(re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),ce(t,[{key:"render",value:function(){var e=this.props.item;return s.a.createElement(ie.a,{className:"QuestionTopic"},s.a.createElement(le.a,{noHoverCard:!1,topic:e}))}}]),t}())||re,me=n(1884),he=n(1908),ve=n(1905),be=n(1906),ye=n(88),we=n(32),ge=n(103),Ee=n(244),Oe=n(485),Ce=n(489),ke=(n(2323),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _e=[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}],Se=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],Pe={title:"",step:0,isEditingTitle:!0,detail:{toHTML:function(){return""}},showToolbar:!1,reason:null,otherReason:"",videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null}},Te=Object(p.connect)(function(e){return{notification:e.notification[z.c]||e.notification.updateQuestion}},{showNotification:z.g,updateQuestion:w.ab})((fe=pe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleModalClose=function(){e.editable&&e.editable.hasVideo("upload")?e.setState({uploadModalShown:!0}):(e.setState({step:0}),e.props.onClose())},e.handleVideoQuestionModalHide=function(){e.setState({videoQuestionConfirmShown:!1})},e.handleUploadModalHide=function(){e.setState({uploadModalShown:!1})},e.handleUploadModalConfirm=function(){e.setState({uploadModalShown:!1}),e.props.onClose()},e.handleSubmit=function(){e.setState({errors:e.validate()},function(){for(var t=e.state.errors,n=["title","reason"],r=0;r<n.length;r++){var a=n[r],o=t[a];if(o&&"error"===o.level){var i=e[a+"Input"];return void(i&&i.focus())}}e.editable.hasVideo("upload")?e.props.showNotification("请等待视频上传完成后发布","red",z.c):e.editable.hasImage("upload")?e.props.showNotification("请等待图片上传完成后发布","red",z.c):!e.editable.hasVideo()||e.context.currentUser.isOrg?e.editable.hasImage("error")||e.editable.hasVideo("error")&&!e.editable.hasVideo("error-review")?e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}):e.editable.hasVideo("error-review")||e.editable.hasVideo("censor")?e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}):e.handleSubmitEditQuestion():e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"})})},e.handleSubmitEditQuestion=function(){var t=e.props.detail,n=e.state,r=n.title,a=n.detail,o=n.reason,i=n.otherReason,s={question:{title:r},meta:{reason:"other"===o?i:o}},l=a.toHTML();l!==t&&(s.question.detail=l),Object.keys(s.question).length>0&&e.props.updateQuestion(e.props.id,s)},e.triggerImageUpload=function(){e.editable.handleKeyCommand("insert-image")},e.triggerVideoUpload=function(){e.editable.handleKeyCommand("insert-video")},e.handleError=function(t,n){Object(Ce.b)(t,n,e.props.showNotification,z.c)},e.handleBeforeVideoUpload=function(){return!e.props.isAnonymous},e.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},e.state=Pe,e.onChangeTitle=e.handleChangeTitle.bind(e),e.onBlurTitle=e.handleBlurTitle.bind(e),e.onChangeDetail=e.handleChangeDetail.bind(e),e.onChangeReason=e.handleChangeReason.bind(e),e.onChangeOtherReason=e.handleChangeOtherReason.bind(e),e.toggleToolbar=e.toggleToolbar.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),je(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.notification,a=n.show,o=n.onClose,i=e.notification,s=e.show,l=e.title,c=e.detail;if(!a&&s&&this.setState({title:l,detail:{toHTML:function(){return c}}}),r!==i){var u=i.code,p=i.text;if(i.id)this.setState(Pe),o();else switch(u){case 103003:this.setState(function(e){var t=e.errors;return{errors:ke({},t,{title:{level:"error",text:"已经存在的问题"}})}},function(){return t.titleInput.focus()});break;case 103001:this.setState(function(e){var t=e.errors;return{errors:ke({},t,{detail:{level:"error",text:"过长的补充说明"}})}},function(){return t.editable.focus()});break;default:this.setState(function(e){var t=e.errors;return{errors:ke({},t,{overall:p})}})}}}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value,isEditingTitle:!0})}},{key:"handleBlurTitle",value:function(){this.setState({errors:this.validate("title",!0),isEditingTitle:!1})}},{key:"handleChangeDetail",value:function(e){this.setState({detail:e})}},{key:"handleChangeReason",value:function(e){var t=this,n=this.state.step;this.setState({reason:e,step:1},function(){0!==n?"other"===e&&t.reasonInput.focus():setTimeout(function(){return t.titleInput.focus()})})}},{key:"handleChangeOtherReason",value:function(e){this.setState({otherReason:e.target.value})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"title"===e){var r=this.state.title,a=null;0!==r.length||t?r.length>51?a={level:"error",text:"问题标题超出 "+(r.length-51)+" 个字"}:r.length>0&&r.length<3?a={level:"error",text:"问题字数太少了吧"}:r.length>0&&-1===r.indexOf("?")&&-1===r.indexOf("？")?a={level:"error",text:"你还没有给问题添加问号"}:(r.match(/(\?|？)/g)||[]).length>1&&(a={level:"warning",text:"多个问题建议拆分"}):a={level:"error",text:"问题标题不能为空"},n=ke({},n,{title:a})}if(!e||"reason"===e){var o=null,i=this.state,s=i.reason,l=i.otherReason;s&&("other"!==s||l)||(o={level:"error",text:"必选"}),n=ke({},n,{reason:o})}return n}},{key:"toggleToolbar",value:function(){this.setState(function(e){return{showToolbar:!e.showToolbar}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.detail,a=t.questionType,o=this.state,i=o.title,c=o.step,u=o.isEditingTitle,p=o.showToolbar,f=o.reason,d=o.otherReason,m=o.uploadModalShown,h=o.videoQuestionConfirmShown,v=o.videoQuestionConfirmAllowContinue,y=o.videoQuestionConfirmTitle,w=o.videoQuestionConfirmText,g=o.errors,E=g.title,O=g.detail,C=g.reason,k=g.overall,j=null;if(u){var _=51-i.length;_>=0?_<10&&(j="还可以输入 "+_+" 个字"):j=s.a.createElement("span",{className:"QuestionAsk-error"},"问题标题超出 ",-_," 个字")}else E&&(j=s.a.createElement("span",{className:"QuestionAsk-"+E.level},E.text));var S=null;return 0===c?S=s.a.createElement("div",null,_e.map(function(t){return s.a.createElement("div",{className:"QuestionEdit-reason",key:t.value,onClick:function(){e.onChangeReason(t.value)}},t.text,s.a.createElement(me.a,null))})):1===c&&(S=s.a.createElement("div",{className:"QuestionAsk"},s.a.createElement(we.b,{title:y,onClose:this.handleVideoQuestionModalHide},h&&s.a.createElement("div",{className:"QuestionAsk-videoAlert"},w,s.a.createElement(we.a,null,v&&s.a.createElement(b.c,{preset:"primary",color:"blue",onClick:this.handleSubmitEditQuestion},"发布"),s.a.createElement(b.c,{onClick:this.handleVideoQuestionModalHide},"继续编辑")))),s.a.createElement(we.b,{onClose:this.handleUploadModalHide},m&&s.a.createElement("div",{className:"QuestionAsk-onUploadModal"},"关闭弹窗将丢失上传中的视频内容",s.a.createElement(we.a,null,s.a.createElement(b.c,{preset:"primary",color:"blue",onClick:this.handleUploadModalConfirm},"确认"),s.a.createElement(b.c,{onClick:this.handleUploadModalHide},"取消")))),s.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement(ye.a,{className:"QuestionAsk-title",onRef:function(t){e.titleInput=t},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:i,onChange:this.onChangeTitle,onBlur:this.onBlurTitle})),j&&s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},j))),s.a.createElement("div",{className:"QuestionAsk-section QuestionAsk-DetailSection"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("span",{className:"QuestionAsk-label"},"问题描述（可选）："),s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement(Ee.a,{label:(p?"收起":"展开")+"工具栏",isActive:p,icon:he.a,onClick:this.toggleToolbar}),s.a.createElement(Ee.a,{label:"插入图片",icon:ve.a,onClick:this.triggerImageUpload}),s.a.createElement(Ee.a,{label:"上传视频",icon:be.a,onClick:this.triggerVideoUpload}))),s.a.createElement(Oe.a,{onRef:function(t){e.editable=t},spread:!0,large:!0,allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:p,allowVideoTitleChange:!0,allowHeaderThree:!1,placeholder:"问题背景、条件等详细信息",defaultValue:r,onError:this.handleError,onUploadError:this.handleUploadError,onChange:this.onChangeDetail,onBeforeVideoUpload:this.handleBeforeVideoUpload})),O&&s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement("span",{className:"QuestionAsk-"+O.level},O.text)))),s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement(ge.b,{className:"QuestionEdit-reasonSelect",needsReposition:!0,plain:!0,text:f?null:"请选择一个修改理由",value:f,onChange:this.onChangeReason},_e.map(function(e){return s.a.createElement(ge.a,{key:e.value,value:e.value,text:e.text})})),(!f||"other"===f&&!d)&&(C?s.a.createElement("span",{className:"QuestionAsk-"+C.level},C.text):"必选"),"org"===a||"commercial"===a||s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement(l.Link,{className:"QuestionEdit-why",target:"blank",to:"/question/19550238/answer/95068125"},"为什么问题可以被公共编辑？"))),"other"===f&&s.a.createElement(ye.a,{onRef:function(t){e.reasonInput=t},spread:!0,large:!0,value:d,placeholder:"请输入修改理由",onChange:this.onChangeOtherReason})),s.a.createElement(we.a,null,s.a.createElement(b.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"提交修改"))))),s.a.createElement(we.b,{className:1===c&&"QuestionAsk-Modal",title:Se[c].title,subtitle:Se[c].subtitle,footer:k,onClose:this.handleModalClose,hotKeyClosable:!1,maskClosable:!1},n&&S)}}]),t}(),pe.propTypes={id:u.a.number,title:u.a.string,detail:u.a.string,show:u.a.bool.isRequired,onClose:u.a.func.isRequired,isAnonymous:u.a.bool},pe.contextTypes={currentUser:u.a.object},ue=fe))||ue,Ne=n(28),Ae=n.n(Ne),Re=n(243),xe=n(20),Ie=n.n(xe),Me=n(1904),Le=n(170),De=(n(2631),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var qe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={items:[],value:""},e.position=e.position.bind(e),e.handleRemove=e.handleRemove.bind(e),e.handleKeyDown=e.handleKeyDown.bind(e),e.handleChange=e.handleChange.bind(e),e.handleSelect=e.handleSelect.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),De(t,[{key:"handleRemove",value:function(e){var t=this.props,n=t.value,r=t.onChange,a=t.onRemove;if(a&&a(e),r){var o=n.slice(0);o.splice(e,1),r(o)}}},{key:"handleKeyDown",value:function(e){var t=this.props.value;8===e.keyCode&&!this.state.value&&t.length&&this.handleRemove(t.length-1)}},{key:"handleChange",value:function(e){var t=this;this.setState({value:e}),e?this.props.fetchFn(e).then(function(e){t.setState({items:e.filter(function(e){return!t.props.value.find(function(t){return t.urlToken===e.urlToken})})})}):this.setState({items:[]})}},{key:"handleSelect",value:function(e,t){var n=this.props,r=n.value,a=n.onChange,o=n.onAdd;o&&o(t,this.state.value),a&&a([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r),[t])),this.setState({value:"",items:[]})}},{key:"clearInput",value:function(){this.setState({value:"",items:[]})}},{key:"position",value:function(){var e=this.input.getBoundingClientRect(),t=e.left;return{targetContainerStyle:{top:e.bottom+13,left:t-13}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.inputProps,a=t.value,o=t.renderTagInner,i=t.alignWithInput,l=t.menuProps,c=t.onRef,u=t.after,p=Ie()(t,["className","inputProps","value","renderTagInner","alignWithInput","menuProps","onRef","after"]),f=this.state,d=f.value,m=f.items;return s.a.createElement(Le.b,Object.assign({},p,{className:W()("TagInput",{"TagInput--empty":0===a.length},n),value:d,ref:function(t){e.autoComplete=t},onRef:function(t){c&&c(t),e.input=t},items:m,inputProps:Object.assign({},r,{onKeyDown:this.handleKeyDown,before:a.map(function(t,n){return s.a.createElement(ie.a,{key:n,removable:!0,onRemove:function(){return e.handleRemove(n)}},o(t))}),after:u}),menuProps:Object.assign({position:i?this.position:null,style:{maxHeight:256,overflow:"scroll"}},l),onChange:this.handleChange,onSelect:this.handleSelect}))}}]),t}();qe.propTypes={fetchFn:u.a.func.isRequired,renderTagInner:u.a.func.isRequired,value:u.a.array.isRequired,after:u.a.node,alignWithInput:u.a.bool,onChange:u.a.func,onAdd:u.a.func,onRemove:u.a.func},qe.defaultProps={alignWithInput:!1,after:s.a.createElement(Me.a,{fill:"#afbdcf",size:18})};var Be,ze,Qe,Ue=qe,Ve=n(101),Fe=n(16),He=n(76),We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ye(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Je(e){return e.name.startsWith("创建 ")&&e.name.endsWith(" 话题")}var Xe,$e,Ze=Object(p.connect)(function(e){return{currentUser:Object(Fe.c)(e)}},{createTopic:Ve.d,loadCurrentUser:Fe.j})(Be=Object(He.a)({load:function(e){return e.loadCurrentUser("can_edit_topic")},shouldLoad:function(e){var t=e.currentUser;return t&&void 0===t.canEditTopic}})((ze=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Ke(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),Qe.call(r),Ke(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ge(t,[{key:"render",value:function(){var e=Ae()(this.props,["onChange"]),t=e.value,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value"]);return s.a.createElement(Ue,We({inputProps:{large:!0,spread:!0,placeholder:"添加话题"+(t.length>0?"（"+t.length+"/5）":""),disabled:t.length>=5},fetchFn:this.fetchTopic,renderTagInner:function(e){return s.a.createElement("a",{target:"_blank",href:"//www.zhihu.com/topic/"+(e.id||e.urlToken)},e.name)},value:t,alignWithInput:!0,onAdd:this.handleAdd,onRemove:this.handleRemove},n))}}]),t}(),Qe=function(){var e=this;this.fetchTopic=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Re.c.apply(void 0,n.concat([[],{topic_filter:1}])).then(function(t){t=t.filter(function(e){return!Je(e)});var r=e.props.currentUser,a=n[0];return r&&r.canEditTopic&&!t.find(function(e){return e.name===a})?[].concat(Ye(t),[{urlToken:"topic",name:"创建 "+a+" 话题",token:a}]):t})},this.createTopic=function(t){(0,e.props.createTopic)(t).then(function(n){var r=n.payload,a=r.id,o=r.avatarUrl,i=e.props,s=i.value,l=i.onChange;l&&l(s.map(function(e){return e.name===t?{urlToken:a,name:t,avatarUrl:o}:e}))}).catch(function(){var n=e.props,r=n.value,a=n.onChange;a&&a(r.filter(function(e){return e.name!==t}))})},this.handleAdd=function(t,n){var r=e.props,a=r.value,o=r.onChange;if(Je(t))return e.createTopic(n),void(o&&o([].concat(Ye(a),[{name:n}])));o&&o([].concat(Ye(a),[t]))},this.handleRemove=function(t){var n=e.props,r=n.value,a=n.onChange,o=r.slice(0);o.splice(t,1),a&&a(o)}},Be=ze))||Be)||Be,et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var nt={topics:[],errors:{topics:null,overall:null}},rt=($e=Xe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=nt,e.onChangeTopics=e.handleChangeTopics.bind(e),e.onBlurTopics=e.handleBlurTopics.bind(e),e.onSubmit=e.handleSubmit.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),tt(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.notification,a=n.show,o=n.onClose,i=e.notification,s=e.show,l=e.topics;if(!a&&s&&(setTimeout(function(){return t.topicsInput.focus()}),this.setState({topics:l})),r!==i){var c=i.text;i.id?(this.setState(nt),o()):this.setState(function(e){var t=e.errors;return{errors:et({},t,{overall:c})}})}}},{key:"handleChangeTopics",value:function(e){this.setState({topics:e})}},{key:"handleBlurTopics",value:function(){this.setState({errors:this.validate("topics",!0)})}},{key:"handleSubmit",value:function(){var e=this;this.setState({errors:this.validate()},function(){for(var t=e.props.topics,n=e.state,r=n.topics,a=n.errors,o=["topics"],i=0;i<o.length;i++){var s=o[i],l=a[s];if(l&&"error"===l.level)return void e[s+"Input"].focus()}if(r!==t){var c={topicUrlTokens:r.map(function(e){return e.urlToken||e.id})};e.props.dispatch(Object(w.fb)(e.props.id,c))}})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"topics"===e){var r=null;0!==this.state.topics.length||t||(r={level:"error",text:"至少添加一个话题"}),n=et({},n,{topics:r})}return n}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.onClose,a=this.state,o=a.topics,i=a.errors,l=i.topics,c=i.overall;return s.a.createElement(we.b,{className:"QuestionAsk-Modal",size:"large",title:"修改话题",subtitle:"最多只能为一个问题绑定 5 个话题",footer:c,onClose:r},n&&s.a.createElement("div",{className:"QuestionAsk"},s.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement(Ze,{onRef:function(t){e.topicsInput=t},value:o,onChange:this.onChangeTopics,onBlur:this.onBlurTopics})),l&&s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement("span",{className:"QuestionAsk-"+l.level},l.text)))),s.a.createElement(we.a,null,s.a.createElement(b.c,{preset:"primary",color:"blue",onClick:this.onSubmit},"提交修改")))))}}]),t}(),Xe.propTypes={show:u.a.bool.isRequired,onClose:u.a.func.isRequired},$e),at=Object(p.connect)(function(e){return{notification:e.notification.updateQuestionTopics}})(rt),ot=n(2194),it=n(90),st=n(80),lt=n(3),ct=function(e){return s.a.createElement(lt.a,e,s.a.createElement("path",{d:"M12 9h.009c4.65-.014 8.642 5.096 8.705 9.629 0 .36-.303.461-.592 0-1.474-2.544-3.878-3.862-7.03-3.862h-1.084L12 17.583a.7.7 0 0 1-1.125.556l-7.16-5.478a.7.7 0 0 1-.009-1.105l7.16-5.66a.7.7 0 0 1 1.134.55V9z"}))};ct.defaultProps={name:"Undo"};var ut=ct,pt=function(e){return s.a.createElement(lt.a,e,s.a.createElement("path",{d:"M19.49 14.362l-2.03-1.83 1.116-1.137a1.352 1.352 0 0 1 1.921-.009c.535.535.54 1.4.01 1.94l-1.016 1.036zm-4.883 4.935a2.3 2.3 0 0 1-1.12.63l-1.136.264c-.29.058-.668-.105-.56-.56l.27-1.158a2.3 2.3 0 0 1 .599-1.09l3.809-3.84 2.03 1.829-3.892 3.925zM4.06 5H19.94C20.526 5 21 5.448 21 6s-.474 1-1.059 1H4.06C3.474 7 3 6.552 3 6s.474-1 1.059-1zM4 11h9a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h4a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};pt.defaultProps={name:"Preview"};var ft,dt,mt,ht,vt=pt,bt=n(8),yt=n(741),wt=n(38),gt=n(47),Et=(n(2632),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var kt,jt,_t=300,St=(ft=Object(p.connect)(function(e,t){return{draft:Object(w.m)(e,{id:t.params.id}),question:Object(w.S)(e,{id:t.params.id})}},{restoreAnswer:gt.y,cancelScheduledPublish:gt.d,showNotification:z.g}),Object(l.withRouter)(dt=ft((ht=mt=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Ct(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.getRenderProps=function(){var e=r.props,t=e.draft,n=e.question,a=n.id,o=n.relationship,i=(o=void 0===o?{}:o).myAnswer;return i?i.isDeleted?{icon:s.a.createElement(ut,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:r.handleRestoreAnswer}}:{icon:s.a.createElement(vt,{size:17,className:"QuestionButton-icon"}),text:"查看回答",props:{to:"/question/"+a+"/answer/"+i.answerId,onClick:r.handleFocusAnswer},Wrapper:wt.a}:{icon:s.a.createElement(M.a,{className:"QuestionButton-icon Button-icon",name:"modify"}),text:t?"编辑回答":"写回答",props:{onClick:r.handleAddAnswer}}},r.handleFocusAnswer=function(){var e=document.querySelector(".AnswerCard");e&&(e.classList.add("is-focus"),r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(function(){return e.classList.remove("is-focus")},_t))},r.handleRestoreAnswer=function(){var e=r.props,t=e.question,n=t.relationship.myAnswer,a=t.id,o=e.restoreAnswer,i=e.showNotification;n.isDeleted&&o(a,n.answerId).then(function(){return i("已撤销删除回答")})},r.handleAddAnswer=r.context.authRequired(function(e){var t=r.props,n=t.draft,a=t.question.reviewInfo,o=(a=void 0===a?{}:a).tips,i=t.zaId,s=t.cancelScheduledPublish,l=e.currentTarget,c=function(){o?r.props.showNotification(o,"red"):(i&&bt.default.trackEvent(null,{id:i}),bt.default.trackEvent(r,{action:n&&n.editableContent?"Edit":"Answer",is_intent:!0,name:l.textContent}),r.context.startAddAnswer())};n&&n.schedule?st.a.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then(function(){s(r.props.question.id).then(c)},function(){}):c()}),Ct(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ot(t,[{key:"componentDidMount",value:function(){Object(yt.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.size,a=e.preset,o=e.color,i=void 0===o?"blue":o,l=e.onClick,c=this.getRenderProps(),u=c.icon,p=c.text,f=c.props,d=c.Wrapper,m=void 0===d?b.c:d,h=s.a.createElement(s.a.Fragment,null,u,p);return s.a.createElement(m,Et({},f,l&&{onClick:l},{color:i,size:r,preset:a,className:n}),t||h)}}]),t}(),mt.contextTypes={authRequired:u.a.func,startAddAnswer:u.a.func},dt=ht))||dt)||dt),Pt=n(102),Tt=n(478),Nt=n(43),At=(n(2633),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function xt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var It=(kt=Object(p.connect)(function(e){return{shouldOia:Object(Nt.f)(e)}}),Object(l.withRouter)(jt=kt(jt=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=xt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.createOpenInAppHandler=function(e){var t=r.props.question.id;return function(){return Object(it.b)(Object(Tt.a)({type:"question",id:t},{utm_content:e}))}},xt(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Rt(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,r=n.relationship,a=n.relationship.isAuthor,o=n.isNormal,i=n.status,l=(i=void 0===i?{}:i).isLocked,c=n.questionType,u=n.isMuted,p=n.id,f=e.shouldOia,d=e.inTopBar,m="commercial"===c&&u;return s.a.createElement("div",{className:"QuestionButtonGroup"},a&&m?s.a.createElement(wt.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green"},"推广问题"):s.a.createElement(Pt.a,At({id:p,zaId:d?3408:3309,type:"question",preset:"primary",isFollowing:(r&&{}.hasOwnProperty.call(r,"isFollowing")?r:t).isFollowing,disabled:m},f&&{onClick:this.createOpenInAppHandler("follow_question")})),o&&!l&&s.a.createElement(St,At({color:"blue",zaId:d?3409:3311},f&&{onClick:this.createOpenInAppHandler("write_answer")})))}}]),t}())||jt)||jt),Mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Lt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.state={count:Math.round(o.props.count)},o.next=function(){var e=o.props.onEnd,t=o.state.count-1;o.setState({count:t}),0===t&&(clearInterval(o.handle),e&&e())},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Mt(t,[{key:"componentDidMount",value:function(){this.state.count<=0||(this.handle=setInterval(this.next,this.props.interval))}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.state.count;return s.a.createElement("span",null,e)}}]),t}();Lt.propTypes={count:u.a.number.isRequired,interval:u.a.number,onEnd:u.a.func},Lt.defaultProps={interval:1e3};var Dt=Lt,qt=n(218),Bt=n(25),zt=n(234),Qt=n(79),Ut=n(137),Vt=n.n(Ut),Ft=n(58),Ht=n(463),Wt=n(89),Gt=n(104),Yt=n(242),Kt=(n(2634),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Jt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Xt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Jt(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,r=e.children,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","className","children"]),o=W()("QuestionMainAction",n);return t?s.a.createElement(l.Link,Kt({to:t,className:o},a),r):s.a.createElement(b.c,Kt({className:o},a),r)}}]),t}(),$t=n(46),Zt=n(467),en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function nn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var rn,an,on,sn=function(e,t){return e&&e.replace(new RegExp(t,"g"),function(e){return"<em>"+e+"</em>"})},ln=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=nn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={mounted:!1},r.handleInvite=function(){var e=r.props,t=e.user.urlToken,n=e.onInvite;bt.default.trackEvent(r,{id:3314}),n(t)},r.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},nn(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),tn(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,r=e.topic,a=e.isInvited,o=e.keyword,i=e.reason,c=t.name,u=en({},t,{name:s.a.createElement(zt.a,{tag:"span",html:sn(c,o)})}),p=s.a.createElement(Zt.a,{user:u,status:i||(n?s.a.createElement("div",null,"在话题 ",s.a.createElement(le.a,{topic:r})," 下有 ",s.a.createElement(l.Link,{to:"/people/"+t.urlToken+"/answers/topic/"+r.id},Object($t.formatNumber)(n)," 个回答")):s.a.createElement(zt.a,{html:t.headline})),action:s.a.createElement(b.c,{color:a?void 0:"blue",disabled:a,onClick:this.handleInvite},a?"已邀请":"邀请回答"),meta:null}),f={module:"UserItem",index:this.props.index,content:{member_hash_id:t.id},view:{id:o?4436:4437},extra:{search:{raw_query:o||""}},trackCardShow:!0};return this.state.mounted?s.a.createElement(B.a,en({getContainer:this.getContainer},f),p):p}}]),t}(),cn=n(233),un=n(19),pn=(n(2635),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function fn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var dn,mn,hn,vn=Object(p.connect)(null,{openAutoInvite:un.M,closeAutoInvite:un.d})((on=an=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=fn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(){var e=r.props,t=e.questionId,n=e.closeAutoInvite,a=e.openAutoInvite;return"close"===e.item.status?(bt.default.trackEvent(null,{id:3313}),a(t)):n(t)},fn(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),pn(t,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,r=t.description,a=t.status,o=t.title,i="close"===a;return s.a.createElement(cn.e,{data:t,image:s.a.createElement(G.a,{size:38,url:n}),title:o,meta:s.a.createElement(cn.d,null,r),className:"AutoInviteItem-wrapper--desktop",extra:s.a.createElement(b.c,{preset:"link",className:i?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick},i?"开启邀请":"已开启")})}}]),t}(),an.propTypes={questionId:u.a.number.isRequired,item:u.a.object},rn=on))||rn,bn=n(490),yn=(n(2636),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),wn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),gn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function En(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var On,Cn=300,kn=function(e){var t=e.user;return s.a.createElement("div",{className:"InviteeItem"},s.a.createElement("div",{className:"InviteeItem-content"},s.a.createElement(G.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),s.a.createElement("h4",{className:"InviteeItem-title"},t.name)))},jn=Object(se.a)({module:"InvitationFrame"})((hn=mn=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=En(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={expanded:!1,keyword:null},r.onChange=Vt()(function(e){r.props.onChange(e)},Cn),r.handleChange=function(e){var t=e.target.value;r.setState({keyword:t}),t&&r.onChange(t)},r.handleExpand=function(){(0,r.props.trackEvent)(r,{action:"LoadMore",element:"Button"}),r.setState({expanded:!0})},r.handleInvite=function(e){var t=r.state.keyword;return(0,r.props.onInvite)(e,t)},En(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),gn(t,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,s.a.createElement(ye.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:s.a.createElement(M.a,{grey:!0,name:"search"}),"data-tooltip":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),r=[t.length?s.a.createElement("span",null,"你已邀请 ",s.a.createElement(Wt.a,{toggler:s.a.createElement(b.c,{className:"Invitees-toggler",preset:"plain"},s.a.createElement("span",{className:"Invitees-togglerUsers"},t.slice(0,2).map(function(e,t){return s.a.createElement("span",{key:t},0===t?"":"、",s.a.createElement("span",null,e.name))})),t.length>2&&" 等 "+t.length+" 人"),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0},s.a.createElement("div",{className:"Invitees"},t.map(function(e){return s.a.createElement(kn,{key:e.urlToken,user:e})})))):s.a.createElement("h2",{className:"QuestionInvitation-title"},"你可以邀请下面用户，快速获得回答"),n],a=wn(r,2),o=a[0],i=a[1];return s.a.createElement(bn.a,{header:o,options:i})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,r=t.isDrained,a=t.items,o=t.searchItems,i=t.expandCount,l=t.autoInvitationItem,c=t.question,u=(c=void 0===c?{}:c).id,p=this.state,f=p.expanded,d=p.keyword,m=d?o:a,h=Boolean((void 0===i||i>0)&&!d&&m.length&&l&&l.status),v=h?i-1:i,b=!v||f,y=i?Ft.d:"div";return s.a.createElement(y,{className:"QuestionInvitation"},this.renderHeader(),n?s.a.createElement("div",{className:W()("QuestionInvitation-content","QuestionInvitation-content--centered")},s.a.createElement(Gt.a,null)):s.a.createElement("div",{className:W()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!m.length})},m.length?s.a.createElement(B.a,{module:"UserList"},s.a.createElement(Ht.b,null,h&&s.a.createElement(vn,{questionId:u,item:l}),(b?m:m.slice(0,v)).map(function(t){return s.a.createElement(Ht.a,{className:W()({"List-item--mobile":!1}),key:t.user.urlToken},s.a.createElement(ln,yn({},t,{keyword:d,onInvite:e.handleInvite})))}))):s.a.createElement(Yt.a,{entityType:"users",placeholder:r?"没有可以邀请的人":"没有找到你想邀请的人"}),m.length>v&&!b&&s.a.createElement(Xt,{onClick:this.handleExpand},"更多推荐结果")))}}]),t}(),mn.propTypes={expandCount:u.a.number,items:u.a.array,searchItems:u.a.array,onInvite:u.a.func.isRequired},dn=hn))||dn,_n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Pn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Tn,Nn,An,Rn,xn,In=Object(p.connect)(function(e,t){var n=t.question.id,r=e.entities,a=r.users,o=r.topics,i=e.question,s=i.invitationCandidates,l=i.invitees,c=i.autoInvitation,u=function(e){var t=e.member,n=e.isInvited,r=e.topicContributions,i=e.reason,s=r&&r.sort(function(e,t){return t.contributionsCount-e.contributionsCount})[0]||{},l=s.topic,c=s.contributionsCount;return{user:a[t],topic:o[l],isInvited:n,contributionsCount:c,reason:i}},p=s[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},f=p.isFetching,d=p.isDrained,m=p.items,h=p.searchItems,v=(l[n]||{items:[]}).items;return{isFetching:f,isDrained:d,items:m.map(u),searchItems:h.map(u),invitees:v.map(function(e){return a[e]}),autoInvitationItem:c[n]}},{loadItems:w.G,updateInvitation:w.Y,loadAutoInvitation:w.v})(On=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Pn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=r.props,n=t.question.id;(0,t.loadItems)(n,"invitationCandidates",{keyword:e})},r.handleInvite=function(e,t){r.props.updateInvitation(r.props.question.id,e,t?"search":"normal")},Pn(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Sn(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.status,a=(r=void 0===r?{}:r).isLocked,o=r.isClose,i=r.isEvaluate,s=r.isSuggest,l=e.loadItems,c=e.loadAutoInvitation;e.isDrained||a||o||i||s||(l(n,"invitationCandidates"),l(n,"invitees"),c(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,r=e.isEvaluate,a=e.isSuggest;return t||n||r||a?null:s.a.createElement(jn,_n({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),t}())||On,Mn=n(117),Ln=(n(2637),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Dn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var qn,Bn=(Tn=Object(Mn.a)({replacement:null}),Nn=Object(p.connect)(function(e,t){var n=e.entities.questions,r=e.question.inviters,a=t.location.query,o=t.question.id,i={isMuteSpecial:Object(w.u)(t.question),inviters:r[o]};if(a.rf&&/^\d+$/.test(a.rf)){var s=n[Number(a.rf)];s&&(i.fromQuestion=s)}return i},{loadItems:w.G,loadQuestion:w.I,revokeQuestionRedirection:w.U,deleteInviters:w.j}),Tn(An=Object(l.withRouter)(An=Nn((xn=Rn=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Dn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},r.redirect=function(){var e=r.props,t=e.router,n=e.location.query,a=e.question,o=a.id,i=a.redirection;i&&i.to&&i.to.id&&"1"!==n.nr&&t.push("/question/"+i.to.id+"?rf="+o)},r.handleRedirectionClose=function(){r.setState({redirectionHidden:!0,invitersHidden:!0}),r.timeout=setTimeout(function(){r.setState({invitersHidden:!1})},1e3)},r.handleCloseInviters=function(){r.setState({invitersHidden:!0})},r.handleDeleteInviters=function(e){var t=r.props,n=t.question.id;(0,t.deleteInviters)(n),r.handleCloseInviters(),bt.default.trackEvent(e.target,{action:"Ignore"})},r.handleCancelAnonymous=function(){(0,r.props.onInvitationTipClose)(),r.context.toggleAnonymous(!1)},r.handleInvite=function(e){r.setState({invitersHidden:!0,invitationModalShown:!0}),bt.default.trackEvent(e.target,{action:"Invite",is_intent:!0})},r.handleInvitationModalHide=function(){r.setState({invitationModalShown:!1})},Dn(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ln(t,[{key:"componentWillMount",value:function(){Object(Bt.isBrowser)()&&this.nextQuestion(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"nextQuestion",value:function(e){var t=this,n=this.context.currentUser,r=e.location.query,a=e.question.id,o=e.fromQuestion,i=e.loadItems,s=e.loadQuestion;clearTimeout(this.timeout),this.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),n&&"guest"!==n.userType&&i(a,"inviters"),r.rf&&/^\d+$/.test(r.rf)&&!o&&(this.setState({redirectionLoading:!0}),s(Number(r.rf)).catch(function(){}).then(function(){t.setState({redirectionLoading:!1})}))}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,r=t.question.id;(0,t.revokeQuestionRedirection)(e).then(function(){n[e===r?"replace":"push"]("/question/"+e)}),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?s.a.createElement("div",{className:"QuestionStatus-bar"},s.a.createElement("div",{className:"QuestionStatus-bar-inner"},s.a.createElement("div",{className:"QuestionStatus-bar-commercialMuted"},"该品牌提问尚未激活，无法在社区内流通。请"," ",s.a.createElement("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer"},"前往广告平台")," ","进行设置。"),s.a.createElement("p",null,"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"))):null}},{key:"renderMute",value:function(){if(this.props.isMuteSpecial)return s.a.createElement("div",{className:"QuestionStatus-bar"},s.a.createElement("div",{className:"QuestionStatus-bar-inner"},s.a.createElement("strong",null,"问题已解散。"),s.a.createElement("p",null,"当前问题下的回答暂时无法查看。")))}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&s.a.createElement("div",{className:"QuestionStatus-bar"},s.a.createElement("div",{className:"QuestionStatus-bar-inner"},s.a.createElement("strong",null,e.description,"。"),s.a.createElement("em",null,"原因：",e.reason,"。"),1033!==e.reasonId&&s.a.createElement(zt.a,{html:e.note})))}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,r=t.question,a=r.id,o=r.redirection,i=r.relationship,l=(i=void 0===i?{}:i).myAnswer,c=t.inviters,u=t.fromQuestion,p=t.isAnswerPage,f=this.state,d=f.redirectionLoading,m=f.redirectionHidden,h=f.invitersHidden,v=null,y=null;if(!d)if(o&&o.to&&o.to.id&&!m){var w=o.to,g=w.id,E=w.title,O="1"!==n.nr&&!p;v=O?"redirect-countdown":"redirect",y=s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},O?s.a.createElement("span",null,"此问题将在 ",s.a.createElement(Dt,{count:5,onEnd:this.redirect})," ","秒后跳转至"):s.a.createElement("span",null,"此问题已重定向至")," ",s.a.createElement(wt.a,{preset:"plain",to:"/question/"+g+"?rf="+a},E)),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(b.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(a)}},"撤销重定向"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(b.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else if(u&&u.redirection&&u.redirection.to&&u.redirection.to.id&&u.redirection.to.id===a&&!m){var C=u.id,k=u.title;v="redirect-from",y=s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},"从问题"," ",s.a.createElement(wt.a,{preset:"plain",to:"/question/"+C+"?nr=1"},k)," ","跳转而来"),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(b.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(C)}},"撤销重定向"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(b.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else c&&c.length&&!h&&!l&&(y=s.a.createElement(B.a,{module:"InvitationCard",trackCardShow:!0},s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},c.map(function(e,t){return s.a.createElement("span",{key:e.urlToken},0!==t&&"、",s.a.createElement(Qt.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"}))})," ","邀请你回答此问题"),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(b.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite},"邀请别人"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(b.c,{preset:"plain",onClick:this.handleDeleteInviters},"忽略邀请")),s.a.createElement("div",null,s.a.createElement(b.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters},s.a.createElement(M.a,{name:"remove",width:11,height:11}))))));return s.a.createElement(qt.a,{className:"QuestionStatus-notification",notification:y?{key:v,text:y}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return s.a.createElement(qt.a,{className:"QuestionStatus-notification",notification:t?{text:s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},"在匿名状态下无法邀请他人回答"),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(b.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous},"取消匿名"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(b.c,{preset:"plain",onClick:n},"关闭")))}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return s.a.createElement("div",{className:"QuestionStatus"},this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),s.a.createElement(y.b,{size:"fullPage",onClose:this.handleInvitationModalHide},t&&s.a.createElement(In,{question:e})))}}]),t}(),Rn.contextTypes={currentUser:u.a.object,toggleAnonymous:u.a.func},An=xn))||An)||An)||An),zn=n(105),Qn=n(1964),Un=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Vn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Hn,Wn,Gn,Yn,Kn,Jn=Object(p.connect)(function(e,t){var n=t.parent.id,r=e.entities.users,a=e.question,o=a.followers,i=a.concernedFollowers,s=o[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},l=s.isFetching,c=s.isDrained,u=s.order,p=s.ids,f=(i[n]||{ids:[]}).ids;return{isFetching:l,isDrained:c,order:u,items:[].concat(Fn(f),Fn(p.filter(function(e){return!f.includes(e)}))).map(function(e){return r[e]}),currentUser:Object(Fe.c)(e)}},{loadQuestionFollowers:w.L})(qn=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Vn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.load=function(){var e=r.props,t=e.parent.id;(0,e.loadQuestionFollowers)(t)},Vn(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Un(t,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,r=e.isDrained,a=e.items,o=e.currentUser;return s.a.createElement(Qn.a,{currentUser:o,isFetching:n,isDrained:r,items:a,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),t}())||qn,Xn=(n(2638),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),$n=(Yn=["","也关注了该问题"],Kn=["","也关注了该问题"],Object.freeze(Object.defineProperties(Yn,{raw:{value:Object.freeze(Kn)}})));function Zn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var er=(Hn=Object(p.connect)(function(e,t){var n=t.params;return{currentUser:Object(Fe.c)(e),concernedFollowers:Object(w.e)(e,{id:n.id})}},{loadQuestionConcernedFollowers:w.K}),Wn=Object(He.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}),Object(l.withRouter)(Gn=Hn(Gn=Wn(Gn=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Zn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={followersShown:!1},r.showFollowers=function(){r.setState({followersShown:!0})},r.closeFollowers=function(){r.setState({followersShown:!1})},Zn(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Xn(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,r=e.concernedFollowers,a=t.followerCount,o=t.visitCount,i=this.state.followersShown;return s.a.createElement("div",{className:"QuestionFollowStatus"},s.a.createElement(zn.a,{divider:!0,className:"QuestionFollowStatus-counts"},n?s.a.createElement(zn.a.Item,{tag:b.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:a}):s.a.createElement(zn.a.Item,{name:"关注者",value:a}),s.a.createElement(zn.a.Item,{name:"被浏览",value:o})),Boolean(r&&r.length)&&s.a.createElement(b.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers},s.a.createElement("span",{className:"QuestionFollowStatus-people-tip"},I()($n,1===r.length?r[0].name:"他们")),r.map(function(e){return s.a.createElement(Qt.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0,key:e.id})})),s.a.createElement(we.b,{size:"fullPage",onClose:this.closeFollowers},i&&s.a.createElement(Jn,{parent:t})))}}]),t}())||Gn)||Gn)||Gn),tr=n(2129),nr=n(2641),rr=n(1913),ar=n(1887),or=n(40),ir=n(11),sr=n(1951),lr=n(1920),cr=n(167);function ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}n(2639);var pr,fr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function dr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var mr,hr,vr,br,yr=Object(p.connect)()(pr=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=dr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={value:"",items:[]},r.handleChange=function(e){var t=r.props.dispatch;r.setState({value:e});var n=e.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);n?t(Object(w.N)(n[1])).then(function(e){var t=e.payload;r.setState({items:[{name:t.title,urlToken:t.id}]})}):Object(Re.b)(e).then(function(e){r.setState({items:e})})},r.handleSelect=function(e,t){var n=r.props,a=n.dispatch,o=n.question.id,i=n.onSubmitted,s=t.urlToken,l=a(Object(w.f)(o,s));i&&i({id:s},l)},dr(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),fr(t,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return s.a.createElement("div",{className:"QuestionRedirectionCreator"},s.a.createElement("div",{className:"QuestionRedirectionCreator-content"},s.a.createElement(Le.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:s.a.createElement(M.a,{grey:!0,name:"search"})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})))}}]),t}())||pr,wr=n(24),gr=n.n(wr),Er=n(2172),Or=n(248),Cr=n(2126),kr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function jr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _r,Sr,Pr,Tr,Nr=(mr=Object(p.connect)(function(e,t){return{isMuteSpecial:Object(w.u)(t.question)}}),Object(l.withRouter)(hr=mr((br=vr=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=jr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={commentsShown:!1},r.handleCommentsShow=function(){var e=r.props,t=e.question.reviewInfo.tips,n=e.handleReviewingNotification;t?n():(bt.default.trackEvent(r,{action:"Comment",element:"Button",is_intent:!0}),r.setState({commentsShown:!0}))},r.handleCommentsClose=function(){r.setState({commentsShown:!1})},jr(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),kr(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,r=n.pathname,a=n.search,o=Boolean(/^\/question\/(\d*)$/.test(r)),i=Object(wr.parse)(location.search.slice(1)).answer_deleted_redirect;if(o&&"true"!==i){var s=Object(Cr.a)(location.hash);this.setState({byComment:s}),s&&(t.replace(""+r+a),this.handleCommentsShow())}}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,r=e.isMuteSpecial,a=t.commentCount,o=t.adminClosedComment,i=this.state.commentsShown,l="",c=a&&!o;return l="textNumber"===n?c?"评论 "+Object($t.formatNumber)(a):"":c?Object($t.formatNumber)(a)+" 条评论":"添加评论",s.a.createElement("div",{className:"QuestionHeader-Comment"},s.a.createElement(b.c,{preset:"plain",onClick:this.handleCommentsShow,icon:Er.a,label:l,disabled:r}),s.a.createElement(y.b,{size:"fullPage",onClose:this.handleCommentsClose},i&&s.a.createElement(Or.a,{type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission})))}}]),t}(),vr.propTypes={question:u.a.object.isRequired,handleReviewingNotification:u.a.func.isRequired},hr=br))||hr)||hr),Ar=(n(2640),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Rr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var xr={invitationShown:!1,reportShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1},Ir=[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],Mr=[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}],Lr=(_r=Object(p.connect)(function(e,t){return{shouldOia:Object(Nt.f)(e),isMuteSpecial:Object(w.u)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(w.Q)(e),allowCommercialAnonymousAnswer:"show"===Object(Nt.a)(e,"gue_anonymous")}},{deleteQuestion:w.k,deleteBrandQuestion:w.h,updateQuestionLocked:w.db,showNotification:z.g,updateQuestionPermission:w.eb,updateBrandQuestionOpenStatus:w.W}),Object(l.withRouter)(Sr=_r((Tr=Pr=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Rr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state=xr,r.handleReviewingNotification=function(){var e=r.props.question.reviewInfo.tips;r.props.showNotification(e,"red")},r.handleInvite=r.context.authRequired(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).eventId,t=void 0===e?3312:e;bt.default.trackEvent(null,{id:t});var n=r.props,a=n.question,o=a.relationship.isAnonymous,i=a.status,s=(i=void 0===i?{}:i).isLocked,l=i.isClose,c=i.isEvaluate,u=i.isSuggest,p=a.reviewInfo,f=(p=void 0===p?{}:p).tips,d=n.onInvitationTipShow;if(f)r.handleReviewingNotification();else if(o)d();else{var m=void 0;s?m="锁定":l?m="关闭":(c||u)&&(m="建议修改"),m?r.props.showNotification("该问题已被"+m+"，不能邀请人回答此问题","red"):r.handleInvitationShow()}},ir.N.invite),r.handleInvitationShow=function(){return r.setState({invitationShown:!0})},r.handleInvitationHide=function(){return r.setState({invitationShown:!1})},r.handleReport=function(){r.setState({reportShown:!r.state.reportShown})},r.handleLockClick=function(){return r.props.question.status.isLocked?r.handleUpdateQuestionLocked():r.handleLockTipsShow()},r.handleOpenStatusChange=function(e){var t=r.props;(0,t.updateBrandQuestionOpenStatus)(t.question.id,e)},r.handleUpdateQuestionLocked=function(){var e=r.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},r.handleLockTipsShow=function(){return r.setState({lockTipsShown:!0})},r.handleLockTipsHide=function(){return r.setState({lockTipsShown:!1})},r.handleDelete=function(){return r.setState({deleteShown:!0})},r.handleDeleteModalClose=function(){return r.setState({deleteShown:!1})},r.handleConfirmDelete=function(){r.handleDeleteModalClose();var e=r.props,t=e.question,n=t.id,a=t.questionType,o=e.deleteQuestion,i=e.deleteBrandQuestion;return("commercial"===a?i:o)(n).then(function(){location.href="/"})},r.handleRedirectionCreatorShow=function(){r.props.question.reviewInfo.tips?r.handleReviewingNotification():r.setState({redirectionCreatorShown:!0})},r.handleRedirectionCreatorClose=function(){r.setState({redirectionCreatorShown:!1})},r.handleRedirectionCreated=function(e,t){var n=r.props,a=n.router,o=n.question.id,i=e.id;r.handleRedirectionCreatorClose(),t.then(function(){a.push("/question/"+i+"?rf="+o)})},r.handleCommentPermissionChange=function(e){var t=r.props;(0,t.updateQuestionPermission)(t.question.id,e)},r.handleShareMenuTogglerClick=function(){var e=r.props.question.reviewInfo;return!(e=void 0===e?{}:e).tips||(r.handleReviewingNotification(),!1)},r.toggleAnonymous=function(){var e=r.props.question.reviewInfo,t=e.tips,n=e.editTips;t?r.handleReviewingNotification():n?r.props.showNotification(n,"red"):r.context.toggleAnonymous()},r.getQuestionStatus=function(){var e=r.props.question.status,t=(e=void 0===e?{}:e).isClose,n=e.isEvaluate,a=e.isLocked,o=e.isSuggest;return t?"closed":o?"suggested":n?"evaluated":a?"locked":""},Rr(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),Ar(t,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(xr)}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,r=n.permission.canBrandAdminEdit,a=n.question,o=a.status,l=(o=void 0===o?{}:o).isLocked,c=a.commentPermission,u=a.brandOpenStatus;if(!r)return null;var p=Ir,f=Mr;return s.a.createElement(i.Fragment,null,p.map(function(n){var r=n.key,a=n.name,o=!c&&"all"===r||c===r;return s.a.createElement(or.b,{key:r,className:e,onClick:function(){return t.handleCommentPermissionChange(r)}},o&&s.a.createElement(tr.a,{className:"MenuItem-icon",text:!0,center:!0})," ",a)}),s.a.createElement("li",{className:"Menu-divider"}),!l&&f.map(function(n){var r=n.key,a=n.name,o=u===r;return s.a.createElement(or.b,{key:r,className:e,onClick:function(){return!o&&t.handleOpenStatusChange(r)}},o&&s.a.createElement(tr.a,{className:"MenuItem-icon",text:!0,center:!0})," ",a)}),s.a.createElement(or.b,{className:e,onClick:this.handleLockClick},l?"开放回答":"关闭回答"),s.a.createElement("li",{className:"Menu-divider"}))}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,r=t.shouldOia;return e.map(function(e){var t=e.text,a=e.handler;return s.a.createElement(or.b,{key:t,onClick:r?function(){return Object(it.b)(Object(Tt.a)({type:"question",id:n},{utm_content:"invite"}))}:a},t)})}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?s.a.createElement(or.b,{onClick:function(){return Object(it.b)(Object(Tt.a)({type:"question",id:t}))}},"查看问题日志"):s.a.createElement(or.b,{tag:wt.a,a:!0,to:"/question/"+t+"/log"},"查看问题日志")}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,r=e.lockTipsShown,a=e.deleteShown,o=e.redirectionCreatorShown,i=this.props,l=i.question,c=i.question,u=c.id,p=c.title,f=c.answerCount,d=c.collapsedAnswerCount,m=c.relationship,h=m.isAuthor,v=m.isAnonymous,w=c.questionType,g=c.isEditable,E=c.author.urlToken,O=i.isMuteSpecial,C=i.publicEditPermission,k=(C=void 0===C?{}:C).isQuestionRedirectEditable,j=i.currentUserUrlToken,_=i.permission.canBrandAdminEdit,S=this.context.currentUser,P="commercial"===w,T=S&&!h,N=P?_:Boolean(h&&0===f&&0===d),A=[T&&{text:"举报",icon:nr.a,handler:this.handleReport}].filter(Boolean),R=ur(g,E===j,k),x=this.shouldShowAnonymousMenuItem,I=x||this.shouldShowMenu,M=W()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":P});return s.a.createElement("div",{className:"QuestionHeaderActions"},s.a.createElement(b.c,{color:"grey",style:{marginRight:16},onClick:this.handleInvite,label:"邀请回答",icon:rr.a,disabled:O}),s.a.createElement(Nr,{question:l,handleReviewingNotification:this.handleReviewingNotification}),s.a.createElement(lr.a,{id:u,title:p,href:"/question/"+u,onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:O}),A.map(function(e){var t=e.text,n=e.icon,r=e.handler,a=e.disabled;return s.a.createElement(b.c,{key:t,preset:"plain",onClick:r,label:t,icon:n,disabled:a})}),I&&s.a.createElement(or.c,{toggler:s.a.createElement(b.c,{preset:"plain","aria-label":"更多",icon:ar.a}),menuClassName:"QuestionHeader-menu",itemClassName:M},!1,x&&s.a.createElement(or.b,{onClick:this.toggleAnonymous},v?"取消匿名身份":"使用匿名身份"),P&&this.renderCommercialMenuItems(M),N&&s.a.createElement(or.b,{onClick:this.handleDelete},"删除问题"),R&&!S.isOrg&&"normal"===w&&s.a.createElement(or.b,{onClick:this.handleRedirectionCreatorShow},"问题重定向"),!P&&this.renderLogMenuItem()),s.a.createElement(cr.a,{type:"question",urlToken:u,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),s.a.createElement(y.b,{size:"fullPage",onClose:this.handleInvitationHide},t&&s.a.createElement(In,{question:l})),s.a.createElement(sr.a,{title:P?"关闭回答":"锁定问题",subtitle:(P?"关闭":"锁定")+"后该问题将无法添加新回答，你确定要"+(P?"关闭":"锁定")+"吗？",shown:r,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),s.a.createElement(y.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose},o&&s.a.createElement(yr,{question:l,onSubmitted:this.handleRedirectionCreated})),s.a.createElement(sr.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:a}))}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.context.currentUser;if(e&&!e.isOrg){var t=this.props,n=t.question,r=n.questionType,a=n.relationship.isAnonymous,o=t.allowCommercialAnonymousAnswer;if(a)return!0;if("normal"===r)return!0;if("commercial"===r&&o)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,r="commercial"===t;return!r||!(!r||!n)}}]),t}(),Pr.contextTypes={currentUser:u.a.object,authRequired:u.a.func,toggleAnonymous:u.a.func},Sr=Tr))||Sr)||Sr),Dr=n(2203),qr=(n(2642),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Br(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var zr=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Br(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleTrackClick=function(e){bt.default.trackEvent(e.target,{id:4026,action:"Click"})},Br(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),qr(t,[{key:"componentDidMount",value:function(){bt.default.trackCardShow(this,{id:4025})}},{key:"render",value:function(){if(this.props.tips){var e=this.props.tips,t=e.text,n=e.link;return s.a.createElement("a",{className:"CircleDiscussion",href:n,onClick:this.handleTrackClick,target:"_blank"},s.a.createElement(Dr.a,{className:"CircleDiscussion-icon",size:16}),s.a.createElement("span",{className:"CircleDiscussion-text"},s.a.createElement("span",null,t),s.a.createElement("span",null,"了解更多")))}}}]),t}(),Qr=n(2104),Ur=(n(2643),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Vr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Fr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Vr(t,[{key:"render",value:function(){var e=this.props.brand,t=e.name,n=e.logo,r=e.target,a=e.description,o=e.typeDescription,i=r?"a":"div";return s.a.createElement("div",{className:W()("BrandQuestionSymbol",{"is-mobile":!1})},s.a.createElement(i,Ur({className:"BrandQuestionSymbol-brandLink"},r&&{href:this.memberProfileUrl}),s.a.createElement("img",{role:"presentation",src:n,className:"BrandQuestionSymbol-logo"}),s.a.createElement("span",{className:"BrandQuestionSymbol-name"},t),r&&s.a.createElement(Qr.a,{badge:r.badge,isOrg:r.isOrg,noLink:!0})),s.a.createElement("span",null,a),Boolean(o)&&s.a.createElement("span",{className:"BrandQuestionSymbol-typeDesc"},o),!this.props.noDivider&&s.a.createElement("div",{className:"BrandQuestionSymbol-divider"}))}},{key:"memberProfileUrl",get:function(){var e=this.props.brand.target;return"/"+("organization"===e.userType?"org":"people")+"/"+e.urlToken}}]),t}(),Hr=n(818),Wr=n.n(Hr),Gr=864e5;function Yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),r=e-Math.floor(n.getTime()/1e3);if(r<0)return null;var a,o,i,s,l,c=0,u=void 0;if(r>86400){var p=new Date(1e3*e);a=p,o=new Date(n),i=new Date(a),s=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),l=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()),c=Math.floor((l-s)/Gr),u="天"}else r>3600?(c=Math.floor(r/3600),u="小时"):r>60?(c=Math.floor(r/60),u="分钟"):(c=r,u="秒");return{quantity:c,unit:u}}var Kr=n(2644),Jr=n.n(Kr);n(2645);function Xr(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,r=t.prize,a=r.endTime,o=r.rule,i=r.status;return s.a.createElement("div",{className:"BrandQuestionPrizes-tips"},s.a.createElement("div",{className:"BrandQuestionPrizes-tip"},s.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"活动时间","："),Wr()(new Date(1e3*a),"YYYY-MM-DD HH:mm")," 截止"),s.a.createElement("div",{className:"BrandQuestionPrizes-tip"},s.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"活动规则","："),o),s.a.createElement("div",{className:"BrandQuestionPrizes-tip"},s.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"获奖公示","："),"ongoing"===i&&"获奖名单将在活动结束后公布","finished"===i&&"品牌开奖中，即将公布获奖名单","awarded"===i&&s.a.createElement(l.Link,{target:"_blank",to:"/organization/question/"+n+"/winners"},"查看获奖名单"),!1),s.a.createElement("div",{className:"BrandQuestionPrizes-rule"},"品牌方为本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",s.a.createElement("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer"},"《有奖问答活动管理办法》")))},r=e.handleToggle,a=e.expanded,o=e.question,i=o.id,c=o.prize,u=o.relationship,p=(u=void 0===u?{}:u).isAuthor,f=o.permission,d=(f=void 0===f?{}:f).isSuperUser;if(!c||!c.status)return null;var m=c.endTime,h=c.prizes,v=c.status,b=Yr(m);return s.a.createElement("div",{className:W()("BrandQuestionPrizes",{"is-mobile":!1})},s.a.createElement("div",{className:"BrandQuestionPrizes-info"},s.a.createElement("div",{className:"BrandQuestionPrizes-bar",onClick:r},s.a.createElement("div",{className:"BrandQuestionPrizes-desc"},s.a.createElement("div",{className:"BrandQuestionPrizes-symbol"},s.a.createElement(Jr.a,{alt:"logo",width:72,height:18,fill:"ongoing"===v?"#ff9607":"#999999"}),"ongoing"===v&&s.a.createElement("span",null,"距离结束还有",s.a.createElement("em",null,b.quantity),b.unit),"finished"===v&&"待开奖","awarded"===v&&"已开奖"),s.a.createElement("div",{className:"BrandQuestionPrizes-name"},"奖品：",h[0].name,h.length>1&&"等")),s.a.createElement("div",{className:"BrandQuestionPrizes-images"},h.map(function(e,t){var n=e.imageUrl;return n&&s.a.createElement("img",{key:"BrandQuestionPrizes-images"+t,src:n,role:"presentation"})}),s.a.createElement(M.a,{name:"arrow",width:9,height:5,fill:"#9fadc7"}))),a&&s.a.createElement("div",{className:"BrandQuestionPrizes-detail"},h.map(function(e,n){var r=e.imageUrl,a=e.name,o=e.value,i=e.quantity;return s.a.createElement("div",{key:"BrandQuestionPrizes-prize"+n,className:"BrandQuestionPrizes-prize"},s.a.createElement("div",{className:"BrandQuestionPrizes-intro"},r&&s.a.createElement("img",{className:"BrandQuestionPrizes-prizeImage",src:r,role:"presentation"}),s.a.createElement("div",{className:"BrandQuestionPrizes-prizeInfo"},s.a.createElement("div",{className:"BrandQuestionPrizes-prizeName"},h.length>1&&t[n]+"等奖：",a),s.a.createElement("div",{className:"BrandQuestionPrizes-prizeValue"},"价值 ¥ ",o))),s.a.createElement("div",{className:"BrandQuestionPrizes-prizeQuantity"},i," 份"))})),a&&!1),a&&n(),a&&s.a.createElement("hr",{className:"BrandQuestionPrizes-split"}),(d||p)&&s.a.createElement(wt.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/"+i+"/setting/"+("finished"===v?"winners":"prize")},"ongoing"===v&&"编辑有奖回答","finished"===v&&"填写获奖名单"))}var $r,Zr,ea,ta=n(301),na=(n(2646),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var ra,aa,oa,ia=Object(p.connect)(function(e,t){return{question:e.entities.questions[t.question.id]}})($r=Object(ta.a)()((ea=Zr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),na(t,[{key:"render",value:function(){var e=this,t=this.props.question,n=t.id,r=t.permission,a=void 0===r?{}:r,o=a.isSuperUser,l=a.canBrandAdminEdit,c=a.haveCard;return l||o?s.a.createElement(or.c,{className:"BrandQuestionSettingMenu",toggler:s.a.createElement(b.c,null,"设置样式")},s.a.createElement(i.Fragment,null,s.a.createElement(or.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/"+n+"/setting/topbanner")}},"设置提问头图"),s.a.createElement(or.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/"+n+"/setting/prize")}},"编辑有奖问答"),c&&s.a.createElement(or.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/"+n+"/setting/advanced")}},"编辑品牌推荐"))):null}}]),t}(),Zr.contextTypes={currentUser:u.a.object,router:u.a.object},$r=ea))||$r)||$r,sa=n(1869),la=n(480),ca=n(469),ua=(n(2647),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function pa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var fa=Object(p.connect)(function(e,t){return{pin:Object(ca.g)(e,t.target.id)}},{getPinContents:ca.e})(ra=Object(se.a)(function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}})((oa=aa=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=pa(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleFollow=function(){var e=r.props.pin,t=(e=void 0===e?{}:e).author.isFollowing?1977:1976;r.handleTrack(t)},r.handleTrack=function(e){var t=r.props.pin,n=(t=void 0===t?{}:t).author;bt.default.trackEvent(r,{id:e},{button:{text:n.name}})},pa(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),ua(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,r=n.type,a=n.id,o=t.getPinContents;"pin"===r&&o(a,{failsafe:!0}).then(function(t){var n=t.payload,r=(void 0===n?{}:n).author,a=(r=void 0===r?{}:r).name;bt.default.trackCardShow(e,{id:1969},{button:{text:a}})})}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,r=t.id,a=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),o=n||{},i=o.type,l=o.urlToken,c=o.isFollowing,u="https://www.zhihu.com/pin/"+r;return s.a.createElement("div",{className:"QuestionRelatedCard"},s.a.createElement("div",{className:"QuestionRelatedCard-title"},"相关报道"),s.a.createElement("div",{className:"QuestionRelatedCard-content"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(la.truncateHTML)(a,110).content}}),u&&s.a.createElement("a",{className:"QuestionRelated-jump",href:u,onClick:function(){e.handleTrack(1975)}},"查看详情")),l&&s.a.createElement("div",{className:"QuestionRelatedCard-footer"},s.a.createElement("div",null,"来自",s.a.createElement("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/"+l,target:"_blank",onClick:function(){e.handleTrack(1971)}},n.name)),s.a.createElement("div",{onClick:this.handleFollow},s.a.createElement(Pt.a,{className:"QuestionRelatedCard-follow",type:i,id:l,isFollowing:c},s.a.createElement(sa.a,{key:"icon",text:!0,center:!0}),"关注机构"))))}}]),t}(),aa.propTypes={target:u.a.shape({type:u.a.string,id:u.a.string}).isRequired},ra=oa))||ra)||ra,da=(n(2648),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var ma=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),da(t,[{key:"render",value:function(){var e=this.props.question.author;return s.a.createElement("div",{className:"OrgQuestionSymbol"},s.a.createElement("div",{className:W()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1})},s.a.createElement("div",{className:"OrgQuestionSymbol-main QuestionHeader-main"},s.a.createElement("div",{className:"OrgQuestionSymbol-avatar"},s.a.createElement(Qt.a,{user:e,avatar:!0,avatarProps:{size:38}})),s.a.createElement("div",{className:"OrgQuestionSymbol-name"},s.a.createElement(Qt.a,{user:e})," 的提问")),s.a.createElement("div",{className:"OrgQuestionSymbol-tip"},s.a.createElement(wt.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank"},"了解机构提问"))))}}]),t}(),ha=n(2111),va=n(138),ba=(n(2324),function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","人评价"],["","人评价"]));var ya=function(e){var t=e.percent,n=e.reviewerCount,r=e.ratioStatus,a=e.title;return s.a.createElement("div",{className:"QuestionTopicReviewCardExtraInfo-cardTitleContainer"},s.a.createElement("h3",{className:"QuestionTopicReviewCardExtraInfo-cardTitle"},a),"normal"===r?s.a.createElement("div",null," ",s.a.createElement("span",{className:"QuestionTopicReviewCardExtraInfo-percentNum"},t,"%")," ",s.a.createElement("span",null,"知友推荐 · ",I()(ba,n))):s.a.createElement("span",null,"  推荐数据积累中"))};ya.propType={percent:u.a.number.isRequired,reviewerCount:u.a.string.isRequired};var wa,ga=ya,Ea=n(15),Oa=n(2300),Ca=Object(Ea.compose)(Object(p.connect)(null,function(e,t){var n=t.metaInfo.id,r=t.questionId;return{onUpdateVoteTopic:function(t){var a=t.voteFor,o=t.method;return e(Object(un.bb)({questionId:r,id:n,voteFor:a,method:o}))}}}),l.withRouter)(Oa.a),ka=(n(2649),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ja=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Sa,Pa,Ta=Object(Mn.a)(null)(wa=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=_a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.trackReviewCardOpenUrl=function(e){bt.default.trackEvent(e.target,{id:4175,action:"OpenUrl",name:name})},r.renderUnpublishedCard=function(e,t,n){return s.a.createElement(Ft.d,{className:"QuestionHeaderTopicMeta"},r.renderCardImage("QuestionHeaderTopicMeta-SideImg"),s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Content"},s.a.createElement("div",{className:"QuestionHeaderTopicMeta-UnpublishedTitleContainer"},s.a.createElement("h3",{className:"QuestionHeaderTopicMeta-UnpublishedTitle"},e),"  ",s.a.createElement("span",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo"},"暂未上映",Boolean(t)&&" · "+t+" 上映")),s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo",dangerouslySetInnerHTML:{__html:n}})))},_a(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),ja(t,[{key:"renderCardImage",value:function(e){var t=this.props,n=t.meta,r=t.meta.meta,a=r.title,o=r.avatar,i=n.avatarUrl,l=n.category;return s.a.createElement(ha.a,{className:W()(""+e,{"QuestionHeaderTopicMeta-SideImg--goods":"n_goods"===l}),src:o||i,alt:a})}},{key:"renderTopReviewCard",value:function(){var e=this.props,t=e.meta,n=e.questionId,r=t.meta,a=r.title,o=r.summary,i=r.description2,l=r.description1,c=r.pubInfo,u=t.excerpt,p=o||u||i||l;if(1===c.status||2===c.status){var f=c.pubDate;return this.renderUnpublishedCard(a,f,p)}return s.a.createElement(Ft.d,{className:"QuestionHeaderTopicMeta"},s.a.createElement("div",{className:"QuestionHeaderTopicMeta-CardMain"},this.renderCardImage("QuestionHeaderTopicMeta-SideImg"),s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Content"},s.a.createElement(Ca,{metaInfo:t,questionId:n,ReviewCardExtraInfoComponent:ga,reviewerCountFormatter:$t.formatNumber},s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Info",dangerouslySetInnerHTML:{__html:p}})))))}},{key:"render",value:function(){var e=this.props.meta,t=e.category,n=e.id,r=e.vote,a=e.isVote,o=r&&a;if(!o)return null;var i=["like","dislike"].includes(r.status);return s.a.createElement(B.a,ka({module:"TopicItem",moduleName:t},o&&{view:{id:4174,name:i?"已评价":"未评价"}},{card:{content:ka({type:"Topic"},Object(va.a)("topic",n),{sub_type:"MetaCard"})},trackCardShow:!0}),s.a.createElement("a",{href:"/topic/"+n,target:"_blank",rel:"noopener noreferrer","data-za-not-track-link":!0,onClick:this.trackReviewCardOpenUrl},this.renderTopReviewCard()))}}]),t}())||wa,Na=n(2263),Aa=n(1915),Ra=n(37),xa=n(2650),Ia=n.n(xa),Ma=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function La(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Da=(Pa=Sa=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=La(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={remainedTime:null},La(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ma(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,r=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval(function(){e.setState({remainedTime:e.state.remainedTime-5})},5e3)):"function"==typeof r&&r()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return s.a.createElement(i.Fragment,null,"距结束不足 ",s.a.createElement("span",null,"1")," 分钟");var t,n,r=(t=e,n=Math.floor(t/60),{hours:Math.floor(n/60),minutes:n%60}),a=r.hours,o=r.minutes;return 0===a?s.a.createElement(i.Fragment,null,"距结束还有 ",s.a.createElement("span",null,o)," 分钟"):s.a.createElement(i.Fragment,null,"距结束还有 ",s.a.createElement("span",null,a)," 小时"," ",o>0&&s.a.createElement(i.Fragment,null,s.a.createElement("span",null,o)," 分钟"))}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?s.a.createElement("div",{className:e},"距结束还有"):s.a.createElement("div",{className:e},this.renderCountdownTime())}}]),t}(),Sa.propTypes={totalCountdownTime:u.a.number.isRequired,onFinish:u.a.func},Pa),qa=(n(2651),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Ba(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var za,Qa,Ua,Va,Fa=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=Ba(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={expanded:!1,bodyHeight:0},r.contentRef=Object(i.createRef)(),r.handleExpand=function(){var e=r.contentRef.current;r.setState({expanded:!0,bodyHeight:e.offsetHeight+1+"px"}),bt.default.trackEvent(r,{id:5036,action:"Expand"})},r.handleCollapse=function(){r.setState({expanded:!1,bodyHeight:0}),bt.default.trackEvent(r,{id:5037,action:"Fold"})},r.handleClickHeader=function(){r.state.expanded?r.handleCollapse():r.handleExpand()},r.handleCountdownFinish=function(){var e=r.props;(0,e.removeBrandQuestionRedPacket)(e.questionId)},Ba(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),qa(t,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,r="CommercialAnswerRedPacket-countdown";return 2===t?s.a.createElement(Da,{className:r,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):s.a.createElement("div",{className:r},"还剩 ",s.a.createElement("span",null,Object($t.niceNumber)(n))," 个红包")}},{key:"render",value:function(){var e,t,n,r=this.props,a=r.className,o=r.redPacket,i=o.title,l=o.image,c=o.iconText,u=o.content,p=this.state,f=p.expanded,d=p.bodyHeight;return s.a.createElement(B.a,{view:{id:5035},trackCardShow:!0},s.a.createElement("div",{className:W()("CommercialAnswerRedPacket",a,(e={},t="CommercialAnswerRedPacket--expanded",n=f,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},s.a.createElement("div",{className:"CommercialAnswerRedPacket-header",onClick:this.handleClickHeader},s.a.createElement("div",{className:"CommercialAnswerRedPacket-main"},s.a.createElement("div",{className:"CommercialAnswerRedPacket-subtitle"},s.a.createElement("div",{className:"CommercialAnswerRedPacket-badge"},s.a.createElement("span",null,s.a.createElement(Ia.a,{size:11})),s.a.createElement("span",null,c)),this.renderCountdown()),s.a.createElement("div",{className:"CommercialAnswerRedPacket-title"},i)),s.a.createElement("div",{className:"CommercialAnswerRedPacket-image"},s.a.createElement("img",{src:Object(Ra.imgUrl)(l,"xl")})),s.a.createElement("div",{className:"CommercialAnswerRedPacket-icon"},f?s.a.createElement(Na.a,{size:20}):s.a.createElement(Aa.a,{size:20}))),s.a.createElement("div",{className:"CommercialAnswerRedPacket-body",style:{height:d}},s.a.createElement("div",{ref:this.contentRef,className:"CommercialAnswerRedPacket-content",dangerouslySetInnerHTML:{__html:u}}))))}}]),t}(),Ha=Object(p.connect)(null,{removeBrandQuestionRedPacket:w.T})(Fa),Wa=(n(2652),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),Ga=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","提问："],["","提问："]);function Ja(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Xa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var $a=function(e){return s.a.createElement(b.c,Ya({preset:"plain",className:"QuestionHeader-edit"},e),s.a.createElement(M.a,{name:"modify",left:!0}),"修改")};var Za,eo,to,no=(za=Object(p.connect)(function(e,t){var n=e.question.brand,r=e.publicEditPermission,a=e.currentUser,o=t.question.questionType;return{brand:n,publicEditPermission:r,currentUserUrlToken:a,permission:Object(w.Q)(e),isCommercialQuestion:"commercial"===o,isOrgQuestion:"org"===o}},{loadBrand:w.x,updateQuestionLocked:w.db,deleteQuestion:w.k,deleteBrandQuestion:w.h,showNotification:z.g,loadQuestionCommercialBanner:w.J,loadBrandQuestionRedPacket:w.D,loadBrandQuestionPermission:w.B,loadBrandQuestionOpenStatus:w.A,loadBrandQuestionAdvancedStyle:w.y,loadBrandQuestionPrize:w.C}),Object(l.withRouter)(Qa=za((Va=Ua=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Xa(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={collapsed:!0,editShown:!1,editTopicsShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},r.getHandleInvite=function(e){e&&(r.handleInvite=e)},r.handleExpand=function(){r.setState({collapsed:!1})},r.handleCollapse=function(){r.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},r.handleEditShow=r.context.authRequired(function(){var e=(r.props.question.reviewInfo||{}).editTips;e?r.props.showNotification(e,"red"):r.setState({editShown:!0})}),r.handleEditClose=function(){r.setState({editShown:!1})},r.handleEditTopicsShow=r.context.authRequired(function(){var e=(r.props.question.reviewInfo||{}).editTips;e?r.props.showNotification(e,"red"):r.setState({editTopicsShown:!0})}),r.handleEditTopicsClose=function(){r.setState({editTopicsShown:!1})},r.handleInvitationShow=function(){r.setState({invitationModalShown:!0})},r.handleInvitationHide=function(){r.setState({invitationModalShown:!1})},r.handleInvitationTipShow=function(){r.setState({invitationTipShown:!0})},r.handleInvitationTipClose=function(){r.setState({invitationTipShown:!1})},r.handleRedirectionCreatorShow=function(){r.setState({redirectionCreatorShown:!0})},r.handleRedirectionCreatorClose=function(){r.setState({redirectionCreatorShown:!1})},r.handleRedirectionCreated=function(e,t){var n=r.props,a=n.router,o=n.question.id,i=e.id;r.handleRedirectionCreatorClose(),t.then(function(){a.push("/question/"+i+"?rf="+o)})},r.handleDelete=function(){var e=r.props,t=e.question.id,n=e.isCommercialQuestion,a=e.deleteQuestion,o=e.deleteBrandQuestion;return n?o(t).then(function(){location.href="/"}):a(t).then(function(){location.href="/"})},r.handleConfirmDelete=function(){r.handleDeleteModalClose(),r.handleDelete()},r.handleDeleteModalShow=function(){r.setState({deleteModalShown:!0})},r.handleDeleteModalClose=function(){r.setState({deleteModalShown:!1})},r.handlePositionStatusChange=function(e){r.setState({shareMenuPositionStatus:e})},r.handleUpdateQuestionLocked=function(){var e=r.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},r.handleLockTipsShow=function(){return r.setState({lockTipsShown:!0})},r.handleLockTipsHide=function(){return r.setState({lockTipsShown:!1})},r.handleBrandQuestionPrizesToggle=function(){r.setState({brandQuestionPrizesExpanded:!r.state.brandQuestionPrizesExpanded})},Xa(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ga(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question.id),n=e.isCommercialQuestion,r=e.loadBrand,a=e.loadQuestionCommercialBanner,o=e.loadBrandQuestionRedPacket,i=e.loadBrandQuestionPermission,s=e.loadBrandQuestionOpenStatus,l=e.loadBrandQuestionAdvancedStyle,c=e.loadBrandQuestionPrize,u=this.context.currentUser;this.context.currentUser&&Object(Q.c)("question",t,Q.a),n&&(r(t),a(t),l(t),o(t).then(function(e){e&&e.payload||c(t)}),u&&"guest"!==u.userType&&(i(t),s(t)))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.isAnswerPage,a=e.question,o=a.id,i=a.relationship.isAnonymous,s=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===o&&r===s||this.setState({collapsed:!0,invitationTipShown:!1}),i||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,r=t.collapsed;if(n&&!r){var a=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+a-document.documentElement.clientHeight)}}},{key:"renderFooter",value:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,r=t.id,a=t.title,o=t.editableDetail,i=t.topics,l=t.questionType,c=t.relationship.isAnonymous,u=this.state,p=u.collapsed,f=u.editShown,d=u.editTopicsShown,m=this.context.currentUser,h=n&&!0;return s.a.createElement("div",{className:"QuestionHeader-footer"},s.a.createElement("div",{className:"QuestionHeader-footer-inner"},s.a.createElement("div",{className:"QuestionHeader-main QuestionHeader-footer-main"},s.a.createElement(It,{question:t}),h&&s.a.createElement(ia,{question:t}),s.a.createElement(Lr,{question:t,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite}),s.a.createElement("div",{className:"QuestionHeader-actions"},!p&&s.a.createElement(b.c,{preset:"plain",onClick:this.handleCollapse},"收起",s.a.createElement(M.a,{name:"arrow",className:"QuestionHeader-collapse-icon"}))))),m&&s.a.createElement(Te,{id:r,title:a,detail:o,show:f,onClose:this.handleEditClose,questionType:l,isAnonymous:c}),m&&s.a.createElement(at,{id:r,topics:[].concat(Ja(i)),show:d,onClose:this.handleEditTopicsClose}))}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return s.a.createElement(i.Fragment,null,s.a.createElement(oe,{className:"QuestionHeader-specialQuestionAuthor",author:e}),s.a.createElement("div",{className:"QuestionHeader-topicDivider"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.question,a=t.isAnswerPage,o=t.isCommercialQuestion,i=t.isOrgQuestion,l=t.brand,c=t.publicEditPermission,u=t.currentUserUrlToken,p=t.meta,f=t.permission.canBrandAdminEdit,d=r.title,m=r.detail,h=r.topics,v=void 0===h?[]:h,b=r.author,y=r.showAuthor,w=r.author.urlToken,g=r.excerpt,E=r.isEditable,O=r.id,C=r.reviewInfo,k=r.relatedCards,j=void 0===k?[]:k,_=r.annotationDetail,S=r.circleInfo,P=r.redPacket,T=this.state,N=T.collapsed,A=T.invitationTipShown,R=T.brandQuestionPrizesExpanded,x=Wa(p,1)[0],M=v.map(function(e){return{name:e.name,id:e.id}}),z=c||{},Q=z.isQuestionEditable,H=z.isQuestionTopicEditable,W=w===u,G=ur(E,W,Q),Y=ur(E,W,H);return s.a.createElement("div",{"data-zop-question":JSON.stringify({title:d,topics:M,id:O,isEditable:E})},s.a.createElement(V.a,null,s.a.createElement(Bn,{question:r,location:n,invitationTipShown:A,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:a})),o&&(!N||!a)&&s.a.createElement(F.a,{type:r.type,id:r.id}),s.a.createElement(B.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(O)}}},s.a.createElement("div",{className:"QuestionHeader",ref:function(t){e.container=t}},s.a.createElement("div",{className:"QuestionHeader-content"},s.a.createElement("div",{className:"QuestionHeader-main"},S&&S.canWriteCircle&&S.tips&&S.tips.text&&s.a.createElement(zr,{tips:S.tips}),s.a.createElement("div",{className:"QuestionHeader-tags"},Boolean(o&&!y)&&s.a.createElement(Fr,{brand:l}),s.a.createElement("div",{className:"QuestionHeader-topics"},y&&this.renderSpecialQuestionAuthor(),v.map(function(e){return s.a.createElement(de,{item:e,key:e.id})}),(Y||f)&&s.a.createElement($a,{onClick:this.handleEditTopicsShow}))),s.a.createElement("h1",{className:"QuestionHeader-title"},i&&I()(Ka,b.name),d,(G||f)&&s.a.createElement($a,{onClick:this.handleEditShow})),_&&s.a.createElement(D.a,{annotationDetail:_}),j[0]&&s.a.createElement(fa,{target:j[0]}),P&&s.a.createElement(Ha,{questionId:O,redPacket:P}),s.a.createElement(Xr,{question:r,expanded:R,handleToggle:this.handleBrandQuestionPrizesToggle}),Boolean(x&&!o)&&s.a.createElement(Ta,{meta:x,questionId:O}),s.a.createElement(ot.a,{html:m,reviewInfo:C,excerpt:g,collapsed:N,onExpand:this.handleExpand,editable:G||f,onEdit:this.handleEditShow})),s.a.createElement("div",{className:"QuestionHeader-side"},s.a.createElement("div",{className:"QuestionHeader-follow-status"},s.a.createElement(er,{question:r})))),N?this.renderFooter():s.a.createElement(L.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange},this.renderFooter()),i&&s.a.createElement(ma,{question:r}))),s.a.createElement(U.a,null,s.a.createElement("div",{className:"QuestionHeader-content"},s.a.createElement("div",{className:"QuestionHeader-main"},s.a.createElement("h1",{className:"QuestionHeader-title",onClick:function(){Object(q.scrollToTop)()}},d)),s.a.createElement(B.a,{module:"ToolBar",card:{content:{type:"Question",token:String(O)}}},s.a.createElement("div",{className:"QuestionHeader-side"},s.a.createElement(It,{question:r,inTopBar:!0}))))))}}]),t}(),Ua.contextTypes={authRequired:u.a.func,currentUser:u.a.object},Ua.propTypes={question:u.a.object,location:u.a.object,isAnswerPage:u.a.bool},Qa=Va))||Qa)||Qa),ro=n(2171),ao=n(690),oo=(n(2653),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),io=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),so=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function lo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var co="已开启赞赏的回答无法设为匿名，请先关闭赞赏",uo="匿名回答无法开启圈内说，请先取消匿名";function po(e){var t=e.toString();return 1===t.length?"0"+t:t}var fo=function(e){var t=Object(v.parseInputTime)(e);return t?t.getFullYear()+"-"+po(t.getMonth()+1)+"-"+po(t.getDate())+"T"+po(t.getHours())+":"+po(t.getMinutes())+":"+po(t.getSeconds()):""};function mo(){var e=document.querySelector("#js-answerAddCard");e?e.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var ho=Object(p.connect)(function(e,t){var n=t.params,r=n.id,a=n.answerId,o=e.question.meta,i=e.entities.drafts,s=void 0===i?{}:i,l=e.env.referer,c=e.reward,u=void 0===c?{}:c,p=e.currentUser,f=Boolean(a);return so({id:r,meta:o[r]||[],question:Object(w.S)(e,{id:r}),reward:u,draft:s["question_"+r],referer:l,currentUserUrlToken:p},f?{answer:Object(gt.c)(e,{id:a})}:{firstAnswer:Object(gt.h)(e,{id:r})})},{loadQuestion:w.I,loadDraft:w.F,updateQuestionAnonymous:w.bb,showNotification:z.g,getPublicEditPermission:ao.b})((to=eo=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=lo(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={anonymousConfirmShown:!1,isCheckedCircle:!0,answering:!1,hideIsMutedCover:!1},r.getPublicEditPermission=function(){var e=r.props,t=e.question,n=e.currentUserUrlToken,a=e.getPublicEditPermission,o=h()(t,"author.urlToken","");h()(t,"isEditable",!1)&&n&&o!==n&&a()},r.handleToggleAnonymous=function(){var e=r.props,t=e.showNotification,n=e.reward.question,a=void 0===n?{}:n,o=e.id;o&&a[o]&&a[o].isRewardable?t(co,"red"):r.setState({anonymousConfirmShown:!r.state.anonymousConfirmShown})},r.startAddAnswer=function(){var e=r.props,t=e.params.answerId,n=e.location.query.group_id;t||n?(r.context.router.push("/question/"+r.props.id),setTimeout(r.focusAddAnswer)):r.focusAddAnswer()},r.endAddAnswer=function(){r.setState({answering:!1})},r.focusAddAnswer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];mo(),r.setState({answering:Date.now()},function(){e&&setTimeout(mo)})},r.onChangecircleSettings=function(e){var t=r.props,n=t.question.relationship.isAnonymous,a=t.showNotification;if(n&&e)return a(uo,"red"),void r.setState({isCheckedCircle:!1});r.setState({isCheckedCircle:e})},lo(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),io(t,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer,onChangecircleSettings:this.onChangecircleSettings,isCheckedCircle:this.state.isCheckedCircle}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.question;Promise.resolve(t?this.fetchDraft():this.fetchQuestionAndDraft()).then(function(){var t=e.props.draft;if(!e.props.params.answerId){var n="#draft"===location.hash||"#write"===location.hash;(t&&!t.schedule||!t&&n)&&e.focusAddAnswer(n)}}),this.getPublicEditPermission()}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id,n=e.loadQuestion;return Promise.all([n(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e=this.props.loadDraft,t=void 0;return this.context.currentUser&&(t=e(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),t}},{key:"renderMeta",value:function(){var e=function(e){var t=e.title,n=e.id,r=e.topics,a=e.answerCount,o=e.commentCount,i=e.created,s=e.updatedTime,l=e.visitsCount,c=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/"+n,keywords:r.map(function(e){return e.name}).join(","),answerCount:a,commentCount:o,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*s).toISOString(),"zhihu:visitsCount":l,"zhihu:followerCount":c}}(this.props.question);return Object.keys(e).map(function(t){return s.a.createElement("meta",{key:t,itemProp:t,content:e[t]})})}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,r=e.answer,a=e.params.answerId,o=Boolean(a),i=o?r:n;if(i){var l=o?[i.createdTime,i.updatedTime]:[i.created,i.updatedTime],c=oo(l,2),u=c[0],p=c[1],f=fo(u),d=fo(p);return s.a.createElement("script",{type:"application/ld+json"},'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'+t.pathname+'",\n          "appid": "否",\n          "pubDate": "'+f+'",\n          "upDate": "'+d+'"\n        }')}}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.params,a=t.children,o=t.question,l=t.router.location.query,c=t.meta,u=t.firstAnswer,p=Boolean(r.answerId);if(!o)return s.a.createElement("div",null);if("true"===l.answer_deleted_redirect)return s.a.createElement(R,{id:o.id});var f=o.questionType,m=o.isMuted,v=o.title,b=o.relationship,y=b.isAuthor,w=b.myAnswer,g=this.state,E=g.anonymousConfirmShown,O=g.isCheckedCircle,C=g.answering,j=g.hideIsMutedCover,_=h()(o,"circleInfo.canWriteCircle",!1);return s.a.createElement(B.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(o.id)}}},s.a.createElement("div",{className:"QuestionPage",itemScope:!0,itemType:"http://schema.org/Question"},s.a.createElement(d.a,so({title:v},!p&&{meta:Object(ro.c)(o,u)})),this.renderMeta(),this.renderJSONLD(),"commercial"===f&&m&&!j&&y&&s.a.createElement("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){e.setState({hideIsMutedCover:!0})}}),s.a.createElement(no,{meta:c,question:o,location:n,onToggleAnonymous:this.handleToggleAnonymous,isAnswerPage:p}),Object(i.cloneElement)(i.Children.only(a),{question:o,answering:C}),s.a.createElement(k,{question:o,myAnswer:w,shown:E,showCircle:_,isCheckedCircle:O,onChangecircleSettings:this.onChangecircleSettings,onClose:this.handleToggleAnonymous})))}}]),t}(),eo.fetchData=function(e){var t=e.params,n=t.id,r=t.answerId;return function(e,t){return t().env.userAgent.isBot?Promise.all([e(Object(w.O)(n,r)),e(Object(w.P)(n)),e(Object(w.I)(n))]):e(Object(w.I)(n))}},eo.contextTypes={router:u.a.object,currentUser:u.a.object,authRequired:u.a.func},eo.childContextTypes={toggleAnonymous:u.a.func,startAddAnswer:u.a.func,endAddAnswer:u.a.func,onChangecircleSettings:u.a.func,isCheckedCircle:u.a.bool},Za=to))||Za,vo=n(66),bo=n(817),yo=n(1911),wo=n(21),go=n.n(wo),Eo=n(509),Oo=n(119),Co=n.n(Oo),ko=n(1900),jo=(n(2654),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}());var _o=function(e){var t=e.className,n=e.titleClassName,r=e.sourceClassName,a=e.hideButtonClassName,o=e.question,l=o.id,c=o.title,u=o.detail,p=o.excerpt,f=o.isDeleted,d=e.mainSource,m=e.subSource,h=e.mainTool,v=e.subTool,b=e.zaId,y=void 0===b?{}:b,w=e.onMouseEnter,g=void 0===w?Co.a:w,E=e.onMouseLeave,O=void 0===E?Co.a:E,C=e.onExpand,k=void 0===C?Co.a:C,j=e.onCollapse,_=void 0===j?Co.a:j,S="https://www.zhihu.com/question/"+l,P=Object(i.useState)(!0),T=jo(P,2),N=T[0],A=T[1],R=Object(i.useCallback)(function(e){A(!0),_(e),bt.default.trackEvent(e.target,{id:y.collapse,action:"Collapse"})},[A,_,y]),x=Object(i.useCallback)(function(e){A(!1),k(e),bt.default.trackEvent(e.target,{id:y.expand,action:"Expand"})},[A,k,y]);return f?s.a.createElement("div",{className:W()("ListQuestionItem","ListQuestionItem--deleted",t)},s.a.createElement("div",{className:"ListQuestionItem-hint"},"该问题已被删除"),s.a.createElement("div",{className:"ListQuestionItem-mainTool"},h)):s.a.createElement(B.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(l)}},trackCardShow:Boolean(y.cardShow),view:{id:y.cardShow}},s.a.createElement("div",{className:W()("ListQuestionItem",t),onMouseEnter:g,onMouseLeave:O},(d||m)&&s.a.createElement("div",{className:W()("ListQuestionItem-source",r)},d&&s.a.createElement("div",{className:"ListQuestionItem-mainSource"},d),m&&s.a.createElement("div",{className:"ListQuestionItem-subSource"},m)),s.a.createElement("a",{className:W()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!u}),href:S,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":y.titleClick},c),u&&s.a.createElement(ot.a,{className:"ListQuestionItem-RichText",html:u,reviewInfo:{},excerpt:p,collapsed:N,onExpand:x,editable:!1}),s.a.createElement("div",{className:"ListQuestionItem-tool"},s.a.createElement("div",{className:"ListQuestionItem-mainTool"},s.a.createElement(wt.a,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:ko.a,label:"写回答",href:S+"#write",target:"_blank","data-za-not-track-link":!0,onClick:function(e){bt.default.trackEvent(e.target,{id:y.writeAnswer,action:"Answer"})}}),h),(v||!v&&!N)&&s.a.createElement("div",{className:"ListQuestionItem-subTool"},v,!N&&s.a.createElement("div",{className:W()("ListQuestionItem-hideButton",a),onClick:R},"收起",s.a.createElement(Na.a,{className:"ToolsQuestionItem-hideButtonIcon",center:!0}))))))};n(2655);var So=function(e){var t=e.className,n=e.type,r=n.icon,a=n.text,o=e.active,i=void 0!==o&&o,l=e.onClick;return s.a.createElement("div",{className:W()("QuestionType",t,{"QuestionType--active":i}),onClick:l},s.a.createElement(r,{className:"QuestionType-icon",size:18}),a)};n(2656);var Po=function(e){var t=e.className,n=e.label,r=n.icon,a=n.text,o=n.name,i=e.onClick;return s.a.createElement("div",{className:W()("QuestionLabel","QuestionLabel--"+o,t),onClick:i},s.a.createElement(r,{className:"QuestionLabel-icon",size:18}),a)},To=n(770),No=(n(2657),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ao=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function Ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xo=Object(p.connect)(function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:To.b.find(function(e){return e.queryName===n})||To.b[0]}},{updateLaterQuestion:w.Z,updateQuestionFollowers:w.cb,getWaitingQuestions:w.s,deleteWaitingQuestion:w.l,setLaterQuestionAnimate:w.V})(function(e){var t=e.allWaitingQuestions,n=e.defaultType,r=e.updateLaterQuestion,a=e.updateQuestionFollowers,o=e.getWaitingQuestions,c=e.deleteWaitingQuestion,u=e.setLaterQuestionAnimate,p=Object(i.useRef)(null),f=Object(i.useState)(n.name),m=Ao(f,2),h=m[0],v=m[1],y=Object(i.useState)(To.b.reduce(function(e,t){var n=t.name;return No({},e,Ro({},n,0))},{})),w=Ao(y,2),g=w[0],E=w[1],O=Object(i.useState)(null),C=Ao(O,2),k=C[0],j=C[1],_=Object(i.useState)(new Set),S=Ao(_,2),P=S[0],T=S[1],N=Object(i.useState)(new Set),A=Ao(N,2),R=A[0],x=A[1],I=t[h],M=I.isEnd,D=I.isLoading,q=I.questions.filter(function(e){var t=e.question;return!P.has(t.id)});return s.a.createElement("div",{className:"QuestionWaiting"},s.a.createElement(d.a,{title:"等你来答"}),s.a.createElement(Ft.d,{className:"QuestionWaiting-mainColumn"},s.a.createElement(L.a,{offset:62},function(e){var n=e.isFixed;return s.a.createElement("div",{className:W()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":n})},n&&s.a.createElement("div",{className:"QuestionWaiting-typesTopper"}),s.a.createElement("div",{className:W()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":n})},To.b.map(function(e){return s.a.createElement(l.Link,{key:e.name,to:e.queryName?"/question/waiting?type="+e.queryName:"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:e.text}})},s.a.createElement(So,{className:"QuestionWaiting-type",type:e,active:e.name===h,onClick:function(){return function(e){E(No({},g,Ro({},h,window.pageYOffset))),t[e.name].questions.length||o(e.name,20,0),v(e.name),window.scrollTo(0,g[e.name])}(e)}}))})))}),s.a.createElement(vo.b,{ref:p,className:"QuestionWaiting-questions",onLoad:function(){return o(h,20,q.length)},isLoading:D,placeholder:s.a.createElement(vo.a,{className:"QuestionWaiting-placeholder"}),isDrained:M},q.map(function(e){var t=e.labelType,n=e.question,o=e.question.relationship.isFollowing;return s.a.createElement(_o,{key:n.id,className:"QuestionWaiting-questionItem",titleClassName:"QuestionWaiting-questionItemTitle",sourceClassName:W()("QuestionWaiting-questionItemSource",{"QuestionWaiting-questionItemSource--empty":!t}),hideButtonClassName:"QuestionWaiting-questionItemHideButton",question:n,onMouseEnter:function(){return j(n.id)},onMouseLeave:function(){return j(null)},zaId:{titleClick:5364,expand:5365,cardShow:5363,writeAnswer:5367},mainSource:t&&s.a.createElement(Po,{label:To.a.find(function(e){return e.name===t})}),subSource:k===n.id&&s.a.createElement(b.c,{className:"QuestionWaiting-ignoreButton",preset:"plain","data-tooltip":"不感兴趣","data-tooltip-preset":"white","data-tooltip-classname":"QuestionWaiting-ignoreButtonTooltip",color:"grey",icon:bo.a,onClick:function(e){T(new Set(P).add(n.id)),c(n.id),p.current.maybeRun(),bt.default.trackEvent(e.target,{id:5366,action:"Close"})}}),mainTool:s.a.createElement(s.a.Fragment,null,s.a.createElement(b.c,{className:W()("QuestionWaiting-followButton",{"QuestionWaiting-followButton--active":o}),preset:"plain",color:"grey",onClick:function(e){a(n.id,!o),bt.default.trackEvent(e.target,{id:5368,action:o?"UnFollow":"Follow"})}},o?null:s.a.createElement(sa.a,{size:16}),o?"已关注":"关注问题"),s.a.createElement(b.c,{className:W()("QuestionWaiting-laterButton",{"QuestionWaiting-laterButton--active":R.has(n.id)}),preset:"plain",color:"grey",onClick:function(e){var t=!R.has(n.id),a=new Set(R);t?a.add(n.id):a.delete(n.id),x(a),r(n.id,t),t&&!go.a.get("question:hasSeenLaterAnimation")&&(u(!0),go.a.set("question:hasSeenLaterAnimation",!0)),bt.default.trackEvent(e.target,{id:5369,action:t?"Add":"UnAdd"})}},R.has(n.id)?null:s.a.createElement(yo.a,null),R.has(n.id)?"已添加":"稍后答")),subTool:s.a.createElement("div",{className:"QuestionWaiting-info"},Object($t.formatNumber)(n.answerCount)," 个回答"," · ",Object($t.formatNumber)(n.visitCount)," 个浏览"),hideSubToolWhenExpanded:!0})}))),s.a.createElement(Eo.a,{omit:{noCategory:!0}}))}),Io=n(1903),Mo=n(2658),Lo=n.n(Mo),Do=(n(2659),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}());function qo(e){var t=e.laterQuestions,n=e.getLaterQuestions,r=e.updateLaterQuestion,a=Object(i.useRef)(null),o=Object(i.useState)(new Set),c=Do(o,2),u=c[0],p=c[1],f=t.count,d=t.isEnd,m=t.isLoading,h=t.questions.filter(function(e){return!u.has(e.id)});return s.a.createElement("div",{className:"QuestionLater"},s.a.createElement(Ft.d,{className:"QuestionLater-mainColumn"},s.a.createElement("div",{className:"QuestionLater-title"},s.a.createElement(yo.a,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",Boolean(f)&&s.a.createElement("div",{className:"QuestionLater-titleNumber"},f)),!m&&0===h.length&&s.a.createElement("div",{className:"QuestionLater-empty"},s.a.createElement("img",{className:"QuestionLater-emptyImage",src:Lo.a,alt:""}),s.a.createElement("div",{className:"QuestionLater-emptyText"},"还没有稍后答，",s.a.createElement(l.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting"},"看看为你推荐的问题"))),s.a.createElement(vo.b,{ref:a,className:"QuestionLater-questions",onLoad:function(){return n(20,h.length)},isLoading:m,placeholder:s.a.createElement(vo.a,{className:"QuestionLater-placeholder"}),isDrained:d},h.map(function(e){return s.a.createElement(_o,{key:e.id,className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:s.a.createElement(s.a.Fragment,null,s.a.createElement(b.c,{className:W()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){p(new Set(u).add(e.id)),r(e.id,!1),a.current.maybeRun(),bt.default.trackEvent(t.target,{id:5376,action:"Delete"})}},s.a.createElement(Io.a,{size:22}),"移除"),!e.isDeleted&&s.a.createElement("div",{className:"QuestionLater-info"},Object($t.formatNumber)(e.answerCount)," 个回答"," · ",Object($t.formatNumber)(e.visitCount)," 个浏览"))})}))),s.a.createElement(Eo.a,{omit:{noWrite:!0,noCreator:!0,noCategory:!0}}))}qo.fetchData=function(e){return(0,e.dispatch)(Object(w.r)())};var Bo=Object(p.connect)(function(e){return{laterQuestions:e.question.laterQuestions}},{getLaterQuestions:w.q,updateLaterQuestion:w.Z})(qo),zo=n(2308);var Qo=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?s.a.createElement(Qt.a,{user:n[0]}):2===n.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(Qt.a,{user:n[0]})," 和 ",s.a.createElement(Qt.a,{user:n[1]})):3===n.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(Qt.a,{user:n[0]}),"、",s.a.createElement(Qt.a,{user:n[1]})," 和"," ",s.a.createElement(Qt.a,{user:n[2]})):n.length>3?s.a.createElement(s.a.Fragment,null,s.a.createElement(Qt.a,{user:n[0]}),"、",s.a.createElement(Qt.a,{user:n[1]})," 和"," ",s.a.createElement(Qt.a,{user:n[2]})," 等 ",n.length," 人"):null};n(2660);var Uo=function(e){var t=e.user,n=t.isFollowed,r=t.isFollowing,a=t.gender,o=null;return n&&r?o="互相关注":r&&(o="你关注了"+function(e){return 0===e?"她":1===e?"他":"TA"}(a)),o?s.a.createElement("div",{className:"RelationLabel"},o):null},Vo=n(450),Fo=(n(2661),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ho=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function Wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=Vo.a[0];function Yo(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,r=e.ignoreInvitedQuestion,a=e.updateLaterQuestion,o=Object(i.useRef)(null),l=Object(i.useState)(Go),c=Ho(l,2),u=c[0],p=c[1],f=Object(i.useState)(new Set),d=Ho(f,2),m=d[0],h=d[1],v=Object(i.useState)(new Set),y=Ho(v,2),w=y[0],g=y[1],E=Object(i.useState)(Vo.a.reduce(function(e,t){var n=t.name;return Fo({},e,Wo({},n,0))},{})),O=Ho(E,2),C=O[0],k=O[1],j=t[u.name],_=j.isEnd,S=j.isLoading,P=j.questions.filter(function(e){var t=e.question;return!m.has(t.id)});return s.a.createElement("div",{className:"QuestionInvited"},s.a.createElement(Ft.d,{className:"QuestionInvited-mainColumn"},s.a.createElement("div",{className:"QuestionInvited-title"},"邀请回答",Boolean(t.total.count)&&s.a.createElement("div",{className:"QuestionInvited-titleNumber"},t.total.count-C.total)),s.a.createElement("div",{className:"QuestionInvited-tabs"},Vo.a.map(function(e){return s.a.createElement("div",{key:e.name,className:W()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===u.name}),onClick:function(){return function(e){t[e.name].questions.length||n(e,20,0),bt.default.trackEvent(null,{id:5377},{button:{text:e.text}}),p(e)}(e)}},s.a.createElement("div",{className:"QuestionInvited-tabTitle"},e.text),s.a.createElement("div",{className:"QuestionInvited-tabMeta"},t[e.name].count-C[e.name]))})),s.a.createElement(vo.b,{ref:o,className:"QuestionInvited-questions",onLoad:function(){return n(u,20,P.length)},isLoading:S,placeholder:s.a.createElement(vo.a,{className:"QuestionInvited-placeholder"}),isDrained:_},P.map(function(e){var t=e.inviters,n=e.question;return s.a.createElement(_o,{key:n.id,className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:s.a.createElement("div",{className:"QuestionInvited-questionItemMainSource"},s.a.createElement(Qo,{users:t})," 邀请你回答"),subSource:1===t.length&&s.a.createElement(Uo,{user:t[0]}),mainTool:s.a.createElement(s.a.Fragment,null,s.a.createElement(b.c,{className:W()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){h(new Set(m).add(n.id)),k(Fo({},C,Wo({total:C.total+1},u.name,C[u.name]+1))),r(n.id),o.current.maybeRun(),bt.default.trackEvent(e.target,{id:5382,action:"Ignore"})}},s.a.createElement(zo.a,{size:18}),"忽略"),s.a.createElement(b.c,{className:W()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":w.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!w.has(n.id),r=new Set(w);t?r.add(n.id):r.delete(n.id),g(r),a(n.id,t),bt.default.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})}},w.has(n.id)?null:s.a.createElement(yo.a,null),w.has(n.id)?"已添加":"稍后答"),s.a.createElement("div",{className:"QuestionInvited-info"},Object($t.formatNumber)(n.answerCount)," 个回答"," · ",Object($t.formatNumber)(n.visitCount)," 个浏览"))})}))),s.a.createElement(Eo.a,{omit:{noWrite:!0,noCreator:!0,noCategory:!0}}))}Yo.fetchData=function(e){return(0,e.dispatch)(Object(w.p)())};var Ko=Object(p.connect)(function(e){return{allInvitedQuestions:e.question.invitedQuestions}},{getInvitedQuestions:w.o,ignoreInvitedQuestion:w.t,updateLaterQuestion:w.Z})(Yo),Jo=n(124),Xo=n.n(Jo),$o=n(2662),Zo=n.n($o),ei=n(1919),ti=n(1967),ni=n(5),ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var ai=4,oi=5,ii=3,si=5,li=20;var ci={isDrained:!1,isFetching:!1,ids:[]};function ui(e,t){var n=t.id,r=t.resource;return e.question[r][n]||ci}var pi,fi,di=function(e){var t=e.item,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["item"]);return s.a.createElement(ei.a,{key:t.id},s.a.createElement(ti.a,ri({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n)))},mi=function(e,t,n){var r=t.relationship,a=r.canCollapseAnswers,o=r.canStickAnswers,i=t.hasPublishingDraft,s=e.map(function(e,t){return di({item:e,canCollapse:a,canStick:o,hasPublishingDraft:i,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})});return n?s:Object(V.b)(2,s)},hi=function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return e&&!e.isDelete})},vi=Object(Bt.isBrowser)()?Xo()(hi,function(e,t){return e.join(",")+"-"+t.length}):hi,bi=(n(2161),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function yi(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var wi,gi,Ei=(pi=Object(p.connect)(function(e,t){var n=ui(e,{id:t.id,resource:"notificationAnswers"}),r=n.isFetching,a=n.isDrained,o=n.ids;return{isFetching:r,isDrained:a,items:vi(o,e.entities.answers)}},{loadNotificationAnswers:w.H}),Object(l.withRouter)(fi=pi(fi=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=yi(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.load=function(){var e=r.props,t=e.isFetching,n=e.id,a=e.loadNotificationAnswers;t||a(n)},yi(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),bi(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.location;e.items.length||this.props.router.replace(t.pathname)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,r=e.items;(t||r.length)&&Object(w.H)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,r=t.answerCount,a=e.question,o=e.items,i=e.isFetching,l=e.isDrained;return s.a.createElement("div",{className:"QuestionAnswers-answers"},s.a.createElement(Ft.d,null,s.a.createElement(Xt,{to:"/question/"+n},"查看全部 ",Object($t.formatNumber)(r)," 条回答")),s.a.createElement(Ft.d,null,s.a.createElement(Ht.b,null,mi(o,a),i&&s.a.createElement(vo.a,{className:"List-item"})),!l&&!i&&s.a.createElement(Xt,{onClick:this.load},"更多")),s.a.createElement(Ft.d,null,s.a.createElement(Xt,{to:"/question/"+n},"查看全部 ",Object($t.formatNumber)(r)," 条回答")))}}]),t}())||fi)||fi),Oi=n(1953),Ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ki=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ji(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _i=[{text:"默认排序",value:"default"},{text:"按时间排序",value:"updated"}],Si={updatedAnswers:"updated",answers:"default"};var Pi,Ti,Ni=(wi=Object(p.connect)(function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(w.Q)(e)}},{loadBrandQuestionAnswerCount:w.z}),Object(l.withRouter)(gi=wi(gi=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=ji(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleResourceChange=function(e){r.props.router.push("/question/"+r.props.question.id+("default"===e?"":"/answers/"+e))},ji(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),ki(t,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,r=t.questionType,a=e.permission.canBrandAdminEdit,o=e.loadBrandQuestionAnswerCount;"commercial"===r&&a&&o(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.id,a=n.answerCount,o=n.questionType,i=e.commonAnswerCount,l=e.hiddenAnswerCount,c=e.permission.canBrandAdminEdit;return"commercial"===o?c?s.a.createElement("div",{className:"QuestionAnswers-navs"},s.a.createElement(b.c,{preset:"plain",className:W()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/"+r}},Object($t.formatNumber)(i)," 个回答","，由品牌推荐"),s.a.createElement(b.c,{preset:"plain",className:W()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/"+r+"/answers/hidden"}},Object($t.formatNumber)(l)," 个隐藏回答")):s.a.createElement("span",null,Object($t.formatNumber)(a)," 个回答，由品牌推荐"):s.a.createElement("span",null,Object($t.formatNumber)(a)," 个回答")}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children;return s.a.createElement(Ft.d,{className:"AnswersNavWrapper"},s.a.createElement(Oi.a,Ci({title:this.renderAnswerListHeader()},{options:"hiddenAnswers"===t?s.a.createElement("span",null,"按时间排序"):s.a.createElement(ge.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:Si[t],onChange:this.handleResourceChange},_i.map(function(e){var t=e.value,n=e.text;return s.a.createElement(ge.a,{key:t,value:t,text:n})}))}),n))}}]),t}())||gi)||gi),Ai=n(2177),Ri=n(9),xi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ii(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Mi,Li=(Pi=Object(p.connect)(function(e,t){var n=t.page,r=ui(e,{id:t.question.id,resource:"updatedAnswers"}),a=r.isFetching,o=r.isDrained,i=r.ids,s=Object(ni.d)(n,i),l=s.total,c=s.isCurrentLoaded,u=s.isNextLoaded,p=s.items;return{isMuteSpecial:Object(w.u)(t.question),isFetching:a,isDrained:o,total:l,isNextLoaded:u,isCurrentLoaded:c,items:vi(p,e.entities.answers).filter(function(e){return!e.isDelete})}},{loadItems:w.G}),Object(l.withRouter)(Ti=Pi(Ti=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Ii(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handlePaginationClick=function(e){r.props.router.push(location.pathname+"?page="+e)},r.handleUpdatedAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri.b,n=r.props,a=n.question.id;(0,n.loadItems)(a,"updatedAnswers",{offset:e,limit:t})},Ii(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),xi(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,a=e.items,o=e.loadItems;!r&&a.length<Ri.b&&o(t,"updatedAnswers",{offset:Object(ni.c)(n)+a.length,limit:Ri.b-a.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,a=e.isCurrentLoaded,o=e.page,i=e.items,l=e.total,c=e.question,u=e.isMuteSpecial;return n&&!i.length?s.a.createElement(Ft.d,{className:"Answers-none"},s.a.createElement(Yt.a,{entityType:"answers",placeholder:u?"回答暂时无法查看":"还没有回答"})):s.a.createElement(Ai.a,{isFetching:t,isDrained:o>=l?n:a,isNextLoaded:r,page:o,total:l,placeholder:s.a.createElement(vo.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleUpdatedAnswersLoad},mi(i,c))}}]),t}())||Ti)||Ti),Di=n(835),qi=n.n(Di),Bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Qi(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Ui(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Vi,Fi,Hi=5,Wi=Object(p.connect)(function(e,t){var n=ui(e,{id:t.question.id,resource:"answers"}),r=n.isFetching,a=n.isDrained,o=n.ids,i=a||r?o:o.slice(0,Math.max(Hi,o.length-5));return{isBot:e.env.userAgent.isBot,isFetching:r,isDrained:a,items:vi(i,e.entities.answers).filter(function(e){return e&&!e.isDelete}),adverts:Object(w.c)(e)}},{loadItems:w.G})(Mi=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Ui(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleLoad=function(){var e=r.props,t=e.question.id,n=e.loadItems,a=e.isFetching,o=e.isDrained,i=e.resource;o||a||n(t,void 0===i?"answers":i,{limit:Hi})},Ui(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),zi(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.isDrained,r=e.items,a=e.loadItems;!n&&r.length<Hi&&a(t,"answers",{offset:r.length,limit:Hi})}},{key:"render",value:function(){var e=this,t=this.props,n=t.adverts,r=t.isBot,a=t.isFetching,o=t.isDrained,i=t.items,l=t.question,c=l.relationship,u=c.canCollapseAnswers,p=c.canStickAnswers,f=l.hasPublishingDraft,d=[0].concat(Qi(Object.keys(n||{}).map(Number).sort(function(e,t){return e-t}))),m={canCollapse:u,canStick:p,hasPublishingDraft:f};return s.a.createElement("div",null,s.a.createElement(vo.b,{onRef:function(t){e.listEl=t},isLocal:!0,isLoading:a,isDrained:o,onLoad:this.handleLoad,placeholder:s.a.createElement(vo.a,{className:"List-item"})},r?i.map(function(e,t){return di(Bi({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},m))}):Object(V.b)(2,qi()(d.map(function(e,t){var r,a=d[t+1],o=(a?i.slice(e,a):i.slice(e)).map(function(n,r){var a=e+r+t;return di(Bi({item:n,itemProp:0===a?"acceptedAnswer":"suggestedAnswer",dataZaIndex:a},m))});return a?[].concat(Qi(o),[(r=n[a],r?s.a.createElement(Zo.a,{data:r}):null)]):o})))))}}]),t}())||Mi,Gi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Ki(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ji,Xi,$i,Zi=(Vi=Object(p.connect)(function(e,t){var n=t.page,r=ui(e,{id:t.question.id,resource:"hiddenAnswers"}),a=r.isFetching,o=r.isDrained,i=r.ids,s=Object(ni.d)(n,i,Ri.b);return Yi({isFetching:a,isDrained:o},s,{items:vi(s.items,e.entities.answers).filter(function(e){return!e.isDelete})})},{loadItems:w.G}),Object(l.withRouter)(Fi=Vi(Fi=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Ki(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handlePaginationClick=function(e){r.props.router.push(location.pathname+"?page="+e)},r.handleHiddenAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri.b,n=r.props,a=n.question.id;(0,n.loadItems)(a,"hiddenAnswers",{offset:e,limit:t})},Ki(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),Gi(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,a=e.items,o=e.loadItems;!r&&a.length<Ri.b&&o(t,"hiddenAnswers",{offset:Object(ni.c)(n)+a.length,limit:Ri.b-a.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,a=e.isCurrentLoaded,o=e.page,i=e.items,l=e.total,c=e.question;return s.a.createElement(Ai.a,{isFetching:t,isDrained:o>=l?n:a,isNextLoaded:r,page:o,total:l,placeholder:s.a.createElement(vo.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleHiddenAnswersLoad},mi(i,c))}}]),t}())||Fi)||Fi),es=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ts=(Ji=Object(se.a)({module:"ContentList"}),Xi=Object(p.connect)(function(e,t){return{isMuteSpecial:Object(w.u)(t.question)}}),Ji($i=Object(l.withRouter)($i=Xi($i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),es(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.relationship.isAuthor,a=e.resource,o=e.router;"collapsedAnswers"!==a||r||o.push("/question/"+n)}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,r=e.question,a=r.questionType,o=r.answerCount,i=r.reviewInfo.tips,l=e.location;if(e.isMuteSpecial)return s.a.createElement(Ft.d,{className:"Answers-none"},s.a.createElement(Yt.a,{entityType:"answers",placeholder:"回答暂时无法查看"}));if("commercial"!==a&&!o){if(i)return null;var c=n.status||{},u=c.isClose,p=c.isLocked,f=c.isSuggest;return u||p||f?null:s.a.createElement(Ft.d,{className:"Answers-none"},s.a.createElement(Yt.a,{entityType:"answers",placeholder:s.a.createElement("div",null,"暂时还没有回答，开始",s.a.createElement(St,{preset:"plain",className:"QuestionAnswers-answerLink"},"写第一个回答"))}))}return s.a.createElement("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1"},s.a.createElement(Ni,{question:n,resource:t},"updatedAnswers"===t&&s.a.createElement(Li,{question:n,page:Number(l.query.page)||1}),"answers"===t&&s.a.createElement(Wi,{question:n}),"hiddenAnswers"===t&&s.a.createElement(Zi,{question:n,page:Number(l.query.page)||1})))}}]),t}())||$i)||$i)||$i),ns=n(2097),rs=n(1977),as=n(2019),os=n(465),is=n(59),ss=n(2321),ls=(n(2664),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var cs=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o.handleChange=function(e){o.props.onChange(e)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),ls(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.name,a=e.type,o=e.value,i=e.checked,l=JSON.stringify(o);return s.a.createElement("label",{className:W()("CheckItem",t)},s.a.createElement("input",{className:"CheckItem-input",type:a,name:r,value:l,onChange:this.handleChange,checked:i}),s.a.createElement("div",{className:"CheckItem-box"},s.a.createElement("div",{className:"CheckItem-inner"},n),s.a.createElement(ss.a,{className:"CheckItem-icon",size:20})))}}]),t}();cs.propTypes={name:u.a.string,onChange:u.a.func,checked:u.a.bool,className:u.a.string,type:u.a.string,value:u.a.any},cs.defaultProps={name:"checkitems",type:"checkbox"};var us,ps,fs=cs,ds=n(484),ms=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function hs(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var vs,bs,ys=(ps=us=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=hs(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={value:null},r.handleModify=function(){r.setState({modifying:!0})},r.handleChange=function(e){r.setState({value:e.target.value})},r.handleCancel=function(){r.setState({value:null,modifying:!1})},r.handleSubmit=function(e){e.preventDefault(),r.props.onBioChange(r.state.value),r.handleCancel()},r.handleSelect=function(){r.props.onSelect(r.props.value)},hs(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),ms(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,r=e.title,a=e.checked,o=e.rich,i=this.state,l=i.modifying,c=i.value;return l?s.a.createElement("div",{className:"TopicBioItem"},s.a.createElement("div",{className:"TopicBioItem-title"},r),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"TopicBioItem-inner"},s.a.createElement(os.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t},s.a.createElement(ye.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:r,autoFocus:!0}))),s.a.createElement("div",{className:"TopicBioItem-inputFooter"},s.a.createElement(ds.a,{current:c?c.length:0,max:40}),s.a.createElement("div",{className:"TopicBioItem-actions"},s.a.createElement(b.c,{preset:"plain",type:"reset",onClick:this.handleCancel},"取消"),s.a.createElement(b.c,{preset:"primary",color:"blue",type:"submit"},"保存"))))):n?s.a.createElement("div",{className:"TopicBioItem"},s.a.createElement("div",{className:"TopicBioItem-title"},r),s.a.createElement(fs,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:a},s.a.createElement(os.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo"},s.a.createElement("div",null,o?s.a.createElement(zt.a,{tag:"span",className:"TopicBioItem-bio",html:n}):s.a.createElement("span",{className:"TopicBioItem-bio"},n),s.a.createElement(rs.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify}))))):s.a.createElement("div",{className:"TopicBioItem"},s.a.createElement(b.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify},s.a.createElement(M.a,{name:"plus",left:!0}),"添加",r))}}]),t}(),us.propTypes={user:u.a.object.isRequired,title:u.a.node.isRequired,value:u.a.object.isRequired,onBioChange:u.a.func.isRequired,onSelect:u.a.func.isRequired,checked:u.a.bool.isRequired},ps),ws=(n(2665),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),gs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Es(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Os,Cs,ks,js=function(e,t){var n=e.type,r=e.topic,a=(r=void 0===r?{}:r).id,o=t.type,i=t.topic,s=(i=void 0===i?{}:i).id;return n===o&&a===s},_s=(bs=vs=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Es(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={value:null},r.handleSelect=function(e){return r.setState({value:e})},r.handleChoose=function(){return r.props.onBioChoose(r.state.value)},Es(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),gs(t,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return s.a.createElement("div",{className:"TopicBios-loading"},s.a.createElement(Gt.a,null));var t=this.props,n=t.user,r=t.question.topics,a=t.bios,o=t.currentBio,i=t.onHeadlineUpdate,l=t.onBioUpdate,c=this.state.value||o,u={type:"headline"};return s.a.createElement("div",null,s.a.createElement("div",{className:"TopicBioItems"},s.a.createElement(ys,{title:"一句话介绍",user:n,bio:n.headline,value:u,onBioChange:i,onSelect:this.handleSelect,checked:js(c,u),rich:!0}),r.map(function(t){var r={type:"topic",topic:{id:t.id}};return s.a.createElement(ys,ws({key:t.id,title:"在 "+t.name+" 话题下的话题经验",user:n},function(e,t){return e.find(function(e){return e.topic.id===t})}(a,t.id),{value:r,onBioChange:function(e){return l(t.id,e)},onSelect:e.handleSelect,checked:js(c,r)}))})),s.a.createElement(we.a,null,s.a.createElement(b.c,{color:"blue",preset:"primary",onClick:this.handleChoose},"完成")))}}]),t}(),vs.propTypes={onHeadlineUpdate:u.a.func.isRequired,onBioUpdate:u.a.func.isRequired,onBioChoose:u.a.func.isRequired,question:u.a.object.isRequired,user:u.a.object.isRequired},bs),Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ps=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ts(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ns,As,Rs=Object(p.connect)(function(e,t){var n=e.currentUser,r=e.question.bio,a=e.entities,o=a.questions,i=a.users,s=e.topic.bios,l=t.question.id,c=o[l],u=(r[l]||{result:{type:"headline"}}).result;return{isFetching:s.isFetching,currentBio:{type:u.type,topic:u.topic},bios:c.topics.map(function(e){return{topic:e,bio:s[e.id]}}),question:c,user:i[n]}},{updateProfile:is.i,updateBio:Ve.X,chooseBio:w.d,loadBios:w.w})((ks=Cs=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Ts(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleUpdateHeadline=function(e){r.props.updateProfile(null,{headline:e})},r.handleUpdateBio=function(e,t){r.props.updateBio(e,t)},r.handleBioChoose=function(e){e&&r.props.chooseBio(r.props.question.id,e),r.props.onClose()},Ts(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ps(t,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return s.a.createElement(_s,Ss({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),t}(),Cs.contextTypes={currentUser:u.a.object},Cs.propTypes={question:u.a.object.isRequired},Os=ks))||Os,xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ms,Ls,Ds,qs,Bs=(As=Ns=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Is(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["shown","onClose"]);return s.a.createElement(we.b,{title:"编辑话题经验",subtitle:s.a.createElement("span",null,"可以填写你从事的职业、取得的资格或过往经历，",s.a.createElement("br",null),"让你在这个问题下的回答更具说服力。"),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1},t&&s.a.createElement(Rs,xs({},r,{onClose:n})))}}]),t}(),Ns.propTypes=xs({shown:u.a.bool.isRequired,onClose:u.a.func.isRequired},Rs.propTypes),As),zs=(n(2666),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Qs(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Us,Vs,Fs,Hs=(Ms=Object(p.connect)(function(e,t){var n=e.question.bio,r=e.topic.bios,a=e.answers.newAnswer,o=(n[t.question.id]||{result:{type:"headline"}}).result;return"topic"===o.type&&(o.bio=r[o.topic.id]||o.bio),{currentUser:Object(Fe.c)(e),questionBio:o,newAnswer:a,allowCommercialAnonymousAnswer:"show"===Object(Nt.a)(e,"gue_anonymous")}},{showNotification:z.g,addAnswer:gt.a,scheduledPublish:gt.z,validateScheduledPublish:gt.L,loadDraft:w.F,getBio:w.n}),Object(l.withRouter)(Ls=Ms((qs=Ds=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Qs(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={topicBiosModalShown:!1},r.handleSubmit=function(e){var t=r.props,n=t.currentUser,a=t.question.id,o=t.addAnswer,i=t.scheduledPublish,s=t.validateScheduledPublish,l=t.loadDraft;if(e.publishAt){var c=i(a,e);return c.then(function(){r.context.endAddAnswer(),l(a)}),c}var u=function(){return o(a,e)};return n.autoSendingCreations?s(a).then(u,function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return st.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(u,function(){})}):u()},r.focus=function(){r.answerForm.getWrappedInstance().focus()},r.handleToggleAnonymous=function(){var e=r.context,t=e.isCheckedCircle,n=e.toggleAnonymous,a=r.props,o=a.showNotification,i=a.question.relationship.isAnonymous;if(t&&!i)return n(),void r.context.onChangecircleSettings(!1);i||!r.answerForm.getWrappedInstance().hasVideo()?n():o("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red")},r.handleTopicBiosModalShown=function(){return r.setState({topicBiosModalShown:!0})},r.handleTopicBiosModalHide=function(){return r.setState({topicBiosModalShown:!1})},Qs(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),zs(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.getBio)(t),this.props.answering&&setTimeout(this.focus)}},{key:"componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"renderBio",value:function(){var e=this.props,t=e.currentUser,n=e.questionBio;return n.bio&&"headline"!==n.type?s.a.createElement("span",{className:"AnswerAdd-bio"},n.bio):t.headline?s.a.createElement(zt.a,{className:"AnswerAdd-bio",tag:"span",html:(n||{}).bio||t.headline}):null}},{key:"renderAuthor",value:function(){var e=this.props,t=e.currentUser,n=e.question.relationship.isAnonymous,r=e.question;return n?s.a.createElement(os.a,{className:"AnswerAdd-info",noLink:!0,author:ir.e}):t&&t.isOrg?s.a.createElement(os.a,{className:"AnswerAdd-info",noLink:!0,author:t}):s.a.createElement(os.a,{className:"AnswerAdd-info",noLink:!0,author:t},this.renderBio(),s.a.createElement(rs.a,{className:"AnswerAdd-topicBiosButton",text:"编辑话题经验",onClick:this.handleTopicBiosModalShown}),s.a.createElement(Bs,{shown:this.state.topicBiosModalShown,question:r,onClose:this.handleTopicBiosModalHide}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.question,a=r.relationship.isAnonymous,o=r.questionType,i=t.question,l=t.allowCommercialAnonymousAnswer,c=n&&!n.isOrg&&("normal"===o||"commercial"===o&&l||a);return s.a.createElement("div",{className:"AnswerAdd"},s.a.createElement("div",{className:"AnswerAdd-header"},this.renderAuthor(),c&&s.a.createElement(b.c,{className:"AnswerAdd-toggleAnonymous",preset:"plain",onClick:this.handleToggleAnonymous},a?"使用实名身份回答":"使用匿名身份回答")),s.a.createElement(as.a,{ref:function(t){e.answerForm=t},question:i,onSubmit:this.handleSubmit}))}}]),t}(),Ds.contextTypes={toggleAnonymous:u.a.func.isRequired,isCheckedCircle:u.a.bool,onChangecircleSettings:u.a.func,endAddAnswer:u.a.func},Ls=qs))||Ls)||Ls),Ws=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Gs=Object(l.withRouter)((Fs=Vs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),Ws(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,r=n.id,a=n.relationship.myAnswer,o=void 0===a?{}:a,i=t.router,s=e.question,l=s.id,c=s.relationship.myAnswer,u=void 0===c?{}:c;r===l&&o.answerId!==u.answerId&&(bt.default.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),i.push("/question/"+r+"/answer/"+u.answerId),go.a.set("answer::justPublished",!0))}},{key:"render",value:function(){if(!this.context.currentUser)return null;var e=this.props,t=e.question,n=e.question,r=n.relationship.myAnswer,a=n.isNormal,o=n.status,i=(o=void 0===o?{}:o).isClose,l=o.isLocked,c=o.isSuggest,u=n.hasPublishingDraft,p=e.answering;return r?null:c?s.a.createElement("div",{className:"QuestionAnswers-answerTip"},"被建议修改的问题不允许添加新的回答。",s.a.createElement(wt.a,{preset:"plain",to:"/question/21290061"},"问题为什么会被建议修改？")):l?s.a.createElement("div",{className:"QuestionAnswers-answerTip"},"该问题目前已经被锁定，无法添加新答案。",s.a.createElement(wt.a,{preset:"plain",to:"/question/19604313"},"问题为什么会被锁定？")):i?s.a.createElement("div",{className:"QuestionAnswers-answerTip"},"被关闭的问题不允许添加新的回答。",s.a.createElement(wt.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？"},s.a.createElement(M.a,{name:"questionMark"}))):u?s.a.createElement(Ft.d,{className:"QuestionAnswers-answerTipCard"},"你创建的回答正在发布中…"):a?s.a.createElement(ns.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div"},p&&s.a.createElement(Ft.d,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard"},s.a.createElement("a",{name:"draft"}),s.a.createElement(Hs,{question:t,answering:p}))):null}}]),t}(),Vs.contextTypes={currentUser:u.a.object},Us=Fs))||Us,Ys=(n(2667),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ks=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Js,Xs,$s,Zs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ks(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","children"]);return s.a.createElement("div",Ys({},r,{className:W()("QuestionMainDivider",t)}),s.a.createElement("span",{className:"QuestionMainDivider-inner"},n))}}]),t}(),el=(n(2668),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function tl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var nl,rl=Object(p.connect)(function(e,t){var n=ui(e,{id:t.question.id,resource:"collapsedAnswers"}),r=n.isFetching,a=n.isDrained,o=n.ids;return{isFetching:r,isDrained:a,items:vi(o,e.entities.answers)}},{loadItems:w.G})(($s=Xs=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=tl(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={opened:!1},r.handleLoad=function(){var e=r.props,t=e.question.id;return(0,e.loadItems)(t,"collapsedAnswers")},r.handleOpen=function(){r.handleLoad(),r.setState({opened:!0})},tl(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),el(t,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items,a=e.question,o=e.question,i=o.collapsedAnswerCount,l=o.questionType,c=this.state.opened,u="org"===l,p=Object($t.formatNumber)(i)+" 个回答被"+(u?"隐藏":"折叠"),f=s.a.createElement(wt.a,{preset:"plain",to:u?"/org-intro#org-question":"/question/20120168",target:"_blank"},"为什么？");return c?s.a.createElement(Ft.d,null,s.a.createElement(Zs,null,p,"（",f,"）"),s.a.createElement(Ht.b,null,mi(r,a),n&&s.a.createElement(vo.a,{className:"List-item"})),!t&&!n&&s.a.createElement(Xt,{onClick:this.handleLoad},"更多")):s.a.createElement("div",{className:"CollapsedAnswers-bar",style:{}},s.a.createElement(b.c,{preset:"plain",onClick:this.handleOpen},p),"（",f,"）")}}]),t}(),Xs.contextTypes={currentUser:u.a.object},Js=$s))||Js,al=n(530),ol=n.n(al),il=n(531),sl=n(498),ll=n(647),cl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ul,pl=Object(se.a)(function(e){var t=e.answer;return{module:"AnswerItem",content:{type:"Answer",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}})(nl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),cl(t,[{key:"render",value:function(){var e=this.props.answer,t=e.id,n=e.voteupCount,r=e.question,a=r.id,o=r.title;return s.a.createElement("div",{className:"SimilarQuestions-item"},s.a.createElement(wt.a,{preset:"plain",to:"/question/"+a+"/answer/"+t,target:"_blank"},o)," ",n&&Object($t.formatNumber)(n)+" 个赞同")}}]),t}())||nl,fl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var dl,ml=Object(se.a)(function(e){var t=e.article;return{module:"PostItem",content:{type:"Post",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}})(ul=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),fl(t,[{key:"render",value:function(){var e=this.props.article,t=e.id,n=e.title,r=e.voteupCount;return s.a.createElement("div",{className:"SimilarQuestions-item"},s.a.createElement(wt.a,{preset:"plain",a:!0,to:ir.i+"/p/"+t,target:"_blank"},n)," ",r&&Object($t.formatNumber)(r)+" 个赞同")}}]),t}())||ul,hl=(n(2669),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var vl,bl=Object(p.connect)(function(e,t){var n=e.explore.recommendations,r=n.items;return{isLoading:n.isLoading,isDrained:n.isDrained,isError:n.isError,items:r,similarQuestions:e.question.similarQuestions[t.question.id]}},{loadRecommendations:ll.b})(dl=Object(se.a)({module:"EditorRecommendList"})(dl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),hl(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.similarQuestions,r=t.isLoading,a=t.isDrained,o=t.isError,i=t.loadRecommendations;e.similarQuestions||!n||n.length||r||a||o||i(),!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.similarQuestions;return n&&n.length||!t||!t.length?null:s.a.createElement(Ft.d,null,s.a.createElement(Ft.b,{className:"Recommendations-title"},"优质推荐"),s.a.createElement(Ft.c,{className:"Recommendations-list"},t.map(function(e){var t=e.answer,n=e.article;return t?s.a.createElement(pl,{answer:t,key:t.id}):s.a.createElement(ml,{article:n,key:n.id})})))}}]),t}())||dl)||dl,yl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var wl,gl=Object(se.a)(function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}})(vl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),yl(t,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,r=e.answerCount,a=e.followerCount,o="/question/"+t;return s.a.createElement("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0},s.a.createElement("meta",{itemProp:"name",content:n}),s.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com"+o}),s.a.createElement("meta",{itemProp:"answerCount",content:r}),s.a.createElement("meta",{itemProp:"zhihu:followerCount",content:a}),s.a.createElement(wt.a,{preset:"plain",to:o,target:"_blank"},n)," ",Object($t.formatNumber)(r)," 个回答")}}]),t}())||vl,El=(n(2670),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Ol=Object(p.connect)(function(e,t){return{items:e.question.similarQuestions[t.question.id]}},{loadSimilarQuestions:w.P})(wl=Object(se.a)({module:"RelatedQuestions"})(wl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),El(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.loadSimilarQuestions)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadSimilarQuestions,a=e.question.id;n!==a&&r(a)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?s.a.createElement(Ft.d,null,s.a.createElement(Ft.b,{className:"SimilarQuestions-title"},"相关问题"),s.a.createElement(Ft.c,{className:"SimilarQuestions-list"},e.map(function(e){return s.a.createElement(gl,{question:e,key:e.id})}))):null}}]),t}())||wl)||wl,Cl=n(6),kl=n(1914),jl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Sl=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=_l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={hideDescription:!1},r.handleRef=function(e){r.title=e},_l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),jl(t,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,r=e.description,a=e.meta,o=e.imageUrl,i=this.state.hideDescription;return s.a.createElement(wt.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank"},s.a.createElement("img",{className:"RelatedCommodities-image",src:Object(Ra.imgUrl)(o,{quality:90,size:"250x0"}),alt:"live"}),s.a.createElement("div",{className:"RelatedCommodities-content"},s.a.createElement("div",{className:W()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":i}),style:{},ref:this.handleRef,"data-tooltip":n},n),i||s.a.createElement("div",{className:"RelatedCommodities-description"},r),s.a.createElement("div",{className:"RelatedCommodities-meta"},a)))}}]),t}(),Pl=n(2016),Tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Al(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Rl,xl=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Al(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleListen=function(e){var t=e.target.closest("a").href+"?extra_auto_play=1";e.preventDefault(),e.stopPropagation(),bt.default.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},Al(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Nl(t,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,r=e.reviewScore,a=e.seats,o=(e.startsAt,e.speaker.member),i=o.name,l=o.avatarUrl;return s.a.createElement(Sl,{link:"/lives/"+t,imageUrl:l,title:n,description:i,meta:s.a.createElement("div",{className:"RelatedCommodities-scoreWrapper"},s.a.createElement(Pl.a,{score:r}),Boolean(a&&a.taken)&&a.taken+" 人参与",!1)});case"remix_album":case"podcast":case"remix":var c=e.id,u=e.artwork,p=e.title,f=e.author,d=(f=void 0===f?{}:f).user,m=e.trackCount,h="/remix/albums/"+c;return s.a.createElement(Sl,{link:h,imageUrl:u,title:p,description:d&&d.name,meta:s.a.createElement("div",{className:"RelatedCommodities-remixMeta"},s.a.createElement("div",null,"共 ",Object($t.formatNumber)(m)," 节课"),s.a.createElement(b.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain"},"试听"))});case"special":var v=e.id,y=e.subject,w=e.liveCount,g=e.liveMemberCount,E=e.speakers,O=e.artworkMobile,C=E.slice(0,2).map(function(e){return e.member.name}).join("、");return s.a.createElement(Sl,{link:"/lives/specials/"+v,imageUrl:O,title:y,description:C+(E.length>=2?" 等":""),meta:Object($t.formatNumber)(w)+" 场 Live, "+Object($t.formatNumber)(g)+" 次参与"});case"book":var k=e.id,j=e.title,_=e.cover,S=e.authorName,P=e.readCount;return s.a.createElement(Sl,{link:"/pub/book/"+k,imageUrl:_,title:j,description:S,meta:s.a.createElement("div",{className:"RelatedCommodities-bookMeta"},Object($t.formatNumber)(P)+" 人读过",s.a.createElement("span",{className:"RelatedCommodities-bookRead"},s.a.createElement(kl.a,{width:13,height:14,center:!0}),"阅读"))});default:return null}}}]),t}(),Il=Object(se.a)(function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var r="special"===t.type?"LiveAlbum":Object(Cl.pascalize)(t.type);return{module:r+"Item",index:n,content:Tl({type:r,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}})(xl),Ml=(n(2671),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Ll,Dl,ql,Bl=Object(p.connect)(function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}},{loadRelatedCommodities:w.O})(Rl=Object(se.a)(function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}})(Rl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ml(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadRelatedCommodities,a=e.question.id;n!==a&&r(a)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?s.a.createElement(Ft.d,null,s.a.createElement(Ft.b,{className:"RelatedCommodities-title"},"相关推荐"),s.a.createElement(Ft.c,{className:"RelatedCommodities-list"},e.slice(0,3).map(function(e){return s.a.createElement(Il,{item:e,key:e.id})}))):null}}]),t}())||Rl)||Rl,zl=n(2326),Ql=n(534),Ul=(n(2683),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Vl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Fl,Hl,Wl=Object(p.connect)(function(e){var t=e.entities,n=e.question.brand,r={};return n&&n.target&&n.target.urlToken&&(r=t.users[n.target.urlToken]||{}),{brand:n,brandMember:r}},{loadBrand:w.x,loadProfile:is.e})((ql=Dl=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Vl(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.goToBrand=function(){var e=r.props.brand.target;e&&(location.href="/org/"+e.urlToken)},Vl(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ul(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,r=t.name,a=t.target,o=t.isPuQuestion,i=e.brandMember,l=this.context.currentUser,c=o?"关于大咖":"关于品牌";return s.a.createElement(Ft.d,{className:W()({MobileBrandQuestionAuthor:!1})},s.a.createElement(Ft.b,{className:"BrandQuestionAuthor-header"},s.a.createElement("span",{className:"BrandQuestionAuthor-headerText"},c)),s.a.createElement(Ft.c,{className:W()("BrandQuestionAuthor",a&&"is-clickable"),onClick:this.goToBrand},s.a.createElement("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),s.a.createElement("div",{className:"BrandQuestionAuthor-content"},s.a.createElement("div",{className:"BrandQuestionAuthor-name"},r,a&&a.urlToken&&s.a.createElement(Qr.a,{className:"BrandQuestionAuthor-badge",badge:a.badge,isOrg:a.isOrg,noLink:!0})),a&&a.headline&&s.a.createElement("div",{className:"BrandQuestionAuthor-intro"},a.headline))),i&&i.id&&l&&l.id!==i.id&&s.a.createElement(Ql.a,{className:"BrandQuestionAuthor-buttons",user:i}))}}]),t}(),Dl.contextTypes={currentUser:u.a.object},Ll=ql))||Ll,Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Kl(e){var t=e.text,n=e.from,r=e.score;return s.a.createElement("span",null,n||t,r&&s.a.createElement("strong",null,r))}var Jl,Xl,$l,Zl=(Hl=Fl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),Yl(t,[{key:"renderCardImage",value:function(){var e=this.props.meta,t=e.avatar,n=e.title;return t?s.a.createElement(ha.a,{className:W()("QuestionSidebarTopicMeta-cardImage"),src:t,alt:n}):null}},{key:"renderGoodsCard",value:function(){var e=this.props.meta.title;return s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMain QuestionSidebarTopicMeta-goods"},this.renderCardImage(),s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardContent"},s.a.createElement("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},e)))}},{key:"renderGeneralCard",value:function(){var e=this.props.meta,t=e.title,n=e.description1,r=e.description2,a=function(e){var t=e.scores,n=void 0===t?[]:t,r=e.tags,a=void 0===r?[]:r;return n.length>0?n:a.length>0?a:[]}(e),o=a.length?a.map(function(e,t){return s.a.createElement(Kl,Gl({key:t},e))}):r;return s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMain"},this.renderCardImage(),s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardContent"},s.a.createElement("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},t),n&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardDesc"},n),o&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardScore"},o)))}},{key:"renderCard",value:function(){return"n_goods"===this.props.meta.category?this.renderGoodsCard():this.renderGeneralCard()}},{key:"renderModule",value:function(){var e=this.props,t=e.meta,n=e.excerpt,r=e.metaCardDisplay,a=t.summary||n;return s.a.createElement(Ft.d,null,this.renderCard(),"normal"===r&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMore"},a&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMoreInner",dangerouslySetInnerHTML:{__html:a}}),s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardLink"},"查看更多",s.a.createElement(me.a,{center:!0}))))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.meta,r=e.metaCardDisplay;if(!n||"none"===r)return null;var a=n.category;return s.a.createElement(B.a,{module:"TopicItem",moduleName:a,card:{content:Gl({type:"Topic"},Object(va.a)("topic",t),{sub_type:"MetaCard"})},trackCardShow:!0},s.a.createElement("a",{href:"/topic/"+t,target:"_blank",rel:"noopener noreferrer"},this.renderModule()))}}]),t}(),Fl.propTypes={id:u.a.string.isRequired,excerpt:u.a.string,meta:u.a.shape({category:u.a.string,avatar:u.a.string,title:u.a.string,description1:u.a.string,description2:u.a.string,summary:u.a.string,scores:u.a.arrayOf(u.a.shape({url:u.a.string,score:u.a.string,from:u.a.string})),tags:u.a.arrayOf(u.a.shape({text:u.a.string}))}).isRequired,metaCardDisplay:u.a.oneOf(["normal","none"])},Hl),ec=(n(2684),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),tc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var nc,rc=(Jl=Object(p.connect)(function(e,t){var n=t.params;return{questionId:n.id,items:Object(w.R)(e,{id:n.id})}},{loadQuestionMetaTopics:w.M}),Xl=Object(Mn.a)(null),Object(l.withRouter)($l=Jl($l=Xl($l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),tc(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.items,r=e.loadQuestionMetaTopics;n||r(t)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.questionId;if(!t||!t.length)return null;var r=t.filter(function(e){return e&&e.meta});if(!r||r.length<1)return null;var a=r[0],o=a.vote,i=a.isVote,l="normal";return o&&i&&(l="none"),s.a.createElement("div",{className:"QuestionSidebarTopicMeta"},s.a.createElement(Zl,ec({metaCardDisplay:l},a,{questionId:n})))}}]),t}())||$l)||$l)||$l),ac=n(497),oc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ic(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var sc,lc,cc,uc=Object(Mn.a)(null)(nc=Object(se.a)({module:"RightSideBar"})(nc=Object(p.connect)(function(e){return{brand:e.question.brand}},{loadBrand:w.x,loadProfile:is.e})(nc=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=ic(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.onHeightChange=function(){r.dynamicSticky&&r.dynamicSticky.check()},ic(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),oc(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.questionType,a=e.loadBrand;"commercial"===r&&a(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,a=r.id,o=r.questionType,i=t.brand;return s.a.createElement(ac.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:ir.f+10,ref:function(t){e.dynamicSticky=t}},"commercial"===o&&s.a.createElement(zl.a,{questionId:a,pageType:"question",onLoad:this.onHeightChange}),"commercial"===o&&i&&s.a.createElement(Wl,{brand:i}),"commercial"!==o&&s.a.createElement(il.a,{type:"question",getSidebar:function(){return e.sidebar}}),"normal"===o&&s.a.createElement("div",{className:"Card"},s.a.createElement(ol.a,{isMobile:!1,id:"question/"+a,location:"new_question_up",query:{question_token:a},onHeightChange:this.onHeightChange})),s.a.createElement(rc,null),"commercial"!==o&&s.a.createElement(bl,{question:n,onLoad:this.onHeightChange}),"normal"===o&&s.a.createElement(Ol,{question:n,onLoad:this.onHeightChange}),"normal"===o&&s.a.createElement(Bl,{question:n,onLoad:this.onHeightChange}),"normal"===o&&s.a.createElement("div",{className:"Card"},s.a.createElement(ol.a,{isMobile:!1,id:"question/"+a,location:"new_question_down_sticky",query:{question_token:a},delay:500,onHeightChange:this.onHeightChange})),"commercial"===o&&s.a.createElement(il.a,{type:"question",getSidebar:function(){return e.sidebar}}),s.a.createElement(sl.a,null))}}]),t}())||nc)||nc)||nc,pc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var fc,dc,mc,hc,vc=Object(p.connect)(function(e,t){var n=t.params.id,r=t.route.resource,a=t.location.query,o=a.group_id,i=a.qc,s=e.currentUser,l=!i&&o,c=ui(e,{id:n,resource:r}).isDrained,u=Object(w.S)(e,{id:n}),p=u.answerCount,f=u.relationship.isAnonymous;return{isNormalNotification:l,notificationId:o,resource:r,question:u,isDrained:c,invitationShowCount:s&&!f&&p<ai?p?oi:ii:0,isBot:e.env.userAgent.isBot,isHuman:Object(Nt.c)(e),currentUser:Object(Fe.c)(e),canOia:Object(Nt.d)(e),shouldOia:Object(Nt.f)(e),shouldSpecialOia:Object(Nt.g)(e),referer:Object(Nt.e)(e),isMuteSpecial:Object(w.u)(u)}})((cc=lc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),pc(t,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.questionType,a=n.collapsedAnswerCount,o=n.answerCount,i=n.isNormal,l=n.status,c=(l=void 0===l?{}:l).isLocked,u=e.question,p=e.location,f=e.answering,d=e.invitationShowCount,m=e.isDrained,h=e.isMuteSpecial,v="updatedAnswers"===t||m,b="commercial"!==r&&!o;return s.a.createElement("div",null,s.a.createElement(Gs,{question:u,answering:f}),Boolean(d)&&!h&&s.a.createElement(In,{expandCount:d,question:u}),s.a.createElement(ts,{resource:t,question:u,location:p}),i&&!c&&"updatedAnswers"!==t&&m&&!b&&s.a.createElement(B.a,{module:"BottomBar"},s.a.createElement(Ft.d,null,s.a.createElement(St,{className:"QuestionAnswers-answerButton",size:"spread"}))),v&&a>0&&!h&&s.a.createElement(rl,{question:u}))}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,r=e.notificationId,a=e.location;return s.a.createElement("div",{className:"Question-main"},s.a.createElement("div",{className:"Question-mainColumn"},n?s.a.createElement(Ei,{location:a,question:t,id:r}):this.renderAnswers()),s.a.createElement(V.a,null,s.a.createElement(uc,{question:t})))}}]),t}(),lc.fetchData=function(e){var t=e.params.id,n=e.route.resource,r=e.location.query,a=r.group_id,o=r.page,i=r.qc;return function(e,r){if(!i&&a)return e(Object(w.H)(a));var s=r(),l=s.env.userAgent,c=Object(Nt.d)(s),u=si;return l.isBot?u=li:c&&(u=4),e(Object(w.G)(t,n,{offset:Object(ni.c)(Number(o)||1),limit:u}))}},sc=cc))||sc,bc=n(136),yc=n(51),wc=(n(2328),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function gc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ec,Oc=(fc=Object(p.connect)(null,{loadAnswer:gt.m,loadContentRightsNotification:yc.o}),Object(l.withRouter)(dc=fc((hc=mc=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=gc(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={contentRef:null},r.contentRef=s.a.createRef(),r.handleCloseComment=function(){var e=r.props,t=e.location,n=t.pathname,a=t.search;e.byComment&&r.props.router.replace(""+n+a)},r.handleCloseEditing=function(){var e=r.props,t=e.location,n=t.pathname,a=t.query,o=e.router,i=a.editing,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(a,["editing"]);if(i){var l=gr.a.stringify(s)||"";o.replace(""+n+(l&&"?")+l)}},gc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),wc(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(!n||n.question&&n.question.id!==t||n.isDelete)&&this.props.router.replace("/question/"+t)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification;this.context.currentUser&&Object(Q.c)("answer",t,Q.a),this.setState({contentRef:this.contentRef.current}),go.a.get("answer::justPublished")&&(go.a.delete("answer::justPublished"),n("answer",t))}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.relationship,r=n.canCollapseAnswers,a=n.canStickAnswers,o=t.hasPublishingDraft,i=e.answer,l=e.location,c=l.hash,u=l.query;return s.a.createElement(Ft.d,{className:"AnswerCard"},s.a.createElement("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0},s.a.createElement(bc.d.Provider,{value:this.state.contentRef},s.a.createElement(ti.a,{relatedTo:"answer",answer:i,byComment:Object(Cr.a)(c),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:r,canStick:a,editing:u&&"true"===u.editing,editable:!0,expanded:!0,hasPublishingDraft:o,itemProp:"mainEntityOfPage"}))))}}]),t}(),mc.contextTypes={currentUser:u.a.object},dc=hc))||dc)||dc),Cc=(n(2685),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var kc=2;var jc,_c,Sc,Pc=Object(p.connect)(function(e,t){var n=t.question.id,r=t.answerId,a=e.entities.answers,o=e.question.answers[n]||{ids:[],isDrained:!1},i=o.ids;return{isDrained:o.isDrained,items:i.filter(function(e){return e!==Number(r)}).slice(0,kc).map(function(e){return a[e]}),isWechat:e.env.userAgent.Wechat}},{loadAnswer:gt.m,loadItems:w.G})(Ec=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Cc(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,r=e.isDrained,a=e.items;n!==t&&!r&&a.length<kc&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems;return n(t,"answers",{limit:3})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,r=e.isWechat;return Boolean(n.length)&&s.a.createElement(Ft.d,{className:"MoreAnswers"},s.a.createElement(Ht.b,{title:"更多回答","data-zop-feedlist":!0},n.map(function(e){return s.a.createElement(ei.a,{key:e.id},s.a.createElement(ti.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!r}))})))}}]),t}())||Ec,Tc=n(1871),Nc=n(155),Ac=n(302),Rc=n(474),xc=n(1897),Ic=n(75),Mc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Dc,qc=Object(p.connect)(function(e,t){var n=t.author;return Lc({currentUser:Object(Fe.c)(e)},n&&function(e,t){var n=t.urlToken||t.id,r=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:r.isDrained,isFetching:r.isFetching,items:r.ids.map(function(t){var n=Object(Ic.c)(e,{id:t});return n.code?null:n}).filter(Boolean)}}(e,{urlToken:n.urlToken}))},{loadItems:is.d})(jc=Object(He.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}})((Sc=_c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Mc(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("span",{className:"AnswerAuthor-item-icon"},s.a.createElement(xc.a,{text:!0,center:!0})),s.a.createElement("div",{className:"AnswerAuthor-item-value"},s.a.createElement(Rc.CJKSpace,null,t.slice(0,3).map(function(e,t){return s.a.createElement("span",{key:e.urlToken},0!==t&&"、",s.a.createElement(Qt.a,{user:e,noBadge:!0,noHoverCard:!0},e.name))}),"也关注了",ir.F[n.gender]))):null}}]),t}(),_c.propTypes={author:u.a.object.isRequired},jc=Sc))||jc)||jc,Bc=(n(2686),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var zc=function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge};var Qc,Uc=Object(p.connect)(function(e,t){var n=t.answer,r=n.author,a=n.author.urlToken,o=e.entities.users,i=a?o[a]:r;return{currentUser:Object(Fe.c)(e),isDrained:zc(i),user:i,isSelf:Object(Fe.h)(e,i)}},{loadProfile:is.e})(Dc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Bc(t,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,r=e.isDrained;t&&(r||n(t))}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.isSelf;if(!t)return null;var r=t.urlToken,a=t.isOrg,o=t.headline,i=t.badge,l=t.answerCount,c=t.articlesCount,u=t.followerCount,p=Object(Nc.a)(i),f=p.identityInfo,d=p.bestAnswererInfo,m=p.bestAnswererTopics,h=p.baikeInfo,v=a?"org":"people";return s.a.createElement(Ft.d,{className:"AnswerAuthor"},s.a.createElement(Ft.b,{className:"AnswerAuthor-title"},"关于作者"),s.a.createElement(Ft.c,null,s.a.createElement("div",{className:"AnswerAuthor-user"},s.a.createElement("div",{className:"AnswerAuthor-user-avatar"},s.a.createElement(Qt.a,{user:t,avatar:!0,avatarProps:{size:60},noHoverCard:!0})),s.a.createElement("div",{className:"AnswerAuthor-user-content"},s.a.createElement("div",{className:"AnswerAuthor-user-name"},s.a.createElement(Qt.a,{user:t,noBadge:!0,noHoverCard:!0})),o&&s.a.createElement("div",{className:"AnswerAuthor-user-headline"},s.a.createElement(zt.a,{html:o}))))),s.a.createElement(Ft.c,null,f&&s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank"},s.a.createElement(X.a,{center:!0,size:19})),s.a.createElement("div",{className:"AnswerAuthor-item-value"},f.slice(0,2).join("，"))),m&&m.length>0&&s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("span",{className:"AnswerAuthor-item-icon"},s.a.createElement(J.a,{center:!0,size:19})),s.a.createElement("div",null,s.a.createElement(Ac.a,{topics:m,user:t,noHoverCard:!0}),"的",d)),Boolean(h)&&s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("span",{className:"AnswerAuthor-item-icon"},s.a.createElement(Tc.a,{center:!0,size:19})),s.a.createElement("div",null,h)),t&&!n&&s.a.createElement(qc,{author:t})),r&&s.a.createElement(Ft.c,null,s.a.createElement("div",{className:"AnswerAuthor-counts"},s.a.createElement(zn.a,null,s.a.createElement(zn.a.Item,{tag:wt.a,preset:"plain",to:"/"+v+"/"+r+"/answers",name:"回答",value:l,"data-za-detail-view-element_name":"Answer"}),s.a.createElement(zn.a.Item,{tag:wt.a,preset:"plain",to:"/"+v+"/"+r+"/posts",name:"文章",value:c,"data-za-detail-view-element_name":"Post"}),s.a.createElement(zn.a.Item,{tag:wt.a,preset:"plain",to:"/"+v+"/"+r+"/followers",name:"关注者",value:u,"data-za-detail-view-element_name":"Follower"}))),!n&&s.a.createElement(Ql.a,{className:"AnswerAuthor-buttons",user:t})))}}]),t}())||Dc,Vc=n(2088),Fc=(n(2687),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Hc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Wc,Gc=Object(p.connect)(function(e,t){var n=t.answer.id,r=e.entities.favlists,a=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:a.ids.map(function(e){return r[e]}),count:a.totals,isFetching:a.isFetching,isDrained:a.isDrained}},{loadAnswerFavlists:gt.q})(Qc=Object(se.a)({module:"CollectionList"})(Qc=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Hc(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.load=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerFavlists)(t)},Hc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Fc(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,a=e.isDrained;return s.a.createElement("div",{className:"AnswerFavlists"},s.a.createElement("div",{className:"AnswerFavlists-header"},s.a.createElement("div",{className:"AnswerFavlists-title"},"被收藏 ",Object($t.formatNumber)(n)," 次")),!(a&&!t.length)&&s.a.createElement(vo.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:r,isDrained:a,onLoad:this.load,getContainer:function(e){return e},placeholder:s.a.createElement(vo.a,{className:"AnswerFavlists-item",small:!0})},t.map(function(e){var t=e.id,n=e.type,r=e.creator,a=e.isFollowing,o=e.answerCount,i=e.followerCount;return s.a.createElement(Ht.a,{key:t},s.a.createElement(Vc.a,{favlist:e,action:s.a.createElement(Pt.a,{preset:"primary",id:t,type:n,isFollowing:a}),status:s.a.createElement(cn.d,null,s.a.createElement("span",null,"由"," ",s.a.createElement(Qt.a,{user:r,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"),s.a.createElement("span",null,Object($t.formatNumber)(o)," 条内容"),s.a.createElement("span",null,Object($t.formatNumber)(i)," 人关注"))}))})))}}]),t}())||Qc)||Qc,Yc=(n(2688),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Kc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Jc=Object(p.connect)(function(e,t){var n=t.answer.id,r=e.entities.copyrightApplicants,a=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:a.ids.map(function(e){return r[e]}),count:a.totals,isFetching:a.isFetching,isDrained:a.isDrained}},{loadAnswerCopyrightApplicants:gt.p})(Wc=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Kc(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.load=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerCopyrightApplicants)(t)},Kc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Yc(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,a=e.isDrained;return s.a.createElement("div",{className:"AnswerCopyrightApplicants"},s.a.createElement("div",{className:"AnswerCopyrightApplicants-header"},s.a.createElement("div",{className:"AnswerCopyrightApplicants-title"},"授权转载 ",Object($t.formatNumber)(n)," 次")),!(a&&!t.length)&&s.a.createElement(vo.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:r,isDrained:a,onLoad:this.load,getContainer:function(e){return e},placeholder:s.a.createElement(vo.a,{className:"AnswerCopyrightApplicants-item",small:!0})},t.map(function(e){var t=e.applier,n=e.accountType,r=e.accountUsername,a=e.createdAt;return s.a.createElement("div",{className:"AnswerCopyrightApplicants-item",key:t.name+"."+a},s.a.createElement(Zt.a,{user:t,meta:n+" "+r,status:null,action:s.a.createElement("div",{className:"AnswerCopyrightApplicants-time"},"申请于 ",Object(v.toDateString)(a))}))})))}}]),t}())||Wc,Xc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var $c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Xc(t,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,r=e.accountUsername,a=e.createdAt;return s.a.createElement("div",{className:"AnswerInfo-copyright-applicant",key:t.name+"."+a},s.a.createElement(Qt.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",r)}}]),t}(),Zc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var eu,tu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Zc(t,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return s.a.createElement(Ft.c,{className:"AnswerInfo-copyright-applicants",key:"content"},e.map(function(e,t){return s.a.createElement($c,{key:t,copyrightApplicant:e})}))}}]),t}(),nu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ru,au=Object(se.a)(function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}})(eu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),nu(t,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,r=e.followerCount,a=e.creator;return s.a.createElement("div",{className:"AnswerInfo-favlist",key:t},s.a.createElement("div",{className:"AnswerInfo-favlist-title"},s.a.createElement(wt.a,{preset:"plain",a:!0,to:"/collection/"+t,target:"_blank","data-za-detail-view-element_name":"Collection",title:n},n)),s.a.createElement("div",{className:"AnswerInfo-favlist-author"},s.a.createElement(Qt.a,{user:a,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"),s.a.createElement("div",{className:"AnswerInfo-favlist-followers"},Object($t.formatNumber)(r)," 人关注"))}}]),t}())||eu,ou=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var iu,su=Object(se.a)({module:"CollectionList"})(ru=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),ou(t,[{key:"render",value:function(){var e=this.props.favlists;return s.a.createElement(Ft.c,{className:"AnswerInfo-favlists",key:"content"},e.map(function(e){return s.a.createElement(au,{favlist:e,key:e.id})}))}}]),t}())||ru,lu=(n(2689),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function cu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var uu,pu=Object(p.connect)(function(e,t){var n=t.answer.id,r=e.entities,a=r.copyrightApplicants,o=r.favlists,i=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},s=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:i.ids.map(function(e){return a[e]}),copyrightApplicantCount:i.totals,favlists:s.ids.map(function(e){return o[e]}),favlistCount:s.totals}},{loadAnswerCopyrightApplicants:gt.p,loadAnswerFavlists:gt.q})(iu=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=cu(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},r.handleCopyrightApplicantsModalShow=function(){bt.default.trackEvent(r,{action:"Click",element:"Button",name:"转载授权"}),r.setState({copyrightApplicantsModalShown:!0})},r.handleCopyrightApplicantsModalHide=function(){r.setState({copyrightApplicantsModalShown:!1})},r.handleFavlistsModalShow=function(){bt.default.trackEvent(r,{action:"Click",element:"Button",name:"被收藏"}),r.setState({favlistsModalShown:!0})},r.handleFavlistsModalClose=function(){r.setState({favlistsModalShown:!1})},cu(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),lu(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,r=e.favlists,a=e.loadAnswerCopyrightApplicants,o=e.loadAnswerFavlists;n.length||r.length||(a(t),o(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,r=e.copyrightApplicantCount,a=e.favlists,o=e.favlistCount,i=this.state,l=i.favlistsModalShown,c=i.copyrightApplicantsModalShown;return n.length||a.length?s.a.createElement(Ft.d,null,Boolean(n.length)&&[s.a.createElement(Ft.b,{className:"AnswerInfo-title",key:"header"},"授权转载"," ",s.a.createElement(b.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow},Object($t.formatNumber)(r))," ","次"),s.a.createElement(tu,{copyrightApplicants:n.slice(0,5),key:"content"})],Boolean(a.length)&&[s.a.createElement(Ft.b,{className:"AnswerInfo-title",key:"header"},"被收藏"," ",s.a.createElement(b.c,{preset:"plain",onClick:this.handleFavlistsModalShow},Object($t.formatNumber)(o))," ","次"),s.a.createElement(su,{favlists:a.slice(0,5),key:"content"})],s.a.createElement(we.b,{size:"fullPage",onClose:this.handleFavlistsModalClose},l&&s.a.createElement(Gc,{answer:t})),s.a.createElement(we.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide},c&&s.a.createElement(Jc,{answer:t}))):null}}]),t}())||iu,fu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function mu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var hu,vu=Object(Mn.a)(null)(uu=Object(se.a)(function(e){var t=e.answer;return{module:"RightSideBar",content:du({},t.author&&{member_hash_id:t.author.id})}})(uu=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=mu(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.onHeightChange=function(){r.dynamicSticky&&r.dynamicSticky.check()},mu(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),fu(t,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,a=r.id,o=r.questionType,i=t.answer,l=Object(gt.l)(i)||Object(gt.j)(i);return s.a.createElement(ac.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:ir.f+10,ref:function(t){e.dynamicSticky=t}},s.a.createElement(il.a,{type:"question",getSidebar:function(){return e.sidebar}}),l||"normal"===o&&s.a.createElement("div",{className:"Question-sideColumnAdContainer"},s.a.createElement(ol.a,{isMobile:!1,id:"question/"+a+"/answer/"+i.id,location:"new_answer_up",query:{question_token:a,answer_token:i.id},onHeightChange:this.onHeightChange})),"commercial"===o&&s.a.createElement(zl.a,{questionId:a}),i.author&&s.a.createElement(Uc,{answer:i,onLoad:this.onHeightChange}),s.a.createElement(rc,null),s.a.createElement(pu,{answer:i,onLoad:this.onHeightChange}),l||"commercial"!==o&&s.a.createElement(bl,{question:n,onLoad:this.onHeightChange}),l||"normal"===o&&s.a.createElement(Ol,{question:n,onLoad:this.onHeightChange}),l||"normal"===o&&s.a.createElement(Bl,{answer:i,question:n,onLoad:this.onHeightChange}),l||"normal"===o&&s.a.createElement("div",null,s.a.createElement(ol.a,{isMobile:!1,id:"question/"+a+"/answer/"+i.id,location:"new_answer_down_sticky",query:{question_token:a,answer_token:i.id},delay:1e3,onHeightChange:this.onHeightChange})),s.a.createElement(sl.a,null))}}]),t}())||uu)||uu,bu=(n(2690),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var yu,wu,gu,Eu=Object(se.a)(function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}})(hu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),bu(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,r=e.questionType;e.bottom;return s.a.createElement(Ft.d,{className:W()("ViewAll",{"ViewAll--bottom":!1})},s.a.createElement(Xt,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{}},"commercial"===r?"查看 "+Object($t.formatNumber)(n)+" 个品牌推荐的回答":"查看全部 "+Object($t.formatNumber)(n)+" 个回答"))}}]),t}())||hu,Ou=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var ku=Object(p.connect)(function(e,t){var n=t.params,r=n.id,a=n.answerId,o=Object(w.S)(e,{id:r}),i=Object(gt.c)(e,{id:a}),s=(o||{}).relationship||{myAnswer:{isDelete:!1}};return{question:o,answer:i&&Cu({},i,{isDelete:(i.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(w.u)(o)}},{loadAnswer:gt.m})((gu=wu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),Ou(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,r=e.loadAnswer;t||r(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,r=e.loadAnswer;n!==t&&r(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,r=e.question,a=e.question,o=a.id,i=a.answerCount,l=a.questionType,c=e.location,u=e.isMuteSpecial;return s.a.createElement("div",{className:"Question-main"},s.a.createElement(d.a,{meta:Object(ro.a)(t)}),s.a.createElement(bc.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(",")},s.a.createElement("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0},Object(gt.l)(t)||Object(gt.j)(t)||i>0&&!u&&s.a.createElement(Eu,{itemNum:i,to:"/question/"+o,questionType:l}),s.a.createElement(Oc,{question:r,location:c,answer:t}),Object(gt.l)(t)||Object(gt.j)(t)||s.a.createElement(Pc,{question:r,answerId:n}),i>0&&!u&&s.a.createElement(Eu,{itemNum:i,to:"/question/"+o,questionType:l}))),s.a.createElement(V.a,null,s.a.createElement(vu,{question:r,answer:t})))}}]),t}(),wu.fetchData=function(e){var t=e.params.answerId;return Object(gt.m)(t)},yu=gu))||yu;t.default=s.a.createElement(l.Route,null,s.a.createElement(l.Route,{path:"waiting",component:xo,name:"QuestionWaiting",authRequired:!0,zaPageId:5541}),s.a.createElement(l.Route,{path:"later",component:Bo,name:"QuestionLater",authRequired:!0,zaPageId:5371}),s.a.createElement(l.Route,{path:"invited",component:Ko,name:"QuestionInvited",authRequired:!0,zaPageId:5543}),s.a.createElement(l.Route,{path:":id",component:ho,name:"Question"},s.a.createElement(l.Route,{sticky:function(){var e=document.querySelector("#QuestionAnswers-answers");return e?e.offsetTop:0}},s.a.createElement(l.IndexRoute,{component:vc,entity:"answers",resource:"answers",name:"QuestionPage",zaPageId:3378}),s.a.createElement(l.Route,{path:"answers/hidden",component:vc,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),s.a.createElement(l.Route,{path:"answers/updated",component:vc,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),s.a.createElement(l.Redirect,{from:"answers/created",to:"answers/updated"})),s.a.createElement(l.Route,{path:"answer/:answerId",component:ku,name:"AnswerPage",zaPageId:2012}),s.a.createElement(l.Redirect,{from:"noti-answers",to:"."})))}}]);
//# sourceMappingURL=main.question-routes.e5cedb3074c942953b18.js.map